@using NewCrmCore.Dto
@using NewCrmCore.Domain.ValueObject;
@using NewCrmCore.Infrastructure;
@model AppDto
@{
    Layout = "~/Views/Shared/_LayoutRoot.cshtml";
    var userId = ViewData["UserId"].ToString() ?? "0";
}
@section ChildrenCss
    {
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/webupload/webuploader.css" rel="stylesheet">
    <style>
        * {
            box-sizing: unset;
        }
    </style>
}
@section SysCss
    {
    <link rel="stylesheet" href="/css/hoorayui/sys.css" />
}

@{
    var data = new ViewDataDictionary(ViewData);
    data.Add("uniqueToken",ViewData["uniqueToken"]);
    if (Model != null)
    {


        if ((AppAuditState)ViewData["AppState"] == AppAuditState.Pass)//已通过
        {
            <text>
                @Html.PartialAsync("~/Views/AppMarket/UserAppManageDetail.cshtml", Model)
            </text>
        }
        else
        {
            if ((AppAuditState)ViewData["AppState"] == AppAuditState.UnAuditState || (AppAuditState)ViewData["AppState"] == AppAuditState.Deny)//未审核或未通过
            {
                <text>
                    @Html.PartialAsync("~/Views/AppManager/AppAudit.cshtml", Model)
                </text>
            }
            else
            {
                <text>
                    @Html.PartialAsync("~/Views/AppMarket/UserAppManageEdit.cshtml", Model,data)
                </text>
            }
        }
    }
    else
    {
        <text>
            @Html.PartialAsync("~/Views/AppMarket/UserAppManageNewApp.cshtml",null,data)
        </text>
    }
    <input type="hidden" id="uploadUrl" value="@(NewCrmCore.Infrastructure.Appsetting.UploadUrl)">
    <input type="hidden" id="userId" value="@userId">
    <input type="hidden" id="appId" value='@Context.Request.Query["AppId"]'>
    <input type="hidden" id="fileUrl" value="@Appsetting.FileUrl">
}
@section ScriptLabel
{
    <script src="/js/webupload/webuploader.min.js"></script>
    <script src="~/js/pagelogic/appmarket_userappmanageinfo.js"></script>
}
 

