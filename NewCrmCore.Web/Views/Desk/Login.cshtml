@using NewCrmCore.Infrastructure.CommonTools
@{
	Layout = "~/Views/Shared/_LayoutApps.cshtml";
}
@section ChildrenCss{
	<style>
		.bg{
			background-image: url(/images/ui/sign_bg.png);
			background-repeat: no-repeat;
			background-color: #b8e5f8;
			background-size: cover;
			width: 100%;
			height: 100vh;
			overflow: auto;
			padding-right: 15px;
		}

		.SignFlowHomepage-content{
			-webkit-box-flex: 1;
			-ms-flex: 1;
			flex: 1;
			display: -webkit-box;
			display: -ms-flexbox;
			display: flex;
			-webkit-box-orient: vertical;
			-webkit-box-direction: normal;
			-ms-flex-direction: column;
			flex-direction: column;
			-webkit-box-align: center;
			-ms-flex-align: center;
			align-items: center;
			-webkit-box-pack: center;
			-ms-flex-pack: center;
			justify-content: center;
			border-radius: 2px;
			min-height: 688px;
			height: calc(100% - 42px);
			box-sizing: border-box;
		}
		
	</style>
}
<div style="overflow:hidden">
	<div class="loading" style="display: none"></div>
	<div class="bg">
		<div class="SignFlowHomepage-content" >
			<div class="well">
				<form name="form" id="form" method="POST" action="/desk/landing" class="form-horizontal">
				<input type="hidden" name="token" value="@(await TimeToken.GetTokenAsync())" />
					<div class="control-group">
						<div class="controls">
							<input type="text" name="accountname" value="admin" placeholder="用户名" datatype="s2-10" nullmsg="请输入用户名" errormsg="用户名长度为2-10个字符" />
						</div>
					</div>
					<div class="control-group">
						<div class="controls">
							<input type="password" name="password" value="@("xiaofan@.1")" placeholder="密码" datatype="*6-12" nullmsg="请输入用户密码" errormsg="用户密码长度为6-12个字符"  />
						</div>
					</div>
					<div class="control-group">
						<div class="controls">
							<label class="checkbox">
								<input type="checkbox" onchange="$('#remerber').val($(this).prop('checked'))" >七天内登录
								<input type="hidden" name="remerber" id="remerber">
							</label>
							<a class="btn" id="btn-submit" href="###" >登 陆</a>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
 @section ChildrenScript{
	<script>
		$(function(){
			var f = $('#form').Validform({
				btnSubmit: '#btn-submit',
				postonce: true,
				showAllError: true,
				tiptype: function (msg, o) {
					if (!o.obj.is('form')) { 
						var B = o.obj.parents('.control-group');
						var T = B.children('.help-inline');
						if (o.type === 2) {
							B.removeClass('error');
							T.text('');
						} else {
							B.addClass('error');
							T.text(msg);
						}
					}
				},
				ajaxPost: true,
				postonceTip:function(){
					NewCrm.msgbox.fail(HROS.CONFIG.postOnce)
				},
				beforeSubmit: function (curform) { 
					NewCrm.msgbox.loading(HROS.CONFIG.loadingPrompt)
				},
				callback: function (responseText) {
					var response = responseText;
					if (response.IsSuccess) {
						NewCrm.msgbox.close();
						//location.href = '/desk/index'
					} else {
						NewCrm.msgbox.fail(response.Message);
					}
				}
			});
		})
	</script>
 }
