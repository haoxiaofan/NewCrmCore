function uaMatch(n){n=n.toLowerCase();var t=rwebkit.exec(n)||ropera.exec(n)||rmsie.exec(n)||n.indexOf("compatible")<0&&rmozilla.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}}var DD_belatedPNG,swfobject,ZeroClipboard,ua,agent;if(jQuery.extend({browser:function(){var n={},i=window.navigator.userAgent,t=uaMatch(i);return t.browser&&(n[t.browser]=!0,n.version=t.version),{browser:n}}}),$.browser.msie&&$.browser.version=="6.0"&&!$.support.style){DD_belatedPNG={ns:"DD_belatedPNG",imgSize:{},delay:10,nodesFixed:0,createVmlNameSpace:function(){document.namespaces&&!document.namespaces[this.ns]&&document.namespaces.add(this.ns,"urn:schemas-microsoft-com:vml")},createVmlStyleSheet:function(){var n,t;n=document.createElement("style");n.setAttribute("media","screen");document.documentElement.firstChild.insertBefore(n,document.documentElement.firstChild.firstChild);n.styleSheet&&(n=n.styleSheet,n.addRule(this.ns+"\\:*","{behavior:url(#default#VML)}"),n.addRule(this.ns+"\\:shape","position:absolute;"),n.addRule("img."+this.ns+"_sizeFinder","behavior:none; border:none; position:absolute; z-index:-1; top:-10000px; visibility:hidden;"),this.screenStyleSheet=n,t=document.createElement("style"),t.setAttribute("media","print"),document.documentElement.firstChild.insertBefore(t,document.documentElement.firstChild.firstChild),t=t.styleSheet,t.addRule(this.ns+"\\:*","{display: none !important;}"),t.addRule("img."+this.ns+"_sizeFinder","{display: none !important;}"))},readPropertyChange:function(){var n,i,t;if(n=event.srcElement,n.vmlInitiated){if((event.propertyName.search("background")!=-1||event.propertyName.search("border")!=-1)&&DD_belatedPNG.applyVML(n),event.propertyName=="style.display"){i=n.currentStyle.display=="none"?"none":"block";for(t in n.vml)n.vml.hasOwnProperty(t)&&(n.vml[t].shape.style.display=i)}event.propertyName.search("filter")!=-1&&DD_belatedPNG.vmlOpacity(n)}},vmlOpacity:function(n){if(n.currentStyle.filter.search("lpha")!=-1){var t=n.currentStyle.filter;t=parseInt(t.substring(t.lastIndexOf("=")+1,t.lastIndexOf(")")),10)/100;n.vml.color.shape.style.filter=n.currentStyle.filter;n.vml.image.fill.opacity=t}},handlePseudoHover:function(n){setTimeout(function(){DD_belatedPNG.applyVML(n)},1)},fix:function(n){if(this.screenStyleSheet)for(var i=n.split(","),t=0;t<i.length;t++)this.screenStyleSheet.addRule(i[t],"behavior:expression(DD_belatedPNG.fixPng(this))")},applyVML:function(n){n.runtimeStyle.cssText="";this.vmlFill(n);this.vmlOffsets(n);this.vmlOpacity(n);n.isImg&&this.copyImageBorders(n)},attachHandlers:function(n){var f,t,e,i,r,u;if(f=this,t={resize:"vmlOffsets",move:"vmlOffsets"},n.nodeName=="A"){i={mouseleave:"handlePseudoHover",mouseenter:"handlePseudoHover",focus:"handlePseudoHover",blur:"handlePseudoHover"};for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}for(u in t)t.hasOwnProperty(u)&&(e=function(){f[t[u]](n)},n.attachEvent("on"+u,e));n.attachEvent("onpropertychange",this.readPropertyChange)},giveLayout:function(n){n.style.zoom=1;n.currentStyle.position=="static"&&(n.style.position="relative")},copyImageBorders:function(n){var i,t;i={borderStyle:!0,borderWidth:!0,borderColor:!0};for(t in i)i.hasOwnProperty(t)&&(n.vml.color.shape.style[t]=n.currentStyle[t])},vmlFill:function(n){if(n.currentStyle){var i,u,r,f,t,e;i=n.currentStyle}else return;for(f in n.vml)n.vml.hasOwnProperty(f)&&(n.vml[f].shape.style.zIndex=i.zIndex);n.runtimeStyle.backgroundColor="";n.runtimeStyle.backgroundImage="";u=!0;(i.backgroundImage!="none"||n.isImg)&&(n.isImg?n.vmlBg=n.src:(n.vmlBg=i.backgroundImage,n.vmlBg=n.vmlBg.substr(5,n.vmlBg.lastIndexOf('")')-5)),r=this,r.imgSize[n.vmlBg]||(t=document.createElement("img"),r.imgSize[n.vmlBg]=t,t.className=r.ns+"_sizeFinder",t.runtimeStyle.cssText="behavior:none; position:absolute; left:-10000px; top:-10000px; border:none; margin:0; padding:0;",e=function(){this.width=this.offsetWidth;this.height=this.offsetHeight;r.vmlOffsets(n)},t.attachEvent("onload",e),t.src=n.vmlBg,t.removeAttribute("width"),t.removeAttribute("height"),document.body.insertBefore(t,document.body.firstChild)),n.vml.image.fill.src=n.vmlBg,u=!1);n.vml.image.fill.on=!u;n.vml.image.fill.color="none";n.vml.color.shape.style.backgroundColor=i.backgroundColor;n.runtimeStyle.backgroundImage="none";n.runtimeStyle.backgroundColor="transparent"},vmlOffsets:function(n){var u,t,f,l,i,o,e,s,h,r,c;if(u=n.currentStyle,t={W:n.clientWidth+1,H:n.clientHeight+1,w:this.imgSize[n.vmlBg].width,h:this.imgSize[n.vmlBg].height,L:n.offsetLeft,T:n.offsetTop,bLW:n.clientLeft,bTW:n.clientTop},f=t.L+t.bLW==1?1:0,l=function(n,t,i,r,u,f){n.coordsize=r+","+u;n.coordorigin=f+","+f;n.path="m0,0l"+r+",0l"+r+","+u+"l0,"+u+" xe";n.style.width=r+"px";n.style.height=u+"px";n.style.left=t+"px";n.style.top=i+"px"},l(n.vml.color.shape,t.L+(n.isImg?0:t.bLW),t.T+(n.isImg?0:t.bTW),t.W-1,t.H-1,0),l(n.vml.image.shape,t.L+t.bLW,t.T+t.bTW,t.W,t.H,1),i={X:0,Y:0},n.isImg)i.X=parseInt(u.paddingLeft,10)+1,i.Y=parseInt(u.paddingTop,10)+1;else for(h in i)i.hasOwnProperty(h)&&this.figurePercentage(i,t,h,u["backgroundPosition"+h]);n.vml.image.fill.position=i.X/t.W+","+i.Y/t.H;o=u.backgroundRepeat;e={T:1,R:t.W+f,B:t.H,L:1+f};s={X:{b1:"L",b2:"R",d:"W"},Y:{b1:"T",b2:"B",d:"H"}};o!="repeat"||n.isImg?(r={T:i.Y,R:i.X+t.w,B:i.Y+t.h,L:i.X},o.search("repeat-")!=-1&&(c=o.split("repeat-")[1].toUpperCase(),r[s[c].b1]=1,r[s[c].b2]=t[s[c].d]),r.B>t.H&&(r.B=t.H),n.vml.image.shape.style.clip="rect("+r.T+"px "+(r.R+f)+"px "+r.B+"px "+(r.L+f)+"px)"):n.vml.image.shape.style.clip="rect("+e.T+"px "+e.R+"px "+e.B+"px "+e.L+"px)"},figurePercentage:function(n,t,i,r){var u,f;f=!0;u=i=="X";switch(r){case"left":case"top":n[i]=0;break;case"center":n[i]=.5;break;case"right":case"bottom":n[i]=1;break;default:r.search("%")!=-1?n[i]=parseInt(r,10)/100:f=!1}return n[i]=Math.ceil(f?t[u?"W":"H"]*n[i]-t[u?"w":"h"]*n[i]:parseInt(r,10)),n[i]%2==0&&n[i]++,n[i]},fixPng:function(n){n.style.behavior="none";var i,u,f,t,r;if(n.nodeName!="BODY"&&n.nodeName!="TD"&&n.nodeName!="TR"){if(n.isImg=!1,n.nodeName=="IMG")if(n.src.toLowerCase().search(/\.png$/)!=-1)n.isImg=!0,n.style.visibility="hidden";else return;else if(n.currentStyle.backgroundImage.toLowerCase().search(".png")==-1)return;i=DD_belatedPNG;n.vml={color:{},image:{}};u={shape:{},fill:{}};for(t in n.vml)if(n.vml.hasOwnProperty(t)){for(r in u)u.hasOwnProperty(r)&&(f=i.ns+":"+r,n.vml[t][r]=document.createElement(f));n.vml[t].shape.stroked=!1;n.vml[t].shape.appendChild(n.vml[t].fill);n.parentNode.insertBefore(n.vml[t].shape,n)}n.vml.image.shape.fillcolor="none";n.vml.image.fill.type="tile";n.vml.color.fill.on=!1;i.attachHandlers(n);i.giveLayout(n);i.giveLayout(n.offsetParent);n.vmlInitiated=!0;i.applyVML(n)}}};try{document.execCommand("BackgroundImageCache",!1,!0)}catch(r){}DD_belatedPNG.createVmlNameSpace();DD_belatedPNG.createVmlStyleSheet()}swfobject=function(){function v(){var i,r,n;if(!c){try{i=t.getElementsByTagName("body")[0].appendChild(h("span"));i.parentNode.removeChild(i)}catch(u){return}for(c=!0,r=w.length,n=0;n<r;n++)w[n]()}}function yt(n){c?n():w[w.length]=n}function pt(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)ui(r,"onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u();n()}}else r.onload=n}function gt(){lt?ni():it()}function ni(){var o=t.getElementsByTagName("body")[0],u=h(f),r,e;u.setAttribute("type",p);r=o.appendChild(u);r?(e=0,function(){if(typeof r.GetVariable!=i){var t=r.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),n.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(e<10){e++;setTimeout(arguments.callee,10);return}o.removeChild(u);r=null;it()}()):it()}function it(){var y=s.length,r,t,h,c,v;if(y>0)for(r=0;r<y;r++){var f=s[r].id,e=s[r].callbackFn,o={success:!1,id:f};if(n.pv[0]>0){if(t=u(f),t)if(!g(s[r].swfVersion)||n.wk&&n.wk<312)if(s[r].expressInstall&&ut()){h={};h.data=s[r].expressInstall;h.width=t.getAttribute("width")||"0";h.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(h.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(h.align=t.getAttribute("align"));var p={},a=t.getElementsByTagName("param"),w=a.length;for(c=0;c<w;c++)a[c].getAttribute("name").toLowerCase()!="movie"&&(p[a[c].getAttribute("name")]=a[c].getAttribute("value"));ft(h,p,f,e)}else ti(t),e&&e(o);else l(f,!0),e&&(o.success=!0,o.ref=rt(f),e(o))}else l(f,!0),e&&(v=rt(f),v&&typeof v.SetVariable!=i&&(o.success=!0,o.ref=v),e(o))}}function rt(n){var r=null,t=u(n),e;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=i?r=t:(e=t.getElementsByTagName(f)[0],e&&(r=e))),r}function ut(){return!d&&g("6.0.65")&&(n.win||n.mac)&&!(n.wk&&n.wk<312)}function ft(f,e,o,s){var c,v,l,a;d=!0;nt=s||null;at={success:!1,id:o};c=u(o);c&&(c.nodeName=="OBJECT"?(y=et(c),k=null):(y=c,k=o),f.id=ht,(typeof f.width==i||!/%$/.test(f.width)&&parseInt(f.width,10)<310)&&(f.width="310"),(typeof f.height==i||!/%$/.test(f.height)&&parseInt(f.height,10)<137)&&(f.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation",v=n.ie&&n.win?"ActiveX":"PlugIn",l="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+t.title,typeof e.flashvars!=i?e.flashvars+="&"+l:e.flashvars=l,n.ie&&n.win&&c.readyState!=4&&(a=h("div"),o+="SWFObjectNew",a.setAttribute("id",o),c.parentNode.insertBefore(a,c),c.style.display="none",function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()),ot(f,e,o))}function ti(t){if(n.ie&&n.win&&t.readyState!=4){var i=h("div");t.parentNode.insertBefore(i,t);i.parentNode.replaceChild(et(t),i);t.style.display="none",function(){t.readyState==4?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(et(t),t)}function et(t){var u=h("div"),e,i,o,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function ot(t,r,e){var v,y=u(e),w,o,k,a,c,s,l;if(n.wk&&n.wk<312)return v;if(y)if(typeof t.id==i&&(t.id=e),n.ie&&n.win){w="";for(o in t)t[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?r.movie=t[o]:o.toLowerCase()=="styleclass"?w+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(w+=" "+o+'="'+t[o]+'"'));k="";for(a in r)r[a]!=Object.prototype[a]&&(k+='<param name="'+a+'" value="'+r[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+w+">"+k+"<\/object>";b[b.length]=t.id;v=u(t.id)}else{c=h(f);c.setAttribute("type",p);for(s in t)t[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?c.setAttribute("class",t[s]):s.toLowerCase()!="classid"&&c.setAttribute(s,t[s]));for(l in r)r[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ii(c,l,r[l]);y.parentNode.replaceChild(c,y);v=c}return v}function ii(n,t,i){var r=h("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function wt(t){var i=u(t);i&&i.nodeName=="OBJECT"&&(n.ie&&n.win?(i.style.display="none",function(){i.readyState==4?ri(t):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ri(n){var t=u(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function u(n){var i=null;try{i=t.getElementById(n)}catch(r){}return i}function h(n){return t.createElement(n)}function ui(n,t,i){n.attachEvent(t,i);a[a.length]=[n,t,i]}function g(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function bt(r,u,o,s){var a,c,l;n.ie&&n.mac||(a=t.getElementsByTagName("head")[0],a)&&(c=o&&typeof o=="string"?o:"screen",s&&(e=null,tt=null),e&&tt==c||(l=h("style"),l.setAttribute("type","text/css"),l.setAttribute("media",c),e=a.appendChild(l),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(e=t.styleSheets[t.styleSheets.length-1]),tt=c),n.ie&&n.win?e&&typeof e.addRule==f&&e.addRule(r,u):e&&typeof t.createTextNode!=i&&e.appendChild(t.createTextNode(r+" {"+u+"}")))}function l(n,t){if(vt){var i=t?"visible":"hidden";c&&u(n)?u(n).style.visibility=i:bt("#"+n,"visibility:"+i)}}function kt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=i?encodeURIComponent(n):n}var i="undefined",f="object",st="Shockwave Flash",dt="ShockwaveFlash.ShockwaveFlash",p="application/x-shockwave-flash",ht="SWFObjectExprInst",ct="onreadystatechange",r=window,t=document,o=navigator,lt=!1,w=[gt],s=[],b=[],a=[],y,k,nt,at,c=!1,d=!1,e,tt,vt=!0,n=function(){var l=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i,e=o.userAgent.toLowerCase(),s=o.platform.toLowerCase(),a=s?/win/.test(s):/win/.test(e),v=s?/mac/.test(s):/mac/.test(e),y=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",u=[0,0,0],n=null,c;if(typeof o.plugins!=i&&typeof o.plugins[st]==f)n=o.plugins[st].description,!n||typeof o.mimeTypes!=i&&o.mimeTypes[p]&&!o.mimeTypes[p].enabledPlugin||(lt=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i)try{c=new ActiveXObject(dt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(w){}return{w3:l,pv:u,wk:y,ie:h,win:a,mac:v}}(),fi=function(){n.w3&&((typeof t.readyState!=i&&t.readyState=="complete"||typeof t.readyState==i&&(t.getElementsByTagName("body")[0]||t.body))&&v(),c||(typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",v,!1),n.ie&&n.win&&(t.attachEvent(ct,function(){t.readyState=="complete"&&(t.detachEvent(ct,arguments.callee),v())}),r==top&&function(){if(!c){try{t.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}v()}}()),n.wk&&function(){if(!c){if(!/loaded|complete/.test(t.readyState)){setTimeout(arguments.callee,0);return}v()}}(),pt(v)))}(),ei=function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var r,i,u,f,e=a.length,t=0;t<e;t++)a[t][0].detachEvent(a[t][1],a[t][2]);for(r=b.length,i=0;i<r;i++)wt(b[i]);for(u in n)n[u]=null;n=null;for(f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(t,i,r,u){if(n.w3&&t&&i){var f={};f.id=t;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;s[s.length]=f;l(t,!1)}else u&&u({success:!1,id:t})},getObjectById:function(t){if(n.w3)return rt(t)},embedSWF:function(t,r,u,e,o,s,h,c,a,v){var y={success:!1,id:r};n.w3&&!(n.wk&&n.wk<312)&&t&&r&&u&&e&&o?(l(r,!1),yt(function(){var n,b,p,k,w,d;if(u+="",e+="",n={},a&&typeof a===f)for(b in a)n[b]=a[b];if(n.data=t,n.width=u,n.height=e,p={},c&&typeof c===f)for(k in c)p[k]=c[k];if(h&&typeof h===f)for(w in h)typeof p.flashvars!=i?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(g(o))d=ot(n,p,r),n.id==r&&l(r,!0),y.success=!0,y.ref=d;else{if(s&&ut()){n.data=s;ft(n,p,r,v);return}l(r,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){vt=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,i,r){return n.w3?ot(t,i,r):undefined},showExpressInstall:function(t,i,r,u){n.w3&&ut()&&ft(t,i,r,u)},removeSWF:function(t){n.w3&&wt(t)},createCSS:function(t,i,r,u){n.w3&&bt(t,i,r,u)},addDomLoadEvent:yt,addLoadEvent:pt,getQueryParamValue:function(n){var r=t.location.search||t.location.hash,u,i;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return kt(r);for(u=r.split("&"),i=0;i<u.length;i++)if(u[i].substring(0,u[i].indexOf("="))==n)return kt(u[i].substring(u[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(d){var t=u(ht);t&&y&&(t.parentNode.replaceChild(y,t),k&&(l(k,!0),n.ie&&n.win&&(y.style.display="block")),nt&&nt(at));d=!1}}}}(),function(n){var t=/["\\\x00-\x1f\x7f-\x9f]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r=Object.prototype.hasOwnProperty;n.toJSON=typeof JSON=="object"&&JSON.stringify?JSON.stringify:function(t){var e,u,a,v,i;if(t===null)return"null";if(i=n.type(t),i==="undefined")return undefined;if(i==="number"||i==="boolean")return String(t);if(i==="string")return n.quoteString(t);if(typeof t.toJSON=="function")return n.toJSON(t.toJSON());if(i==="date"){var o=t.getUTCMonth()+1,s=t.getUTCDate(),y=t.getUTCFullYear(),h=t.getUTCHours(),c=t.getUTCMinutes(),l=t.getUTCSeconds(),f=t.getUTCMilliseconds();return o<10&&(o="0"+o),s<10&&(s="0"+s),h<10&&(h="0"+h),c<10&&(c="0"+c),l<10&&(l="0"+l),f<100&&(f="0"+f),f<10&&(f="0"+f),'"'+y+"-"+o+"-"+s+"T"+h+":"+c+":"+l+"."+f+'Z"'}if(e=[],n.isArray(t)){for(u=0;u<t.length;u++)e.push(n.toJSON(t[u])||"null");return"["+e.join(",")+"]"}if(typeof t=="object"){for(u in t)if(r.call(t,u)){if(i=typeof u,i==="number")a='"'+u+'"';else if(i==="string")a=n.quoteString(u);else continue;i=typeof t[u];i!=="function"&&i!=="undefined"&&(v=n.toJSON(t[u]),e.push(a+":"+v))}return"{"+e.join(",")+"}"}};n.evalJSON=typeof JSON=="object"&&JSON.parse?JSON.parse:function(n){return eval("("+n+")")};n.secureEvalJSON=typeof JSON=="object"&&JSON.parse?JSON.parse:function(n){var t=n.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return eval("("+n+")");throw new SyntaxError("Error parsing JSON, source is not valid.");};n.quoteString=function(n){return n.match(t)?'"'+n.replace(t,function(n){var t=i[n];return typeof t=="string"?t:(t=n.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+n+'"'}}(jQuery),function(n){n.fn.zclip=function(t){if(typeof t!="object"||t.length){if(typeof t=="string")return this.each(function(){var r=n(this),u,i;t=t.toLowerCase();u=r.data("zclipId");i=n("#"+u+".zclip");t=="remove"?(i.remove(),r.removeClass("active hover")):t=="hide"?(i.hide(),r.removeClass("active hover")):t=="show"&&i.show()})}else{var i=n.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},t);return this.each(function(){var t=n(this),r;t.is(":visible")&&(typeof i.copy=="string"||n.isFunction(i.copy))&&(ZeroClipboard.setMoviePath(i.path),r=new ZeroClipboard.Client,n.isFunction(i.copy)&&t.bind("zClip_copy",i.copy),n.isFunction(i.beforeCopy)&&t.bind("zClip_beforeCopy",i.beforeCopy),n.isFunction(i.afterCopy)&&t.bind("zClip_afterCopy",i.afterCopy),r.setHandCursor(i.setHandCursor),r.setCSSEffects(i.setCSSEffects),r.addEventListener("mouseOver",function(){t.trigger("mouseenter")}),r.addEventListener("mouseOut",function(){t.trigger("mouseleave")}),r.addEventListener("mouseDown",function(){t.trigger("mousedown");n.isFunction(i.copy)?r.setText(t.triggerHandler("zClip_copy")):r.setText(i.copy);n.isFunction(i.beforeCopy)&&t.trigger("zClip_beforeCopy")}),r.addEventListener("complete",function(r,u){n.isFunction(i.afterCopy)?t.trigger("zClip_afterCopy"):(u.length>500&&(u=u.substr(0,500)+"...\n\n("+(u.length-500)+" characters not shown)"),t.removeClass("hover"),alert("Copied text to clipboard:\n\n "+u));i.clickAfter&&t.trigger("click")}),r.glue(t[0],t.parent()[0]),n(window).bind("load resize",function(){r.reposition()}))})}}}(jQuery);ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(n){return typeof n=="string"&&(n=document.getElementById(n)),n.addClass||(n.hide=function(){this.style.display="none"},n.show=function(){this.style.display=""},n.addClass=function(n){this.removeClass(n);this.className+=" "+n},n.removeClass=function(n){for(var t=this.className.split(/\s+/),r=-1,i=0;i<t.length;i++)t[i]==n&&(r=i,i=t.length);return r>-1&&(t.splice(r,1),this.className=t.join(" ")),this},n.hasClass=function(n){return!!this.className.match(new RegExp("\\s*"+n+"\\s*"))}),n},setMoviePath:function(n){this.moviePath=n},dispatch:function(n,t,i){var r=this.clients[n];r&&r.receiveEvent(t,i)},register:function(n,t){this.clients[n]=t},getDOMObjectPosition:function(n,t){var i={left:0,top:0,width:n.width?n.width:n.offsetWidth,height:n.height?n.height:n.offsetHeight};return n&&n!=t&&(i.left+=n.offsetLeft,i.top+=n.offsetTop),i},Client:function(n){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);n&&this.glue(n)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(n,t,i){var f,u,r;if(this.domElement=ZeroClipboard.$(n),f=99,this.domElement.style.zIndex&&(f=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]),u=ZeroClipboard.getDOMObjectPosition(this.domElement,t),this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId),r=this.div.style,r.position="absolute",r.left=""+u.left+"px",r.top=""+u.top+"px",r.width=""+u.width+"px",r.height=""+u.height+"px",r.zIndex=f,typeof i=="object")for(addedStyle in i)r[addedStyle]=i[addedStyle];t.appendChild(this.div);this.div.innerHTML=this.getHTML(u.width,u.height)},getHTML:function(n,t){var i="",r="id="+this.id+"&width="+n+"&height="+t,u;return navigator.userAgent.match(/MSIE/)?(u=location.href.match(/^https/i)?"https://":"http://",i+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+u+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+n+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/><\/object>'):i+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+n+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />',i},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var n=document.getElementsByTagName("body")[0];try{n.removeChild(this.div)}catch(t){}this.domElement=null;this.div=null}},reposition:function(n){if(n&&(this.domElement=ZeroClipboard.$(n),this.domElement||this.hide()),this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),i=this.div.style;i.left=""+t.left+"px";i.top=""+t.top+"px"}},setText:function(n){this.clipText=n;this.ready&&this.movie.setText(n)},addEventListener:function(n,t){n=n.toString().toLowerCase().replace(/^on/,"");this.handlers[n]||(this.handlers[n]=[]);this.handlers[n].push(t)},setHandCursor:function(n){this.handCursorEnabled=n;this.ready&&this.movie.setHandCursor(n)},setCSSEffects:function(n){this.cssEffects=!!n},receiveEvent:function(n,t){var r,u,f,i;n=n.toString().toLowerCase().replace(/^on/,"");switch(n){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){r=this;setTimeout(function(){r.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){r=this;setTimeout(function(){r.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;try{this.movie.setText(this.clipText)}catch(e){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(e){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[n])for(u=0,f=this.handlers[n].length;u<f;u++)i=this.handlers[n][u],typeof i=="function"?i(this,t):typeof i=="object"&&i.length==2?i[0][i[1]](this,t):typeof i=="string"&&window[i](this,t)}};jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,t,i,r,u){return jQuery.easing[jQuery.easing.def](n,t,i,r,u)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,r,u){return r*(t/=u)*t*t*t+i},easeOutQuart:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,r,u){return r*(t/=u)*t*t*t*t+i},easeOutQuint:function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInExpo:function(n,t,i,r,u){return t==0?i:r*Math.pow(2,10*(t/u-1))+i},easeOutExpo:function(n,t,i,r,u){return t==u?i+r:r*(-Math.pow(2,-10*t/u)+1)+i},easeInOutExpo:function(n,t,i,r,u){return t==0?i:t==u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(n,t,i,r,u){return-r*(Math.sqrt(1-(t/=u)*t)-1)+i},easeOutCirc:function(n,t,i,r,u){return r*Math.sqrt(1-(t=t/u-1)*t)+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f))+i)},easeOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),e*Math.pow(2,-10*t)*Math.sin((t*u-o)*2*Math.PI/f)+r+i)},easeInOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u/2)==2?i+r:(f||(f=u*.3*1.5),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),t<1)?-.5*e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)+i:e*Math.pow(2,-10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)*.5+r+i},easeInBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*(t/=u)*t*((f+1)*t-f)+i},easeOutBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*((t=t/u-1)*t*((f+1)*t+f)+1)+i},easeInOutBack:function(n,t,i,r,u,f){return(f==undefined&&(f=1.70158),(t/=u/2)<1)?r/2*t*t*(((f*=1.525)+1)*t-f)+i:r/2*((t-=2)*t*(((f*=1.525)+1)*t+f)+2)+i},easeInBounce:function(n,t,i,r,u){return r-jQuery.easing.easeOutBounce(n,u-t,0,r,u)+i},easeOutBounce:function(n,t,i,r,u){return(t/=u)<1/2.75?r*7.5625*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(n,t,i,r,u){return t<u/2?jQuery.easing.easeInBounce(n,t*2,0,r,u)*.5+i:jQuery.easing.easeOutBounce(n,t*2-u,0,r,u)*.5+r*.5+i}});!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?n(require("jquery")):n(jQuery)}(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function u(n){return t.raw?n:decodeURIComponent(n)}function f(n){return i(t.json?JSON.stringify(n):String(n))}function e(n){0===n.indexOf('"')&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(o," ")),t.json?JSON.parse(n):n}catch(i){}}function r(i,r){var u=t.raw?i:e(i);return n.isFunction(r)?r(u):u}var o=/\+/g,t=n.cookie=function(e,o,s){var v,c;if(arguments.length>1&&!n.isFunction(o))return(s=n.extend({},t.defaults,s),"number"==typeof s.expires)&&(v=s.expires,c=s.expires=new Date,c.setTime(+c+864e5*v)),document.cookie=[i(e),"=",f(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(var l=e?void 0:{},y=document.cookie?document.cookie.split("; "):[],a=0,b=y.length;b>a;a++){var p=y[a].split("="),w=u(p.shift()),h=p.join("=");if(e&&e===w){l=r(h,o);break}e||void 0===(h=r(h))||(l[w]=h)}return l};t.defaults={};n.removeCookie=function(t,i){return void 0===n.cookie(t)?!1:(n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t))}}),function(n,t,i){function h(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent("on"+t,i)}function w(n){if("keypress"==n.type){var t=String.fromCharCode(n.which);return n.shiftKey||(t=t.toLowerCase()),t}return u[n.which]?u[n.which]:g[n.which]?g[n.which]:String.fromCharCode(n.which).toLowerCase()}function c(n){n=n||{};var t=!1;for(var i in e)n[i]?t=!0:e[i]=0;t||(p=!1)}function b(n,t,i,u,f,o){var h,s,l=[],c=i.type,a;if(!r[n])return[];for("keyup"==c&&v(n)&&(t=[n]),h=0;h<r[n].length;++h)(s=r[n][h],!u&&s.seq&&e[s.seq]!=s.level||c!=s.action||("keypress"!=c||i.metaKey||i.ctrlKey)&&t.sort().join(",")!==s.modifiers.sort().join(","))||(a=u&&s.seq==u&&s.level==o,(!u&&s.combo==f||a)&&r[n].splice(h,1),l.push(s));return l}function ut(n){var t=[];return n.shiftKey&&t.push("shift"),n.altKey&&t.push("alt"),n.ctrlKey&&t.push("ctrl"),n.metaKey&&t.push("meta"),t}function l(n,t,i,r){f.stopCallback(t,t.target||t.srcElement,i,r)||!1!==n(t,i)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function a(n){"number"!=typeof n.which&&(n.which=n.keyCode);var t=w(n);t&&("keyup"==n.type&&y===t?y=!1:f.handleKey(t,ut(n),n))}function v(n){return"shift"==n||"ctrl"==n||"alt"==n||"meta"==n}function ft(n,t,i,r){function o(t){return function(){p=t;++e[n];clearTimeout(it);it=setTimeout(c,1e3)}}function s(t){l(i,t,n);"keyup"!==r&&(y=w(t));setTimeout(c,10)}for(var f,u=e[n]=0;u<t.length;++u)f=u+1===t.length?s:o(r||k(t[u+1]).action),d(t[u],f,r,n,u)}function k(n,t){for(var i,s=[],f,e="+"===n?["+"]:n.split("+"),r=0;r<e.length;++r)i=e[r],tt[i]&&(i=tt[i]),t&&"keypress"!=t&&nt[i]&&(i=nt[i],s.push("shift")),v(i)&&s.push(i);if(e=i,r=t,!r){if(!o){o={};for(f in u)95<f&&112>f||u.hasOwnProperty(f)&&(o[u[f]]=f)}r=o[e]?"keydown":"keypress"}return"keypress"==r&&s.length&&(r="keydown"),{key:i,modifiers:s,action:r}}function d(n,t,i,u,f){s[n+":"+i]=t;n=n.replace(/\s+/g," ");var e=n.split(" ");1<e.length?ft(n,e,t,i):(i=k(n,i),r[i.key]=r[i.key]||[],b(i.key,i.modifiers,{type:i.action},u,n,f),r[i.key][u?"unshift":"push"]({callback:t,modifiers:i.modifiers,action:i.action,seq:u,level:f,combo:n}))}var u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},nt={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},tt={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},o,r={},s={},e={},it,y=!1,rt=!1,p=!1,f;for(i=1;20>i;++i)u[111+i]="f"+i;for(i=0;9>=i;++i)u[i+96]=i;h(t,"keypress",a);h(t,"keydown",a);h(t,"keyup",a);f={bind:function(n,t,i){n=n instanceof Array?n:[n];for(var r=0;r<n.length;++r)d(n[r],t,i);return this},unbind:function(n,t){return f.bind(n,function(){},t)},trigger:function(n,t){return s[n+":"+t]&&s[n+":"+t]({},n),this},reset:function(){return r={},s={},this},stopCallback:function(n,t){return-1<(" "+t.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},handleKey:function(n,t,i){var u=b(n,t,i),r,f,e;for(t={},f=0,e=!1,r=0;r<u.length;++r)u[r].seq&&(f=Math.max(f,u[r].level));for(r=0;r<u.length;++r)u[r].seq?u[r].level==f&&(e=!0,t[u[r].seq]=1,l(u[r].callback,i,u[r].combo,u[r].seq)):e||l(u[r].callback,i,u[r].combo);u="keypress"==i.type&&rt;i.type!=p||v(n)||u||c(t);rt=e&&"keydown"==i.type}};n.Mousetrap=f;"function"==typeof define&&define.amd&&define(f)}(window,document);!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n:n(jQuery)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=-1*u.detail),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=-1*u.wheelDeltaX),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=-1*e,e=0),l=0===e?s:e,"deltaY"in u&&(e=-1*u.deltaY,l=e),"deltaX"in u&&(s=u.deltaX,0===e&&(l=-1*s)),0!==e||0!==s)return 1===u.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):2===u.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),(a=Math.max(Math.abs(e),Math.abs(s)),(!t||t>a)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),function(n){n.PaginationCalculator=function(n,t){this.maxentries=n;this.opts=t};n.extend(n.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(n){var t=Math.floor(this.opts.num_display_entries/2),i=this.numPages(),r=i-this.opts.num_display_entries,u=n>t?Math.max(Math.min(n-t,r),0):0,f=n>t?Math.min(n+t+this.opts.num_display_entries%2,i):Math.min(this.opts.num_display_entries,i);return{start:u,end:f}}});n.PaginationRenderers={};n.PaginationRenderers.defaultRenderer=function(t,i){this.maxentries=t;this.opts=i;this.pc=new n.PaginationCalculator(t,i)};n.extend(n.PaginationRenderers.defaultRenderer.prototype,{createLink:function(t,i,r){var u,f=this.pc.numPages();return t=t<0?0:t<f?t:f-1,r=n.extend({text:t+1,classes:""},r||{}),u=t==i?isNaN(r.text)?n("<li class='disabled'><a>"+r.text+"<\/a><\/li>"):n("<li class='active'><a>"+r.text+"<\/a><\/li>"):n("<li><a href='"+this.opts.link_to.replace(/__id__/,t)+"'>"+r.text+"<\/a><\/li>"),r.classes&&u.addClass(r.classes),u.data("page_id",t),u},appendRange:function(n,t,i,r,u){for(var f=i;f<r;f++)this.createLink(f,t,u).appendTo(n)},getLinks:function(t,i){t=parseInt(t);var e,o,u=this.pc.getInterval(t),f=this.pc.numPages(),r=n("<ul><\/ul>");return this.opts.prev_text&&(t>0||this.opts.prev_show_always)&&r.append(this.createLink(t-1,t,{text:this.opts.prev_text,classes:"prev"})),u.start>0&&this.opts.num_edge_entries>0&&(o=Math.min(this.opts.num_edge_entries,u.start),this.appendRange(r,t,0,o,{classes:"sp"}),this.opts.num_edge_entries<u.start&&this.opts.ellipse_text&&n("<li class='disabled'><a>"+this.opts.ellipse_text+"<\/a><\/li>").appendTo(r)),this.appendRange(r,t,u.start,u.end),u.end<f&&this.opts.num_edge_entries>0&&(f-this.opts.num_edge_entries>u.end&&this.opts.ellipse_text&&n("<li class='disabled'><a>"+this.opts.ellipse_text+"<\/a><\/li>").appendTo(r),e=Math.max(f-this.opts.num_edge_entries,u.end),this.appendRange(r,t,e,f,{classes:"ep"})),this.opts.next_text&&(t<f-1||this.opts.next_show_always)&&r.append(this.createLink(t+1,t,{text:this.opts.next_text,classes:"next"})),n("li:not(.disabled, .active) a",r).click(i),r}});n.fn.pagination=function(t,i){function h(t){var r=n(t.target).parent().data("page_id"),i=u(r);return i||t.stopPropagation(),i}function u(n){r.data("current_page",n);f=o.getLinks(n,h);r.empty();f.appendTo(r);return i.callback(n,r)}var r,o,f,e,c,s;if(i=n.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"###",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",load_first_page:!1,callback:function(){return!1}},i||{}),r=this,e=i.current_page,r.data("current_page",e),t=!t||t<0?1:t,i.items_per_page=!i.items_per_page||i.items_per_page<0?1:i.items_per_page,!n.PaginationRenderers[i.renderer])throw new ReferenceError("Pagination renderer '"+i.renderer+"' was not found in jQuery.PaginationRenderers object.");o=new n.PaginationRenderers[i.renderer](t,i);c=new n.PaginationCalculator(t,i);s=c.numPages();r.off("setPage").on("setPage",{numPages:s},function(n,t){if(t>=0&&t<n.data.numPages)return u(t),!1});r.off("prevPage").on("prevPage",function(){var t=n(this).data("current_page");return t>0&&u(t-1),!1});r.off("nextPage").on("nextPage",{numPages:s},function(t){var i=n(this).data("current_page");return i<t.data.numPages-1&&u(i+1),!1});r.off("currentPage").on("currentPage",function(){var t=n(this).data("current_page");return u(t),!1});f=o.getLinks(e,h);r.empty();f.appendTo(r);i.load_first_page&&i.callback(e,r)}}(jQuery);window.NewCrm=window.NewCrm||{};NewCrm.dom={getById:function(n){return document.getElementById(n)},get:function(n){return typeof n=="string"?document.getElementById(n):n},createElementIn:function(n,t,i,r){var f=(t=NewCrm.dom.get(t)||document.body).ownerDocument.createElement(n||"div"),u;if(typeof r=="object")for(u in r)u=="class"?f.className=r[u]:u=="style"?f.style.cssText=r[u]:f[u]=r[u];return i?t.insertBefore(f,t.firstChild):t.appendChild(f),f},getStyle:function(n,t){var u;if(n=NewCrm.dom.get(n),!n||n.nodeType==9)return null;var i=document.defaultView&&document.defaultView.getComputedStyle,r=i?document.defaultView.getComputedStyle(n,""):null;switch(t){case"float":t=i?"cssFloat":"styleFloat";break;case"opacity":if(i)return parseFloat((r||n.style)[t]);u=100;try{u=n.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(f){try{u=n.filters("alpha").opacity}catch(f){}}return u/100;case"backgroundPositionX":if(i)return t="backgroundPosition",(r||n.style)[t].split(" ")[0];break;case"backgroundPositionY":if(i)return t="backgroundPosition",(r||n.style)[t].split(" ")[1]}return i?(r||n.style)[t]:n.currentStyle[t]||n.style[t]},setStyle:function(n,t,i){var r,o;if(!(n=NewCrm.dom.get(n))||n.nodeType!=1)return!1;var u,f=!0,e=(u=document.defaultView)&&u.getComputedStyle;typeof t=="string"&&(u=t,t={},t[u]=i);for(r in t)i=t[r],r=="float"?r=e?"cssFloat":"styleFloat":r=="opacity"?e||(r="filter",i=i>=1?"":"alpha(opacity="+Math.round(i*100)+")"):(r=="backgroundPositionX"||r=="backgroundPositionY")&&(u=r.slice(-1)=="X"?"Y":"X",e&&(o=NewCrm.dom.getStyle(n,"backgroundPosition"+u),r="backgroundPosition",typeof i=="number"&&(i=i+"px"),i=u=="Y"?i+" "+(o||"top"):(o||"left")+" "+i)),typeof n.style[r]!="undefined"?(n.style[r]=i+(typeof i=="number"&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(r)?"px":""),f=f&&!0):f=f&&!1;return f},getScrollTop:function(n){var t=n||document;return Math.max(t.documentElement.scrollTop,t.body.scrollTop)},getClientHeight:function(n){var t=n||document;return t.compatMode=="CSS1Compat"?t.documentElement.clientHeight:t.body.clientHeight}};NewCrm.string={RegExps:{trim:/^\s+|\s+$/g,ltrim:/^\s+/,rtrim:/\s+$/,nl2br:/\n/g,s2nb:/[\x20]{2}/g,URIencode:/[\x09\x0A\x0D\x20\x21-\x29\x2B\x2C\x2F\x3A-\x3F\x5B-\x5E\x60\x7B-\x7E]/g,escHTML:{re_amp:/&/g,re_lt:/</g,re_gt:/>/g,re_apos:/\x27/g,re_quot:/\x22/g},escString:{bsls:/\\/g,sls:/\//g,nl:/\n/g,rt:/\r/g,tab:/\t/g},restXHTML:{re_amp:/&amp;/g,re_lt:/&lt;/g,re_gt:/&gt;/g,re_apos:/&(?:apos|#0?39);/g,re_quot:/&quot;/g},write:/\{(\d{1,2})(?:\:([xodQqb]))?\}/g,isURL:/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,cut:/[\x00-\xFF]/,getRealLen:{r0:/[^\x00-\xFF]/g,r1:/[\x00-\xFF]/g},format:/\{([\d\w\.]+)\}/g},commonReplace:function(n,t,i){return n.replace(t,i)},format:function(n){var t=Array.prototype.slice.call(arguments),i;return n=String(t.shift()),t.length==1&&typeof t[0]=="object"&&(t=t[0]),NewCrm.string.RegExps.format.lastIndex=0,n.replace(NewCrm.string.RegExps.format,function(n,r){return i=NewCrm.object.route(t,r),i===undefined?n:i})}};NewCrm.object={routeRE:/([\d\w_]+)/g,route:function(n,t){n=n||{};t=String(t);var i=NewCrm.object.routeRE,r;for(i.lastIndex=0;(r=i.exec(t))!==null;)if(n=n[r[0]],n===undefined||n===null)break;return n}};ua=NewCrm.userAgent={};agent=navigator.userAgent;ua.ie=9-(agent.indexOf("Trident/5.0")>-1?0:1)-(window.XDomainRequest?0:1)-(window.XMLHttpRequest?0:1);typeof NewCrm.msgbox=="undefined"&&(NewCrm.msgbox={});NewCrm.msgbox._timer=null;NewCrm.msgbox.loadingAnimationPath=NewCrm.msgbox.loadingAnimationPath||"loading.gif";NewCrm.msgbox.show=function(n,t,i,r){typeof r=="number"&&(r={topPosition:r});r=r||{};var f=NewCrm.msgbox,u;f._loadCss&&f._loadCss(r.cssPath);u=NewCrm.dom.get("q_Msgbox")||NewCrm.dom.createElementIn("div",document.body,!1,{className:"zeng_msgbox_layer_wrap"});u.id="q_Msgbox";u.style.display="";u.innerHTML=NewCrm.string.format('<span class="zeng_msgbox_layer zeng_msgbox_layer_{layerStyle}" style="display:none;z-index:9998;" id="mode_tips_v2"><span class="gtl_ico_{type}"><\/span>{loadIcon}{msgHtml}<span class="gtl_end"><\/span><\/span>',{type:[0,0,0,0,"succ","fail","clear"][t]||"hits",msgHtml:n||"",loadIcon:t==6?'<span class="gtl_ico_loading"><\/span>':"",layerStyle:t==6?"loading":"normal"});f._setPosition(u,i,r.topPosition)};NewCrm.msgbox._setPosition=function(n,t,i){t=t||5e3;var r=NewCrm.msgbox,u=NewCrm.dom.getScrollTop(),f=NewCrm.dom.getClientHeight(),e=Math.floor(f/2)-40;NewCrm.dom.setStyle(n,"top",(document.compatMode=="BackCompat"||NewCrm.userAgent.ie<7?u:0)+(typeof i=="number"?i:e)+"px");clearTimeout(r._timer);n.firstChild.style.display="";t&&(r._timer=setTimeout(r._hide,t))};NewCrm.msgbox._hide=function(){var n=NewCrm.dom.get("q_Msgbox"),t=NewCrm.msgbox,i;clearTimeout(t._timer);n&&(i=n.firstChild,NewCrm.dom.setStyle(n,"display","none"))};typeof define=="function"?module.exports=NewCrm:window.NewCrm=NewCrm;NewCrm.msgbox.info=function(n,t){NewCrm.msgbox.show(n,1,t||2e3)};NewCrm.msgbox.success=function(n,t){NewCrm.msgbox.show(n,4,t||2e3)};NewCrm.msgbox.fail=function(n,t){NewCrm.msgbox.show(n||"出现未知错误，请重试",5,t||2e3)};NewCrm.msgbox.loading=function(n){NewCrm.msgbox.show(n,6,1e4)};NewCrm.msgbox.close=function(){NewCrm.msgbox._hide()},function(){var n={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},i="webkit moz o ms khtml".split(" "),t,r;if(typeof document.cancelFullScreen!="undefined")n.supportsFullScreen=!0;else for(t=0,r=i.length;t<r;t++)if(n.prefix=i[t],typeof document[n.prefix+"CancelFullScreen"]!="undefined"){n.supportsFullScreen=!0;break}n.supportsFullScreen&&(n.fullScreenEventName=n.prefix+"fullscreenchange",n.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},n.requestFullScreen=function(n){return this.prefix===""?n.requestFullScreen():n[this.prefix+"RequestFullScreen"]()},n.cancelFullScreen=function(){return this.prefix===""?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});typeof jQuery!="undefined"&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){n.supportsFullScreen&&n.requestFullScreen(this)})});window.fullScreenApi=n}();!function(){function l(n){return n.replace(k,"").replace(d,",").replace(g,"").replace(nt,"").replace(tt,"").split(it)}function h(n){return"'"+n.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(n,i){function v(n){return e+=n.split(/\n/).length-1,it&&(n=n.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),n&&(n=r[1]+h(n)+r[2]+"\n"),n}function g(n){var h=e,s,u;return(y?n=y(n,i):f&&(n=n.replace(/\n/g,function(){return e++,"$line="+e+";"})),0===n.indexOf("="))&&(s=rt&&!/^=[=#]/.test(n),(n=n.replace(/^=[=#]?|[\s;]*$/g,""),s)?(u=n.replace(/\s*\([^\)]+\)/,""),t[u]||/^(include|print)$/.test(u)||(n="$escape("+n+")")):n="$string("+n+")",n=r[1]+n+r[2]),f&&(n="$line="+h+";"+n),c(l(n),function(n){if(n&&!p[n]){var i;i="print"===n?ut:"include"===n?ft:t[n]?"$utils."+n:o[n]?"$helpers."+n:"$data."+n;k+=n+"="+i+",";p[n]=!0}}),n+"\n"}var f=i.debug,nt=i.openTag,tt=i.closeTag,y=i.parser,it=i.compress,rt=i.escape,e=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},w="".trim,r=w?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],b=w?"$out+=text;return $out;":"$out.push(text);",ut="function(){var text=''.concat.apply('',arguments);"+b+"}",ft="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+b+"}",k="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(f?"$line=0,":""),s=r[0],et="return new String("+r[3]+");",u,a;c(n.split(nt),function(n){n=n.split(tt);var t=n[0],i=n[1];1===n.length?s+=v(t):(s+=g(t),i&&(s+=v(i)))});u=k+s+et;f&&(u="try{"+u+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+h(n)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{return a=new Function("$data","$filename",u),a.prototype=t,a}catch(d){throw d.temp="function anonymous($data,$filename) {"+u+"}",d;}}var n=function(n,t){return"string"==typeof t?u(t,{filename:n}):f(n,t)},i,r,f,o;n.version="3.0.0";n.config=function(n,t){i[n]=t};i=n.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null};r=n.cache={};n.render=function(n,t){return u(n,t)};f=n.renderFile=function(t,i){var r=n.get(t)||s({filename:t,name:"Render Error",message:"Template not found"});return i?r(i):r};n.get=function(n){var i,t,f;return r[n]?i=r[n]:"object"==typeof document&&(t=document.getElementById(n),t&&(f=(t.value||t.innerHTML).replace(/^\s*|\s*$/g,""),i=u(f,{filename:n}))),i};var e=function(n,t){return"string"!=typeof n&&(t=typeof n,"number"===t?n+="":n="function"===t?e(n.call(n)):""),n},v={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},y=function(n){return v[n]},p=function(n){return e(n).replace(/&(?![\w#]+;)|[<>"']/g,y)},w=Array.isArray||function(n){return"[object Array]"==={}.toString.call(n)},b=function(n,t){var i,r;if(w(n))for(i=0,r=n.length;r>i;i++)t.call(n,n[i],i,n);else for(i in n)t.call(n,n[i],i)},t=n.utils={$helpers:{},$include:f,$string:e,$escape:p,$each:b};n.helper=function(n,t){o[n]=t};o=n.helpers=t.$helpers;n.onerror=function(n){var t="Template Error\n\n";for(var i in n)t+="<"+i+">\n"+n[i]+"\n\n";"object"==typeof console&&console.error(t)};var s=function(t){return n.onerror(t),function(){return"{Template Error}"}},u=n.compile=function(n,t){function e(i){try{return new h(i,f)+""}catch(r){return t.debug?s(r)():(t.debug=!0,u(n,t)(i))}}var o,f,h;t=t||{};for(o in i)void 0===t[o]&&(t[o]=i[o]);f=t.filename;try{h=a(n,t)}catch(c){return c.filename=f||"anonymous",c.name="Syntax Error",s(c)}return e.prototype=h.prototype,e.toString=function(){return h.toString()},f&&t.cache&&(r[f]=e),e},c=t.$each,k=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,d=/[^\w$]+/g,g=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),nt=/^\d[^,]*|,\d[^,]*/g,tt=/^,+|,+$/g,it=/^$|,+/;"function"==typeof define?define(function(){return n}):"undefined"!=typeof exports?module.exports=n:this.template=n}(),function(){for(var n,u=function(){},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=t.length,r=window.console=window.console||{};i--;)n=t[i],r[n]||(r[n]=u)}();!function(n){n(function(){n.support.transition=function(){var n=function(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return n[t]}();return n&&{end:n}}()})}(window.jQuery);!function(n){var t=function(t,i){this.options=i;this.$element=n(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",n.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)},i;t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=n.Event("show");(this.$element.trigger(i),this.isShown||i.isDefaultPrevented())||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=n.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body);t.$element.show();i&&t.$element[0].offsetWidth;t.$element.addClass("in").attr("aria-hidden",!1);t.enforceFocus();i?t.$element.one(n.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();var i=this;(t=n.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented())&&(this.isShown=!1,this.escape(),n(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),n.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;n(document).on("focusin.modal",function(n){t.$element[0]===n.target||t.$element.has(n.target).length||t.$element.focus()})},escape:function(){var n=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&n.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(n.support.transition.end);t.hideModal()},500);this.$element.one(n.support.transition.end,function(){clearTimeout(i);t.hideModal()})},hideModal:function(){var n=this;this.$element.hide();this.backdrop(function(){n.removeBackdrop();n.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(t){var u=this,r=this.$element.hasClass("fade")?"fade":"",i;if(this.isShown&&this.options.backdrop){if(i=n.support.transition&&r,this.$backdrop=n('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?n.proxy(this.$element[0].focus,this.$element[0]):n.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(n.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(n.support.transition.end,t):t()):t&&t()}};i=n.fn.modal;n.fn.modal=function(i){return this.each(function(){var u=n(this),r=u.data("modal"),f=n.extend({},n.fn.modal.defaults,u.data(),typeof i=="object"&&i);r||u.data("modal",r=new t(this,f));typeof i=="string"?r[i]():f.show&&r.show()})};n.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=i,this};n(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=n(this),r=i.attr("href"),u=n(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),f=u.data("modal")?"toggle":n.extend({remote:!/#/.test(r)&&r},u.data(),i.data());t.preventDefault();u.modal(f).one("hide",function(){i.focus()})})}(window.jQuery);!function(n){function r(){n(".dropdown-backdrop").remove();n(i).each(function(){u(n(this)).removeClass("open")})}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length||(r=t.parent()),r}var i="[data-toggle=dropdown]",t=function(t){var i=n(t).on("click.dropdown.data-api",this.toggle);n("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})},f;t.prototype={constructor:t,toggle:function(){var t=n(this),i,f;if(!t.is(".disabled, :disabled"))return i=u(t),f=i.hasClass("open"),r(),f||("ontouchstart"in document.documentElement&&n('<div class="dropdown-backdrop"/>').insertBefore(n(this)).on("click",r),i.toggleClass("open")),t.focus(),!1},keydown:function(t){var e,f,o,s,r;if(/(38|40|27)/.test(t.keyCode)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s||s&&t.keyCode==27)return t.which==27&&o.find(i).focus(),e.click();(f=n("[role=menu] li:not(.divider):visible a",o),f.length)&&(r=f.index(f.filter(":focus")),t.keyCode==38&&r>0&&r--,t.keyCode==40&&r<f.length-1&&r++,~r||(r=0),f.eq(r).focus())}}};f=n.fn.dropdown;n.fn.dropdown=function(i){return this.each(function(){var r=n(this),u=r.data("dropdown");u||r.data("dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})};n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.dropdown.data-api",i,t.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",t.prototype.keydown)}(window.jQuery);!function(n){function t(t,i){var u=n.proxy(this.process,this),f=n(t).is("body")?n(window):n(t),r;this.options=n.extend({},n.fn.scrollspy.defaults,i);this.$scrollElement=f.on("scroll.scroll-spy.data-api",u);this.selector=(this.options.target||(r=n(t).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=n("body");this.refresh();this.process()}t.prototype={constructor:t,refresh:function(){var t=this,i;this.offsets=n([]);this.targets=n([]);i=this.$body.find(this.selector).map(function(){var u=n(this),i=u.data("target")||u.attr("href"),r=/^#\w/.test(i)&&n(i);return r&&r.length&&[[r.position().top+(!n.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),i]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})},process:function(){var i=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,e=f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget,n;if(i>=e)return u!=(n=r.last()[0])&&this.activate(n);for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(!t[n+1]||i<=t[n+1])&&this.activate(r[n])},activate:function(t){var i,r;this.activeTarget=t;n(this.selector).parent(".active").removeClass("active");r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]';i=n(r).parent("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate")}};var i=n.fn.scrollspy;n.fn.scrollspy=function(i){return this.each(function(){var u=n(this),r=u.data("scrollspy"),f=typeof i=="object"&&i;r||u.data("scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.scrollspy.Constructor=t;n.fn.scrollspy.defaults={offset:10};n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=i,this};n(window).on("load",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);t.scrollspy(t.data())})})}(window.jQuery);!function(n){var t=function(t){this.element=n(t)},i;t.prototype={constructor:t,show:function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.attr("data-target"),r,u,f;(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active"))||(r=e.find(".active:last a")[0],f=n.Event("show",{relatedTarget:r}),t.trigger(f),f.isDefaultPrevented())||(u=n(i),this.activate(t.parent("li"),e),this.activate(u,u.parent(),function(){t.trigger({type:"shown",relatedTarget:r})}))},activate:function(t,i,r){function f(){u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");t.addClass("active");e?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade");t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active");r&&r()}var u=i.find("> .active"),e=r&&n.support.transition&&u.hasClass("fade");e?u.one(n.support.transition.end,f):f();u.removeClass("in")}};i=n.fn.tab;n.fn.tab=function(i){return this.each(function(){var u=n(this),r=u.data("tab");r||u.data("tab",r=new t(this));typeof i=="string"&&r[i]()})};n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=i,this};n(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault();n(this).tab("show")})}(window.jQuery);!function(n){var t=function(n,t){this.init("tooltip",n,t)},i;t.prototype={constructor:t,init:function(t,i,r){var o,s,f,u,e;for(this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.enabled=!0,f=this.options.trigger.split(" "),e=f.length;e--;)u=f[e],u=="click"?this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this)):u!="manual"&&(o=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this)));this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=n.extend({},n.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var u=n.fn[this.type].defaults,r={},i;if(this._options&&n.each(this._options,function(n,t){u[n]!=t&&(r[n]=t)},this),i=n(t.currentTarget)[this.type](r).data(this.type),!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout);i.hoverState="in";this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var i=n(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!i.options.delay||!i.options.delay.hide)return i.hide();i.hoverState="out";this.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)},show:function(){var i,t,u,f,e,r,o=n.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;i=this.tip();this.setContent();this.options.animation&&i.addClass("fade");e=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement;i.detach().css({top:0,left:0,display:"block"});this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);t=this.getPosition();u=i[0].offsetWidth;f=i[0].offsetHeight;switch(e){case"bottom":r={top:t.top+t.height,left:t.left+t.width/2-u/2};break;case"top":r={top:t.top-f,left:t.left+t.width/2-u/2};break;case"left":r={top:t.top+t.height/2-f/2,left:t.left-u};break;case"right":r={top:t.top+t.height/2-f/2,left:t.left+t.width}}this.applyPlacement(r,e);this.$element.trigger("shown")}},applyPlacement:function(n,t){var i=this.tip(),s=i[0].offsetWidth,f=i[0].offsetHeight,u,r,e,o;i.offset(n).addClass(t).addClass("in");u=i[0].offsetWidth;r=i[0].offsetHeight;t=="top"&&r!=f&&(n.top=n.top+f-r,o=!0);t=="bottom"||t=="top"?(e=0,n.left<0&&(e=n.left*-2,n.left=0,i.offset(n),u=i[0].offsetWidth,r=i[0].offsetHeight),this.replaceArrow(e-s+u,u,"left")):this.replaceArrow(r-f,r,"top");o&&i.offset(n)},replaceArrow:function(n,t,i){this.arrow().css(i,n?50*(1-n/t)+"%":"")},setContent:function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")},hide:function(){function r(){var i=setTimeout(function(){t.off(n.support.transition.end).detach()},500);t.one(n.support.transition.end,function(){clearTimeout(i);t.detach()})}var u=this,t=this.tip(),i=n.Event("hide");if(this.$element.trigger(i),!i.isDefaultPrevented())return t.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?r():t.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return n.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var t,i=this.$element,n=this.options;return t=i.attr("data-original-title")||(typeof n.title=="function"?n.title.call(i[0]):n.title),t},tip:function(){return this.$tip=this.$tip||n(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?n(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};i=n.fn.tooltip;n.fn.tooltip=function(i){return this.each(function(){var u=n(this),r=u.data("tooltip"),f=typeof i=="object"&&i;r||u.data("tooltip",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.tooltip.Constructor=t;n.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(window.jQuery);!function(n){var t=function(n,t){this.init("popover",n,t)},i;t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var n=this.tip(),t=this.getTitle(),i=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](t);n.find(".popover-content")[this.options.html?"html":"text"](i);n.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,i=this.$element,n=this.options;return t=(typeof n.content=="function"?n.content.call(i[0]):n.content)||i.attr("data-content"),t},tip:function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});i=n.fn.popover;n.fn.popover=function(i){return this.each(function(){var u=n(this),r=u.data("popover"),f=typeof i=="object"&&i;r||u.data("popover",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.popover.Constructor=t;n.fn.popover.defaults=n.extend({},n.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(window.jQuery);!function(n){var t=function(t,i){this.options=n.extend({},n.fn.affix.defaults,i);this.$window=n(window).on("scroll.affix.data-api",n.proxy(this.checkPosition,this)).on("click.affix.data-api",n.proxy(function(){setTimeout(n.proxy(this.checkPosition,this),1)},this));this.$element=n(t);this.checkPosition()},i;t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var o=n(document).height(),f=this.$window.scrollTop(),e=this.$element.offset(),t=this.options.offset,r=t.bottom,u=t.top,i;(typeof t!="object"&&(r=u=t),typeof u=="function"&&(u=t.top()),typeof r=="function"&&(r=t.bottom()),i=this.unpin!=null&&f+this.unpin<=e.top?!1:r!=null&&e.top+this.$element.height()>=o-r?"bottom":u!=null&&f<=u?"top":!1,this.affixed!==i)&&(this.affixed=i,this.unpin=i=="bottom"?e.top-f:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(i?"-"+i:"")))}};i=n.fn.affix;n.fn.affix=function(i){return this.each(function(){var u=n(this),r=u.data("affix"),f=typeof i=="object"&&i;r||u.data("affix",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.affix.Constructor=t;n.fn.affix.defaults={offset:0};n.fn.affix.noConflict=function(){return n.fn.affix=i,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var i=n(this),t=i.data();t.offset=t.offset||{};t.offsetBottom&&(t.offset.bottom=t.offsetBottom);t.offsetTop&&(t.offset.top=t.offsetTop);i.affix(t)})})}(window.jQuery);!function(n){var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.prototype.close=function(t){function f(){i.trigger("closed").remove()}var u=n(this),r=u.attr("data-target"),i;(r||(r=u.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=n(r),t&&t.preventDefault(),i.length||(i=u.hasClass("alert")?u:u.parent()),i.trigger(t=n.Event("close")),t.isDefaultPrevented())||(i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.on(n.support.transition.end,f):f())};r=n.fn.alert;n.fn.alert=function(i){return this.each(function(){var r=n(this),u=r.data("alert");u||r.data("alert",u=new t(this));typeof i=="string"&&u[i].call(r)})};n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.alert.data-api",i,t.prototype.close)}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.button.defaults,i)},i;t.prototype.setState=function(n){var i="disabled",t=this.$element,r=t.data(),u=t.is("input")?"val":"html";n+="Text";r.resetText||t.data("resetText",t[u]());t[u](r[n]||this.options[n]);setTimeout(function(){n=="loadingText"?t.addClass(i).attr(i,i):t.removeClass(i).removeAttr(i)},0)};t.prototype.toggle=function(){var n=this.$element.closest('[data-toggle="buttons-radio"]');n&&n.find(".active").removeClass("active");this.$element.toggleClass("active")};i=n.fn.button;n.fn.button=function(i){return this.each(function(){var u=n(this),r=u.data("button"),f=typeof i=="object"&&i;r||u.data("button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})};n.fn.button.defaults={loadingText:"loading..."};n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=i,this};n(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=n(t.target);i.hasClass("btn")||(i=i.closest(".btn"));i.button("toggle")})}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.collapse.defaults,i);this.options.parent&&(this.$parent=n(this.options.parent));this.options.toggle&&this.toggle()},i;t.prototype={constructor:t,dimension:function(){var n=this.$element.hasClass("width");return n?"width":"height"},show:function(){var i,u,t,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(i=this.dimension(),u=n.camelCase(["scroll",i].join("-")),t=this.$parent&&this.$parent.find("> .accordion-group > .in"),t&&t.length){if(r=t.data("collapse"),r&&r.transitioning)return;t.collapse("hide");r||t.data("collapse",null)}this.$element[i](0);this.transition("addClass",n.Event("show"),"shown");n.support.transition&&this.$element[i](this.$element[0][u])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",n.Event("hide"),"hidden"),this.$element[t](0))},reset:function(n){var t=this.dimension();return this.$element.removeClass("collapse")[t](n||"auto")[0].offsetWidth,this.$element[n!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,r){var u=this,f=function(){i.type=="show"&&u.reset();u.transitioning=0;u.$element.trigger(r)};(this.$element.trigger(i),i.isDefaultPrevented())||(this.transitioning=1,this.$element[t]("in"),n.support.transition&&this.$element.hasClass("collapse")?this.$element.one(n.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};i=n.fn.collapse;n.fn.collapse=function(i){return this.each(function(){var r=n(this),u=r.data("collapse"),f=n.extend({},n.fn.collapse.defaults,r.data(),typeof i=="object"&&i);u||r.data("collapse",u=new t(this,f));typeof i=="string"&&u[i]()})};n.fn.collapse.defaults={toggle:!0};n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=i,this};n(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i=n(this),u,r=i.attr("data-target")||t.preventDefault()||(u=i.attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,""),f=n(r).data("collapse")?"toggle":i.data();i[n(r).hasClass("in")?"addClass":"removeClass"]("collapsed");n(r).collapse(f)})}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.options.pause=="hover"&&this.$element.on("mouseenter",n.proxy(this.pause,this)).on("mouseleave",n.proxy(this.cycle,this))},i;t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),r=this;if(!(t>this.$items.length-1)&&!(t<0))return this.sliding?this.$element.one("slid",function(){r.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",n(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition.end&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,i){var e=this.$element.find(".item.active"),r=i||e[t](),s=this.interval,u=t=="next"?"left":"right",h=t=="next"?"first":"last",o=this,f;if(this.sliding=!0,s&&this.pause(),r=r.length?r:this.$element.find(".item")[h](),f=n.Event("slide",{relatedTarget:r[0],direction:u}),!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=n(o.$indicators.children()[o.getActiveIndex()]);t&&t.addClass("active")})),n.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(f),f.isDefaultPrevented())return;r.addClass(t);r[0].offsetWidth;e.addClass(u);r.addClass(u);this.$element.one(n.support.transition.end,function(){r.removeClass([t,u].join(" ")).addClass("active");e.removeClass(["active",u].join(" "));o.sliding=!1;setTimeout(function(){o.$element.trigger("slid")},0)})}else{if(this.$element.trigger(f),f.isDefaultPrevented())return;e.removeClass("active");r.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return s&&this.cycle(),this}}};i=n.fn.carousel;n.fn.carousel=function(i){return this.each(function(){var f=n(this),r=f.data("carousel"),u=n.extend({},n.fn.carousel.defaults,typeof i=="object"&&i),e=typeof i=="string"?i:u.slide;r||f.data("carousel",r=new t(this,u));typeof i=="number"?r.to(i):e?r[e]():u.interval&&r.pause().cycle()})};n.fn.carousel.defaults={interval:5e3,pause:"hover"};n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=i,this};n(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i=n(this),u,r=n(i.attr("data-target")||(u=i.attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,"")),e=n.extend({},r.data(),i.data()),f;r.carousel(e);(f=i.attr("data-slide-to"))&&r.data("carousel").pause().to(f).cycle();t.preventDefault()})}(window.jQuery);!function(n){var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=n(this.options.menu);this.shown=!1;this.listen()},i;t.prototype={constructor:t,select:function(){var n=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(n)).change(),this.hide()},updater:function(n){return n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=n.isFunction(this.source)?this.source(this.query,n.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return t=n.grep(t,function(n){return i.matcher(n)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var i=[],r=[],u=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):u.push(t):i.push(t);return i.concat(r,u)},highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).attr("data-value",r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},listen:function(){this.$element.on("focus",n.proxy(this.focus,this)).on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));this.eventSupported("keydown")&&this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this)).on("mouseleave","li",n.proxy(this.mouseleave,this))},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.stopPropagation();n.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation();n.preventDefault();this.select();this.$element.focus()},mouseenter:function(t){this.mousedover=!0;this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};i=n.fn.typeahead;n.fn.typeahead=function(i){return this.each(function(){var u=n(this),r=u.data("typeahead"),f=typeof i=="object"&&i;r||u.data("typeahead",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>',minLength:1};n.fn.typeahead.Constructor=t;n.fn.typeahead.noConflict=function(){return n.fn.typeahead=i,this};n(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=n(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery);!function(){function ii(n){return function(){return n}}function gi(n){var t="Array"===n&&u.isArray||function(t,i){return(i||bt.call(t))==="[object "+n+"]"};return vf[n]=t}function ou(n,t){function i(i){return k(i)?bt.call(i)==="[object "+t+"]":typeof i===n}return vf[t]=i}function su(t){t.SugarMethods||(ci(t,"SugarMethods",{}),n(t,!1,!0,{extend:function(i,r,u){n(t,!1!==u,r,i)},sugarRestore:function(){return yf(this,t,arguments,function(n,t,i){ci(n,t,i.method)})},sugarRevert:function(){return yf(this,t,arguments,function(n,t,i){i.existed?ci(n,t,i.original):delete n[t]})}}))}function n(n,t,i,r){var u=t?n.prototype:n;su(n);d(r,function(r,f){var e=u[r],o=st(u,r);y(i)&&e&&(f=fo(e,f,i));!1===i&&e||ci(u,r,f);n.SugarMethods[r]={method:f,existed:o,original:e,instance:t}})}function ot(t,i,r,u,f){var e={};u=s(u)?u.split(","):u;u.forEach(function(n,t){f(e,n,t)});n(t,i,r,e)}function yf(n,t,i,r){var f=0===i.length,e=l(i),u=!1;return d(t.SugarMethods,function(t,i){(f||-1!==e.indexOf(t))&&(u=!0,r(i.instance?n.prototype:n,t,i))}),u}function fo(n,t,i){return function(){return i.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)}}function ci(n,t,i){uo?e.defineProperty(n,t,{value:i,configurable:!0,enumerable:!1,writable:!0}):n[t]=i}function l(n,t,i){var r,u=[];for(i=i||0,r=n.length;r>i;i++)u.push(n[i]),t&&t.call(n,n[i],i);return u}function nr(n,t,i){var r=n[i||0];ft(r)&&(n=r,i=0);l(n,t,i)}function li(n){if(!n||!n.call)throw new TypeError("Callback is not callable");}function tt(n){return void 0!==n}function r(n){return void 0===n}function st(n,t){return!!n&&es.call(n,t)}function k(n){return!!n&&("object"==typeof n||os&&nt(n))}function tr(n){var t=typeof n;return null==n||"string"===t||"number"===t||"boolean"===t}function ri(n,t){t=t||bt.call(n);try{if(n&&n.constructor&&!st(n,"constructor")&&!st(n.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!!n&&"[object Object]"===t&&"hasOwnProperty"in n}function d(n,t){for(var i in n)if(st(n,i)&&!1===t.call(n,i,n[i],n))break}function hu(n,t){for(var i=0;n>i;i++)t(i)}function ai(n,t){return d(t,function(i){n[i]=t[i]}),n}function ir(n){if(tr(n)&&(n=e(n)),ss&&s(n))for(var t,i=n,r=0;t=i.charAt(r);)i[r++]=t;return n}function ht(n){ai(this,ir(n))}function rr(n,t,i){var r=bi(10,rt(t||0));return i=i||at,0>t&&(r=1/r),i(n*r)/r}function ur(){return"\t\n\x0b\f\r   ᠎             \u2028\u2029　﻿"}function fr(n,t){var i="";for(n=n.toString();t>0;)1&t&&(i+=n),(t>>=1)&&(n+=n);return i}function cu(n,t){var i,r;return i=n.replace(no,function(n){return n=ni[n],n===hi&&(r=!0),n}),r?parseFloat(i):parseInt(i,t||10)}function v(n,t,i,r){return r=rt(n).toString(r||10),r=fr("0",t-r.replace(/\.\d+/,"").length)+r,(i||0>n)&&(r=(0>n?"-":"+")+r),r}function pf(n){if(n>=11&&13>=n)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function vi(n,t){function i(n,i){(n||-1<t.indexOf(i))&&(r+=i)}var r="";return t=t||"",i(n.multiline,"m"),i(n.ignoreCase,"i"),i(n.global,"g"),i(n.u,"y"),r}function kt(n){return s(n)||(n=o(n)),n.replace(/([\\\/\'*+?|()\[\]{}.^$])/g,"\\$1")}function t(n,t){return n["get"+(n._utc?"UTC":"")+t]()}function ui(n,t,i){return n["set"+(n._utc&&"ISOWeek"!=t?"UTC":"")+t](i)}function yi(n,t){var r,u,f,s,h,i,c,l=typeof n;if("string"===l)return n;if(f=bt.call(n),r=ri(n,f),u=ft(n,f),null!=n&&r||u){if(t||(t=[]),1<t.length)for(i=t.length;i--;)if(t[i]===n)return"CYC";for(t.push(n),r=n.valueOf()+o(n.constructor),s=u?n:e.keys(n).sort(),i=0,c=s.length;c>i;i++)h=u?i:s[i],r+=h+yi(n[h],t);t.pop()}else r=-1/0==1/n?"-0":o(n&&n.valueOf?n.valueOf():n);return l+f+r}function wf(n,t){return n===t?0!==n||1/n==1/t:er(n)&&er(t)?yi(n)===yi(t):!1}function er(n){var t=bt.call(n);return hs.test(t)||ri(n,t)}function bf(n,t,i){var r,f=n.length,e=t.length,u=!1!==t[e-1];return e>(u?1:2)?(r=[],l(t,function(t){return cs(t)?!1:(r.push(kf(n,f,t,u,i)),void 0)}),r):kf(n,f,t[0],u,i)}function kf(n,t,i,r,u){return r&&(i%=t,0>i&&(i=t+i)),u?n.charAt(i):n[i]}function or(n,t){ot(t,!0,!1,n,function(n,t){n[t+("equal"===t?"s":"")]=function(){return e[t].apply(null,[this].concat(l(arguments)))}})}function df(n,t,i,r){var f=n.length,u=-1==r,e=u?f-1:0;for(i=isNaN(i)?e:parseInt(i>>0),0>i&&(i=f+i),(!u&&0>i||u&&i>=f)&&(i=e);u&&i>=0||!u&&f>i;){if(n[i]===t)return i;i+=r}return-1}function gf(n,t,i,r){var e=n.length,u=0,f=tt(i);if(li(t),0==e&&!f)throw new TypeError("Reduce called on empty array with no initial value");for(f||(i=n[r?e-1:u],u++);e>u;)f=r?e-u-1:u,f in n&&(i=t(i,n[f],f,n)),u++;return i}function sr(n){if(0===n.length)throw new TypeError("First argument must be defined");}function eo(n){return n=h(n),function(t){return n.test(t)}}function oo(n){var t=n.getTime();return function(n){return!(!n||!n.getTime)&&n.getTime()===t}}function so(n){return function(t,i,r){return t===n||n.call(this,t,i,r)}}function ho(n){return function(t,i,r){return t===n||n.call(r,i,t,r)}}function co(n,t){var i={};return function(r,u,f){var e;if(!k(r))return!1;for(e in n)if(i[e]=i[e]||fi(n[e],t),!1===i[e].call(f,r[e],u,f))return!1;return!0}}function lo(n){return function(t){return t===n||wf(t,n)}}function fi(n,t){if(!tr(n)){if(nt(n))return eo(n);if(et(n))return oo(n);if(y(n))return t?ho(n):so(n);if(ri(n))return co(n,t)}return lo(n)}function yt(n,t,i,r){return t?t.apply?t.apply(i,r||[]):y(n[t])?n[t].call(n):n[t]:n}function ct(n,t,i,r){var u=+n.length;for(0>i&&(i=n.length+i),i=isNaN(i)?0:i,!0===r&&(u+=i);u>i;){if(r=i%n.length,!(r in n)){ao(n,t,i);break}if(!1===t.call(n,n[r],r,n))break;i++}}function ao(n,t,i){var r,u=[];for(r in n)r in n&&r>>>0==r&&4294967295!=r&&r>=i&&u.push(parseInt(r));u.sort().each(function(i){return t.call(n,n[i],i,n)})}function hr(n,t,i,r,u,f){var e,o,s;return 0<n.length&&(s=fi(t),ct(n,function(t,i){if(s.call(f,t,i,n))return(e=t,o=i,!1)},i,r)),u?o:e}function ne(n,t){var i,r=[],u={};return ct(n,function(f,e){i=t?yt(f,t,n,[f,e,n]):f;re(u,i)||r.push(f)}),r}function te(n,t,i){var u=[],r={};return t.each(function(n){re(r,n)}),n.each(function(n){var f,t=yi(n),e=!er(n);if(ie(r,t,n,e)!==i){if(f=0,e)for(t=r[t];f<t.length;)t[f]===n?t.splice(f,1):f+=1;else delete r[t];u.push(n)}}),u}function lu(n,t,i){t=t||1/0;i=i||0;var r=[];return ct(n,function(n){ft(n)&&t>i?r=r.concat(lu(n,t,i+1)):r.push(n)}),r}function au(n){var t=[];return l(n,function(n){t=t.concat(n)}),t}function ie(n,t,i,r){var u=t in n;return r&&(n[t]||(n[t]=[]),u=-1!==n[t].indexOf(i)),u}function re(n,t){var i=yi(t),r=!er(t),u=ie(n,i,t,r);return r?n[i].push(t):n[i]=t,u}function cr(n,t,i,f){var h,s,e,o=[],l="max"===i,a="min"===i,c=u.isArray(n);for(h in n)if(n.hasOwnProperty(h)){if(i=n[h],e=yt(i,t,n,c?[i,parseInt(h),n]:[]),r(e))throw new TypeError("Cannot compare with undefined");e===s?o.push(i):(r(s)||l&&e>s||a&&s>e)&&(o=[i],s=e)}return c||(o=lu(o,1)),f?o:o[0]}function ue(n,t){var e,o,f=0,s=0,i=u[to],r=u[nf],h=u[tf],c=u[gu],l=u[rf];n=fe(n,i,r);t=fe(t,i,r);do i=n.charAt(f),e=h[i]||i,i=t.charAt(f),o=h[i]||i,i=e?c.indexOf(e):null,r=o?c.indexOf(o):null,-1===i||-1===r?(i=n.charCodeAt(f)||null,r=t.charCodeAt(f)||null,l&&(i>=kr&&bu>=i||i>=dr&&ku>=i)&&(r>=kr&&bu>=r||r>=dr&&ku>=r)&&(i=cu(n.slice(f)),r=cu(t.slice(f)))):(e=e!==n.charAt(f),o=o!==t.charAt(f),e!==o&&0===s&&(s=e-o)),f+=1;while(null!=i&&null!=r&&i===r);return i===r?s:i-r}function fe(n,t,i){return s(n)||(n=o(n)),i&&(n=n.toLowerCase()),t&&(n=n.replace(t,"")),n}function ee(n,t){ot(e,!1,!0,n,function(n,i){n[i]=function(n,r,f){var o,s=e.keys(ir(n));return t||(o=fi(r,!0)),f=u.prototype[i].call(s,function(i){var u=n[i];return t?yt(u,r,n,[i,u,n]):o(u,i,n)},f),ft(f)&&(f=f.reduce(function(t,i){return t[i]=n[i],t},{})),f}});or(n,ht)}function oe(n){ai(this,n);this.g=ru.concat()}function se(n,t,i){var e,r,u=t[0],f=t[1],o=t[2];return t=n[i]||n.relative,y(t)?t.call(n,u,f,o,i):(r=n.units[8*(n.plural&&u>1?1:0)+f]||n.units[f],n.capitalizeUnit&&(r=ei(r)),e=n.modifiers.filter(function(n){return"sign"==n.name&&n.value==(o>0?1:-1)})[0],t.replace(/\{(.*?)\}/g,function(n,t){switch(t){case"num":return u;case"unit":return r;case"sign":return e.src}}))}function vo(n,t){return t=t||n.code,"en"===t||"en-US"===t?!0:n.variant}function yo(n,t){return t.replace(h(n.num,"g"),function(t){return he(n,t)||""})}function he(n,t){var i;return c(t)?t:t&&-1!==(i=n.numbers.indexOf(t))?(i+1)%10:1}function g(n,t){var i;if(s(n)||(n=""),i=fu[n]||fu[n.slice(0,2)],!1===t&&!i)throw new TypeError("Invalid locale.");return i||nu}function po(n,t){function o(n){var t=i[n];s(t)?i[n]=t.split(","):t||(i[n]=[])}function h(n,t){n=n.split("+").map(function(n){return n.replace(/(.+):(.+)$/,function(n,t,i){return i.split("|").map(function(n){return t+n}).join("|")})}).join("|");n.split("|").forEach(t)}function r(n,t,r){var u=[];i[n].forEach(function(n,i){t&&(n+="+"+n.slice(0,3));h(n,function(n,t){u[t*r+i]=n.toLowerCase()})});i[n]=u}function u(n,t,r){return n="\\d{"+n+","+t+"}",r&&(n+="|(?:"+pi(i.numbers)+")+"),n}function f(n,t){i[n]=i[n]||t}var i,e;return i=new oe(t),o("modifiers"),"months weekdays units numbers articles tokens timeMarker ampm timeSuffixes dateParse timeParse".split(" ").forEach(o),e=!i.monthSuffix,r("months",e,12),r("weekdays",e,7),r("units",!1,8),r("numbers",!1,10),f("code",n),f("date",u(1,2,i.digitDate)),f("year","'\\d{2}|"+u(4,4)),f("num",function(){var n=["-?\\d+"].concat(i.articles);return i.numbers&&(n=n.concat(i.numbers)),pi(n)}()),function(){var n=[];i.i={};i.modifiers.push({name:"day",src:"yesterday",value:-1});i.modifiers.push({name:"day",src:"today",value:0});i.modifiers.push({name:"day",src:"tomorrow",value:1});i.modifiers.forEach(function(t){var r=t.name;h(t.src,function(u){var f=i[r];i.i[u]=t;n.push({name:r,src:u,value:t.value});i[r]=f?f+"|"+u:u})});i.day+="|"+pi(i.weekdays);i.modifiers=n}(),i.monthSuffix&&(i.month=u(1,2),i.months="1 2 3 4 5 6 7 8 9 10 11 12".split(" ").map(function(n){return n+i.monthSuffix})),i.full_month=u(1,2)+"|"+pi(i.months),0<i.timeSuffixes.length&&i.addFormat(yu(i),!1,di),i.addFormat("{day}",!0),i.addFormat("{month}"+(i.monthSuffix||"")),i.addFormat("{year}"+(i.yearSuffix||"")),i.timeParse.forEach(function(n){i.addFormat(n,!0)}),i.dateParse.forEach(function(n){i.addFormat(n)}),fu[n]=i}function lr(n,t,i,r){n.g.unshift({r:r,locale:n,q:h("^"+t+"$","i"),to:i})}function ei(n){return n.slice(0,1).toUpperCase()+n.slice(1)}function pi(n){return n.filter(function(n){return!!n}).join("|")}function dt(){var n=i.SugarNewDate;return n?n():new i}function ar(n,t){var i;return k(n[0])?n:c(n[0])&&!c(n[1])?[n[0]]:s(n[0])&&t?[wo(n[0]),n[1]]:(i={},sf.forEach(function(t,r){i[t.name]=n[r]}),[i])}function wo(n){var t,i={};return(n=n.match(/^(\d+)?\s?(\w+?)s?$/i))&&(r(t)&&(t=parseInt(n[1])||1),i[n[2].toLowerCase()]=t),i}function oi(n,t,i){var u;for(r(i)&&(i=tu.length),t=t||0;i>t&&(u=tu[t],!1!==n(u.name,u,t));t++);}function bo(n,t){var i,u,f={};return t.forEach(function(t,e){i=n[e+1];r(i)||""===i||("year"===t&&(f.t=i.replace(/'/,"")),u=parseFloat(i.replace(/'/,"").replace(/,/,".")),f[t]=isNaN(u)?i.toLowerCase():u)}),f}function ko(n){return n=n.trim().replace(/^just (?=now)|\.+$/i,""),go(n)}function go(n){return n.replace(io,function(n,t,i){var u,e,f=0,r=1;return t?n:(i.split("").reverse().forEach(function(n){n=iu[n];var t=n>9;t?(u&&(f+=r),r*=n/(e||1),e=n):(!1===u&&(r*=10),f+=r*n);u=t}),u&&(f+=r),f)})}function ce(n,r,u,f){function nt(n){rt.push(n)}function ft(){rt.forEach(function(n){n.call()})}function ot(){var n=o.getWeekday();o.setWeekday(7*(e.num-1)+(n>w?w+7:w))}function st(){var n=h.i[e.edge];oi(function(n){if(tt(e[n]))return(l=n,!1)},4);"year"===l?e.e="month":("month"===l||"week"===l)&&(e.e="day");o[(0>n.value?"endOf":"beginningOf")+ei(l)]();-2===n.value&&o.reset()}function ht(){var n;oi(function(t,i,r){if("day"===t&&(t="date"),tt(e[t])){if(r>=ut)return o.setTime(NaN),!1;n=n||{};n[t]=e[t];delete e[t]}});n&&nt(function(){o.set(n,!0)})}var o,it,y,rt,h,e,l,ut,w,b,v;return o=dt(),rt=[],o.utc(f),et(n)?o.utc(n.isUTC()).setTime(n.getTime()):c(n)?o.setTime(n):k(n)?(o.set(n,!0),e=n):s(n)&&(y=g(r),n=ko(n),y&&d(y.o?[y.o].concat(y.g):y.g,function(i,u){var f=n.match(u.q);if(f)return(h=u.locale,e=bo(f,u.to),h.o=u,e.utc&&o.utc(),e.timestamp?(e=e.timestamp,!1):(u.r&&!s(e.month)&&(s(e.date)||vo(y,r))&&(v=e.month,e.month=e.date,e.date=v),e.year&&2===e.t.length&&(e.year=100*at(t(dt(),"FullYear")/100)-100*at(e.year/100)+e.year),e.month&&(e.month=h.getMonth(e.month),e.shift&&!e.unit&&(e.unit=h.units[7])),e.weekday&&e.date?delete e.weekday:e.weekday&&(e.weekday=h.getWeekday(e.weekday),e.shift&&!e.unit&&(e.unit=h.units[5])),e.day&&(v=h.i[e.day])?(e.day=v.value,o.reset(),it=!0):e.day&&-1<(w=h.getWeekday(e.day))&&(delete e.day,e.num&&e.month?(nt(ot),e.day=1):e.weekday=w),e.date&&!c(e.date)&&(e.date=yo(h,e.date)),e.ampm&&e.ampm===h.ampm[1]&&12>e.hour?e.hour+=12:e.ampm===h.ampm[0]&&12===e.hour&&(e.hour=0),("offset_hours"in e||"offset_minutes"in e)&&(o.utc(),e.offset_minutes=e.offset_minutes||0,e.offset_minutes+=60*e.offset_hours,"-"===e.offset_sign&&(e.offset_minutes*=-1),e.minute-=e.offset_minutes),e.unit&&(it=!0,b=he(h,e.num),ut=h.units.indexOf(e.unit)%8,l=a.units[ut],ht(),e.shift&&(b*=(v=h.i[e.shift])?v.value:0),e.sign&&(v=h.i[e.sign])&&(b*=v.value),tt(e.weekday)&&(o.set({weekday:e.weekday},!0),delete e.weekday),e[l]=(e[l]||0)+b),e.edge&&nt(st),"-"===e.year_sign&&(e.year*=-1),oi(function(n,t,i){t=e[n];var r=t%1;r&&(e[tu[i-1].name]=at(r*("second"===n?1e3:60)),e[n]=p(t))},1,4),!1))}),e?it?o.advance(e):(o._utc&&o.reset(),yr(o,e,!0,!1,u)):("now"!==n&&(o=new i(n)),f&&o.addMinutes(-o.getTimezoneOffset())),ft(),o.utc(!1)),{c:o,set:e}}function le(n){var t,i=rt(n),r=i,u=0;return oi(function(n,f,e){t=p(rr(i/f.b(),1));t>=1&&(r=t,u=e)},1),[r,u,n]}function ae(n){var t=le(n.millisecondsFromNow());return(6===t[1]||5===t[1]&&4===t[0]&&n.daysFromNow()>=dt().daysInMonth())&&(t[0]=rt(n.monthsFromNow()),t[1]=6),t}function vr(n,i,r){function u(n,r){var u=t(n,"Month");return g(r).months[u+12*i]}it(n,u,r);it(ei(n),u,r,1)}function it(n,t,i,r){f[n]=function(n,u){var f=t(n,u);return i&&(f=f.slice(0,i)),r&&(f=f.slice(0,r).toUpperCase()+f.slice(r)),f}}function gt(n,t,i){f[n]=t;f[n+n]=function(n,i){return v(t(n,i),2)};i&&(f[n+n+n]=function(n,i){return v(t(n,i),3)},f[n+n+n+n]=function(n,i){return v(t(n,i),4)})}function ns(n){var t=n.match(/(\{\w+\})|[^{}]+/g);uu[n]=t.map(function(n){return n.replace(/\{(\w+)\}/,function(t,i){return n=f[i]||i,i}),n})}function vu(n,t,i,r){var u,f,e;if(!n.isValid())return"Invalid Date";if(Date[t]?t=Date[t]:y(t)&&(u=ae(n),t=t.apply(n,u.concat(g(r)))),!t&&i)return u=u||ae(n),0===u[1]&&(u[1]=1,u[0]=1),n=g(r),se(n,u,0<u[2]?"future":"past");for(t=t||"long",("short"===t||"long"===t||"full"===t)&&(t=g(r)[t]),uu[t]||ns(t),u="",t=uu[t],f=0,i=t.length;i>f;f++)e=t[f],u+=y(e)?e(n,r):e;return u}function ve(n,t,i,r,u){var f,e,o,c=0,s=0,h=0;return f=ce(t,i,null,u),r>0&&(s=h=r,e=!0),f.c.isValid()?(f.set&&f.set.e&&(ti.forEach(function(t){t.name===f.set.e&&(c=t.b(f.c,n-f.c)-1)}),t=ei(f.set.e),(f.set.edge||f.set.shift)&&f.c["beginningOf"+t](),"month"===f.set.e&&(o=f.c.clone()["endOf"+t]().getTime()),!e&&f.set.sign&&"millisecond"!=f.set.e&&(s=50,h=-50)),e=n.getTime(),t=f.c.getTime(),o=ts(n,t,o||t+c),e>=t-s&&o+h>=e):!1}function ts(n,r,u){return r=new i(r),n=new i(u).utc(n.isUTC()),23!==t(n,"Hours")&&(r=r.getTimezoneOffset(),n=n.getTimezoneOffset(),r!==n&&(u+=(n-r).minutes())),u}function yr(n,i,u,f,e){function h(n){return tt(i[n])?i[n]:i[n+"s"]}function o(n){return tt(h(n))}var l,s;if(c(i)&&f)i={milliseconds:i};else if(c(i))return n.setTime(i),n;tt(i.date)&&(i.day=i.date);oi(function(t,r,f){var e="day"===t;return o(t)||e&&o("weekday")?(i.e=t,l=+f,!1):(!u||"week"===t||e&&o("week")||ui(n,r.method,e?1:0),void 0)});ti.forEach(function(u){var s,e=u.name;u=u.method;s=h(e);r(s)||(f?("week"===e&&(s=(i.day||0)+7*s,u="Date"),s=s*f+t(n,u)):"month"===e&&o("day")&&ui(n,"Date",15),ui(n,u,s),f&&"month"===e&&(e=s,0>e&&(e=e%12+12),e%12!=t(n,"Month")&&ui(n,"Date",0)))});f||o("day")||!o("weekday")||n.setWeekday(h("weekday"));n:{switch(e){case-1:s=n>dt();break n;case 1:s=n<dt();break n}s=void 0}return s&&oi(function(t,i){if((i.k||"week"===t&&o("weekday"))&&!o(t)&&("day"!==t||!o("weekday")))return(n[i.j](e),!1)},l+1),n}function yu(n,t){var i,r=ro,u={h:0,m:1,s:2};return n=n||a,r.replace(/{([a-z])}/g,function(r,f){var e=[],o="h"===f,s=o&&!t;return"t"===f?n.ampm.join("|"):(o&&e.push(":"),(i=n.timeSuffixes[u[f]])&&e.push(i+"\\s*"),0===e.length?"":"(?:"+e.join("|")+")"+(s?"":"?"))})}function pt(n,t,i){var r,u;return c(n[1])?r=ar(n)[0]:(r=n[0],u=n[1]),ce(r,u,t,i).c}function is(n,t){function e(){return at(this*t)}function u(){return pt(arguments)[n.j](this)}function f(){return pt(arguments)[n.j](-this)}var r=n.name,i={};i[r]=e;i[r+"s"]=e;i[r+"Before"]=f;i[r+"sBefore"]=f;i[r+"Ago"]=f;i[r+"sAgo"]=f;i[r+"After"]=u;i[r+"sAfter"]=u;i[r+"FromNow"]=u;i[r+"sFromNow"]=u;w.extend(i)}function lt(n,t){this.start=pu(n);this.end=pu(t)}function pu(n){return et(n)?new i(n.getTime()):null==n?n:et(n)?n.getTime():n.valueOf()}function ye(n){return n=null==n?n:et(n)?n.getTime():n.valueOf(),!!n||0===n}function rs(n,r){var e,u,o,f;return c(r)?new i(n.getTime()+r):(e=r[0],u=r[1],o=t(n,u),f=new i(n.getTime()),ui(f,u,o+e),f)}function us(n,t){return o.fromCharCode(n.charCodeAt(0)+t)}function fs(n,t){return n+t}function si(n,t,i,r,u){1/0!==t&&(n.timers||(n.timers=[]),c(t)||(t=1),n.n=!1,n.timers.push(setTimeout(function(){n.n||i.apply(r,u||[])},t)))}function wu(n,t,i,r,u,f){var o=n.toFixed(20),e=o.search(/\./),o=o.search(/[1-9]/),e=e-o;return e>0&&(e-=1),u=ut(br(p(e/3),!1===u?i.length:u),-r),r=i.charAt(u+r-1),-9>e&&(u=-3,t=rt(e)-9,r=i.slice(0,1)),i=f?bi(2,10*u):bi(10,3*u),rr(n/i,t||0).format()+r.trim()}function pe(n,t,i,r){var f,e,u;(e=t.match(/^(.+?)(\[.*\])$/))?(u=e[1],t=e[2].replace(/^\[|\]$/g,"").split("]["),t.forEach(function(t){f=!t||t.match(/^\d+$/);!u&&ft(n)&&(u=n.length);st(n,u)||(n[u]=f?[]:{});n=n[u];u=t}),!u&&f&&(u=n.length.toString()),pe(n,u,i,r)):n[t]=r&&"true"===i?!0:r&&"false"===i?!1:i}function we(n,t){var i;return ft(t)||k(t)&&t.toString===bt?(i=[],d(t,function(t,r){n&&(t=n+"["+t+"]");i.push(we(t,r))}),i.join("&")):n?be(n)+"="+(et(t)?t.getTime():be(t)):""}function be(n){return n||!1===n||0===n?encodeURIComponent(n).replace(/%20/g,"+"):""}function ke(n,t,i){var r,u=n instanceof ht?new ht:{};return d(n,function(n,f){r=!1;nr(t,function(t){(nt(t)?t.test(n):k(t)?t[n]===f:n===o(t))&&(r=!0)},1);r===i&&(u[n]=f)}),u}function pr(n){if(n=+n,0>n||1/0===n)throw new RangeError("Invalid number");return n}function wr(n,t){return fr(tt(t)?t:" ",n)}function de(n,t,i,u,f){var e;if(n.length<=t)return n.toString();switch(u=r(u)?"...":u,i){case"left":return n=f?wi(n,t,!0):n.slice(n.length-t),u+n;case"middle":return i=wt(t/2),e=p(t/2),t=f?wi(n,i):n.slice(0,i),n=f?wi(n,e,!0):n.slice(n.length-e),t+u+n;default:return t=f?wi(n,t):n.slice(0,t),t+u}}function wi(n,t,i){if(i)return wi(n.reverse(),t).reverse();i=h("(?=["+ur()+"])");var r=0;return n.split(i).filter(function(n){return r+=n.length,t>=r}).join("")}function ge(n,t,i){return s(t)&&(t=n.indexOf(t),-1===t&&(t=i?n.length:0)),t}var rt,bi,wt,p,at,br,ut,no,kr,bu,dr,ku,hi,gr,ni,du,ki,gu,to,nf,tf,rf,uf,ff,ef,of,a,nu,io,sf,tu,di,ro,iu,ru,uu,f,ti,fu,hf,cf,lf,af,e=Object,u=Array,h=RegExp,i=Date,o=String,w=Number,b=Math,eu="undefined"!=typeof global?global:this,bt=e.prototype.toString,es=e.prototype.hasOwnProperty,uo=e.defineProperty&&e.defineProperties,os="function"==typeof h(),ss=!("0"in new o("a")),vf={},hs=/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/,vt="Boolean Number String Array Date RegExp Function".split(" "),cs=ou("boolean",vt[0]),c=ou("number",vt[1]),s=ou("string",vt[2]),ft=gi(vt[3]),et=gi(vt[4]),nt=gi(vt[5]),y=gi(vt[6]);for(ht.prototype.constructor=e,rt=b.abs,bi=b.pow,wt=b.ceil,p=b.floor,at=b.round,br=b.min,ut=b.max,kr=48,bu=57,dr=65296,ku=65305,hi=".",gr="",ni={},su(e),d(vt,function(n,t){su(eu[t])}),ki=0;9>=ki;ki++)du=o.fromCharCode(ki+dr),gr+=du,ni[du]=o.fromCharCode(ki+kr);ni[","]="";ni["．"]=hi;ni[hi]=hi;no=h("["+gr+"．,"+hi+"]","g");n(e,!1,!1,{keys:function(n){var t=[];if(!k(n)&&!nt(n)&&!y(n))throw new TypeError("Object required");return d(n,function(n){t.push(n)}),t}});n(u,!1,!1,{isArray:function(n){return ft(n)}});n(u,!0,!1,{every:function(n,t){var r=this.length,i=0;for(sr(arguments);r>i;){if(i in this&&!n.call(t,this[i],i,this))return!1;i++}return!0},some:function(n,t){var r=this.length,i=0;for(sr(arguments);r>i;){if(i in this&&n.call(t,this[i],i,this))return!0;i++}return!1},map:function(n,t){t=arguments[1];var r=this.length,i=0,u=Array(r);for(sr(arguments);r>i;)i in this&&(u[i]=n.call(t,this[i],i,this)),i++;return u},filter:function(n){var r=arguments[1],u=this.length,t=0,i=[];for(sr(arguments);u>t;)t in this&&n.call(r,this[t],t,this)&&i.push(this[t]),t++;return i},indexOf:function(n,t){return s(this)?this.indexOf(n,t):df(this,n,t,1)},lastIndexOf:function(n,t){return s(this)?this.lastIndexOf(n,t):df(this,n,t,-1)},forEach:function(n,t){var r=this.length,i=0;for(li(n);r>i;)i in this&&n.call(t,this[i],i,this),i++},reduce:function(n,t){return gf(this,n,t)},reduceRight:function(n,t){return gf(this,n,t,!0)}});n(Function,!0,!1,{bind:function(n){var t,i=this,r=l(arguments,null,1);if(!y(this))throw new TypeError("Function.prototype.bind called on a non-function");return t=function(){return i.apply(i.prototype&&this instanceof i?this:n,r.concat(l(arguments)))},t.prototype=this.prototype,t}});n(i,!1,!1,{now:function(){return(new i).getTime()}}),function(){var t=ur().match(/^\s+$/);try{o.prototype.trim.call([1])}catch(i){t=!1}n(o,!0,!t,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(h("^["+ur()+"]+"),"")},trimRight:function(){return this.replace(h("["+ur()+"]+$"),"")}})}(),function(){var n=new i(i.UTC(1999,11,31)),n=n.toISOString&&"1999-12-31T00:00:00.000Z"===n.toISOString();ot(i,!0,!n,"toISOString,toJSON",function(n,t){n[t]=function(){return v(this.getUTCFullYear(),4)+"-"+v(this.getUTCMonth()+1,2)+"-"+v(this.getUTCDate(),2)+"T"+v(this.getUTCHours(),2)+":"+v(this.getUTCMinutes(),2)+":"+v(this.getUTCSeconds(),2)+"."+v(this.getUTCMilliseconds(),3)+"Z"}})}();gu="AlphanumericSortOrder";to="AlphanumericSortIgnore";nf="AlphanumericSortIgnoreCase";tf="AlphanumericSortEquivalents";rf="AlphanumericSortNatural";n(u,!1,!0,{create:function(){var n=[];return l(arguments,function(t){(!tr(t)&&"length"in t&&("[object Arguments]"===bt.call(t)||t.callee)||!tr(t)&&"length"in t&&!s(t)&&!ri(t))&&(t=u.prototype.slice.call(t,0));n=n.concat(t)}),n}});n(u,!0,!1,{find:function(n,t){return li(n),hr(this,n,0,!1,!1,t)},findIndex:function(n,t){var i;return li(n),i=hr(this,n,0,!1,!0,t),r(i)?-1:i}});n(u,!0,!0,{findFrom:function(n,t,i){return hr(this,n,t,i)},findIndexFrom:function(n,t,i){return t=hr(this,n,t,i,!0),r(t)?-1:t},findAll:function(n,t,i){var r,u=[];return 0<this.length&&(r=fi(n),ct(this,function(n,t,i){r(n,t,i)&&u.push(n)},t,i)),u},count:function(n){return r(n)?this.length:this.findAll(n).length},removeAt:function(n,t){return r(n)?this:(r(t)&&(t=n),this.splice(n,t-n+1),this)},include:function(n,t){return this.clone().add(n,t)},exclude:function(){return u.prototype.remove.apply(this.clone(),arguments)},clone:function(){return ai([],this)},unique:function(n){return ne(this,n)},flatten:function(n){return lu(this,n)},union:function(){return ne(this.concat(au(arguments)))},intersect:function(){return te(this,au(arguments),!1)},subtract:function(){return te(this,au(arguments),!0)},at:function(){return bf(this,arguments)},first:function(n){return r(n)?this[0]:(0>n&&(n=0),this.slice(0,n))},last:function(n){return r(n)?this[this.length-1]:this.slice(0>this.length-n?0:this.length-n)},from:function(n){return this.slice(n)},to:function(n){return r(n)&&(n=this.length),this.slice(0,n)},min:function(n,t){return cr(this,n,"min",t)},max:function(n,t){return cr(this,n,"max",t)},least:function(n,t){return cr(this.groupBy.apply(this,[n]),"length","min",t)},most:function(n,t){return cr(this.groupBy.apply(this,[n]),"length","max",t)},sum:function(n){return n=n?this.map(n):this,0<n.length?n.reduce(function(n,t){return n+t}):0},average:function(n){return n=n?this.map(n):this,0<n.length?n.sum()/n.length:0},inGroups:function(n,t){var u=1<arguments.length,f=this,r=[],i=wt(this.length/n);return hu(n,function(n){n*=i;var e=f.slice(n,n+i);u&&e.length<i&&hu(i-e.length,function(){e=e.add(t)});r.push(e)}),r},inGroupsOf:function(n,t){var i,u=[],f=this.length,e=this;return 0===f||0===n?e:(r(n)&&(n=1),r(t)&&(t=null),hu(wt(f/n),function(r){for(i=e.slice(n*r,n*r+n);i.length<n;)i.push(t);u.push(i)}),u)},isEmpty:function(){return 0==this.compact().length},sortBy:function(n,t){var i=this.clone();return i.sort(function(r,u){var f,e;return f=yt(r,n,i,[r]),e=yt(u,n,i,[u]),(s(f)&&s(e)?ue(f,e):e>f?-1:f>e?1:0)*(t?-1:1)}),i},randomize:function(){for(var i,r,n=this.concat(),t=n.length;t;)i=0|b.random()*t,r=n[--t],n[t]=n[i],n[i]=r;return n},zip:function(){var n=l(arguments);return this.map(function(t,i){return[t].concat(n.map(function(n){return i in n?n[i]:null}))})},sample:function(n){var t=this.randomize();return 0<arguments.length?t.slice(0,n):t[0]},each:function(n,t,i){return ct(this,n,t,i),this},add:function(n,t){return(!c(w(t))||isNaN(t))&&(t=this.length),u.prototype.splice.apply(this,[t,0].concat(n)),this},remove:function(){var n=this;return l(arguments,function(t){var i=0;for(t=fi(t);i<n.length;)t(n[i],i,n)?n.splice(i,1):i++}),n},compact:function(n){var t=[];return ct(this,function(i){ft(i)?t.push(i.compact()):n&&i?t.push(i):n||null==i||i.valueOf()!==i.valueOf()||t.push(i)}),t},groupBy:function(n,t){var r,u=this,i={};return ct(u,function(t,f){r=yt(t,n,u,[t,f,u]);i[r]||(i[r]=[]);i[r].push(t)}),t&&d(i,t),i},none:function(){return!this.any.apply(this,arguments)}});n(u,!0,!0,{all:u.prototype.every,any:u.prototype.some,insert:u.prototype.add});n(e,!1,!0,{map:function(n,t){var i,r,u={};for(i in n)st(n,i)&&(r=n[i],u[i]=yt(r,t,n,[i,r,n]));return u},reduce:function(n){var t=e.keys(ir(n)).map(function(t){return n[t]});return t.reduce.apply(t,l(arguments,null,1))},each:function(n,t){return li(t),d(n,t),n},size:function(n){return e.keys(ir(n)).length}});uf="any all none count find findAll isEmpty".split(" ");ff="sum average min max least most".split(" ");ef=["map","reduce","size"];of=uf.concat(ff).concat(ef),function(){function t(){var n=arguments;return 0<n.length&&!y(n[0])}var i=u.prototype.map;ot(u,!0,t,"every,all,some,filter,any,none,find,findIndex",function(n,t){var i=u.prototype[t];n[t]=function(n){var t=fi(n);return i.call(this,function(n,i){return t(n,i,this)})}});n(u,!0,t,{map:function(n){return i.call(this,function(t,i){return yt(t,n,this,[t,i,this])})}})}(),function(){u[gu]="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ".split("").map(function(n){return n+n.toLowerCase()}).join("");var n={};ct("AÁÀÂÃÄ CÇ EÉÈÊË IÍÌİÎÏ OÓÒÔÕÖ Sß UÚÙÛÜ".split(" "),function(t){var i=t.charAt(0);ct(t.slice(1).split(""),function(t){n[t]=i;n[t.toLowerCase()]=i.toLowerCase()})});u[rf]=!0;u[nf]=!0;u[tf]=n}();ee(uf);ee(ff,!0);or(ef,ht);u.AlphanumericSort=ue;di="ampm hour minute second ampm utc offset_sign offset_hours offset_minutes ampm".split(" ");ro="({t})?\\s*(\\d{1,2}(?:[,.]\\d+)?)(?:{h}([0-5]\\d(?:[,.]\\d+)?)?{m}(?::?([0-5]\\d(?:[,.]\\d+)?){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))";iu={};ru=[];uu={};f={yyyy:function(n){return t(n,"FullYear")},yy:function(n){return t(n,"FullYear")%100},ord:function(n){return n=t(n,"Date"),n+pf(n)},tz:function(n){return n.getUTCOffset()},isotz:function(n){return n.getUTCOffset(!0)},Z:function(n){return n.getUTCOffset()},ZZ:function(n){return n.getUTCOffset().replace(/(\d{2})$/,":$1")}};ti=[{name:"year",method:"FullYear",k:!0,b:function(n){return 864e5*(365+(n?n.isLeapYear()?1:0:.25))}},{name:"month",error:.919,method:"Month",k:!0,b:function(n,t){var i,r=30.4375;return n&&(i=n.daysInMonth(),t<=i.days()&&(r=i)),864e5*r}},{name:"week",method:"ISOWeek",b:ii(6048e5)},{name:"day",error:.958,method:"Date",k:!0,b:ii(864e5)},{name:"hour",method:"Hours",b:ii(36e5)},{name:"minute",method:"Minutes",b:ii(6e4)},{name:"second",method:"Seconds",b:ii(1e3)},{name:"millisecond",method:"Milliseconds",b:ii(1)}];fu={};oe.prototype={getMonth:function(n){return c(n)?n-1:this.months.indexOf(n)%12},getWeekday:function(n){return this.weekdays.indexOf(n)%7},addFormat:function(n,t,i,r,u){var o,e=i||[],f=this;n=n.replace(/\s+/g,"[,. ]*");n=n.replace(/\{([^,]+?)\}/g,function(n,t){var r,h,c=t.match(/\?$/),u=t.match(/^(\d+)\??$/),s=t.match(/(\d)(?:-(\d))?/),o=t.replace(/[^a-z]+$/,"");return u?r=f.tokens[u[1]]:f[o]?r=f[o]:f[o+"s"]&&(r=f[o+"s"],s&&(h=[],r.forEach(function(n,t){var i=t%(f.units?8:r.length);i>=s[1]&&i<=(s[2]||s[1])&&h.push(n)}),r=h),r=pi(r)),u?u="(?:"+r+")":(i||e.push(o),u="("+r+")"),c&&(u+="?"),u});t?(t=yu(f,u),u=["t","[\\s\\u3000]"].concat(f.timeMarker),o=n.match(/\\d\{\d,\d\}\)+\??$/),lr(f,"(?:"+t+")[,\\s\\u3000]+?"+n,di.concat(e),r),lr(f,n+"(?:[,\\s]*(?:"+u.join("|")+(o?"+":"*")+")"+t+")?",e.concat(di),r)):lr(f,n,e,r)}};n(i,!1,!0,{create:function(){return pt(arguments)},past:function(){return pt(arguments,-1)},future:function(){return pt(arguments,1)},addLocale:function(n,t){return po(n,t)},setLocale:function(n){var t=g(n,!1);return nu=t,n&&n!=t.code&&(t.code=n),t},getLocale:function(n){return n?g(n,!1):nu},addFormat:function(n,t,i){lr(g(i),n,t)}});n(i,!0,!0,{set:function(){var n=ar(arguments);return yr(this,n[0],n[1])},setWeekday:function(n){if(!r(n))return ui(this,"Date",t(this,"Date")+n-t(this,"Day"))},setISOWeek:function(n){var i=t(this,"Day")||7;if(!r(n))return(this.set({month:0,date:4}),this.set({weekday:1}),n>1&&this.addWeeks(n-1),1!==i&&this.advance({days:i-1}),this.getTime())},getISOWeek:function(){var n=this.clone(),i=t(n,"Day")||7;return n.addDays(4-i).reset(),1+p(n.daysSince(n.clone().beginningOfYear())/7)},beginningOfISOWeek:function(){var n=this.getDay();return 0===n?n=-6:1!==n&&(n=1),this.setWeekday(n),this.reset()},endOfISOWeek:function(){return 0!==this.getDay()&&this.setWeekday(7),this.endOfDay()},getUTCOffset:function(n){var t=this._utc?0:this.getTimezoneOffset(),i=!0===n?":":"";return!t&&n?"Z":v(p(-t/60),2,!0)+i+v(rt(t%60),2)},utc:function(n){return ci(this,"_utc",!0===n||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var n=ar(arguments,!0);return yr(this,n[0],n[1],1)},rewind:function(){var n=ar(arguments,!0);return yr(this,n[0],n[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(n,t){return this.getTime()>i.create(n).getTime()-(t||0)},isBefore:function(n,t){return this.getTime()<i.create(n).getTime()+(t||0)},isBetween:function(n,t,r){var u,f=this.getTime();return n=i.create(n).getTime(),u=i.create(t).getTime(),t=br(n,u),n=ut(n,u),r=r||0,f>t-r&&n+r>f},isLeapYear:function(){var n=t(this,"FullYear");return 0==n%4&&0!=n%100||0==n%400},daysInMonth:function(){return 32-t(new i(t(this,"FullYear"),t(this,"Month"),32),"Date")},format:function(n,t){return vu(this,n,!1,t)},relative:function(n,t){return s(n)&&(t=n,n=null),vu(this,n,!0,t)},is:function(n,i,r){var f,u;if(this.isValid()){if(s(n))switch(n=n.trim().toLowerCase(),u=this.clone().utc(r),!0){case"future"===n:return this.getTime()>dt().getTime();case"past"===n:return this.getTime()<dt().getTime();case"weekday"===n:return 0<t(u,"Day")&&6>t(u,"Day");case"weekend"===n:return 0===t(u,"Day")||6===t(u,"Day");case-1<(f=a.weekdays.indexOf(n)%7):return t(u,"Day")===f;case-1<(f=a.months.indexOf(n)%12):return t(u,"Month")===f}return ve(this,n,null,i,r)}},reset:function(n){var t,i={};return n=n||"hours","date"===n&&(n="days"),t=ti.some(function(t){return n===t.name||n===t.name+"s"}),i[n]=n.match(/^days?/)?1:0,t?this.set(i,!0):this},clone:function(){var n=new i(this.getTime());return n.utc(!!this._utc),n}});n(i,!0,!0,{iso:function(){return this.toISOString()},getWeekday:i.prototype.getDay,getUTCWeekday:i.prototype.getUTCDay});n(w,!0,!0,{duration:function(n){return n=g(n),se(n,le(this),"duration")}});a=nu=i.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of",short:"{Month} {d}, {yyyy}",long:"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:"{num} {unit} {sign};{sign} {num} {unit};{0} {num}{1} {day} of {month} {year?};{weekday?} {month} {date}{1?} {year?};{date} {month} {year};{date} {month};{shift} {weekday};{shift} week {weekday};{weekday} {2?} {shift} week;{num} {unit=4-5} {sign} {day};{0?} {date}{1} of {month};{0?}{month?} {date?}{1?} of {shift} {unit=6-7}".split(";")});tu=ti.concat().reverse();sf=ti.concat();sf.splice(2,1);ot(i,!0,!0,ti,function(n,r,u){function h(n){n/=c;var t=n%1,i=r.error||.999;return t&&rt(t%1)>i&&(n=at(n)),0>n?wt(n):p(n)}var o,s,f=r.name,e=ei(f),c=r.b();r.j="add"+e+"s";o=function(n,t){return h(this.getTime()-i.create(n,t).getTime())};s=function(n,t){return h(i.create(n,t).getTime()-this.getTime())};n[f+"sAgo"]=s;n[f+"sUntil"]=s;n[f+"sSince"]=o;n[f+"sFromNow"]=o;n[r.j]=function(n,t){var i={};return i[f]=n,this.advance(i,t)};is(r,c);3>u&&["Last","This","Next"].forEach(function(t){n["is"+t+e]=function(){return ve(this,t+" "+f,"en")}});4>u&&(n["beginningOf"+e]=function(){var n={};switch(f){case"year":n.year=t(this,"FullYear");break;case"month":n.month=t(this,"Month");break;case"day":n.day=t(this,"Date");break;case"week":n.weekday=0}return this.set(n,!0)},n["endOf"+e]=function(){var n={hours:23,minutes:59,seconds:59,milliseconds:999};switch(f){case"year":n.month=11;n.day=31;break;case"month":n.day=this.daysInMonth();break;case"week":n.weekday=6}return this.set(n,!0)})});a.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0);a.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0);a.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]);a.addFormat("\\/Date\\((\\d+(?:[+-]\\d{4,4})?)\\)\\/",!1,["timestamp"]);a.addFormat(yu(a),!1,di);ru=a.g.slice(0,7).reverse();a.g=a.g.slice(7).concat(ru);gt("f",function(n){return t(n,"Milliseconds")},!0);gt("s",function(n){return t(n,"Seconds")});gt("m",function(n){return t(n,"Minutes")});gt("h",function(n){return t(n,"Hours")%12||12});gt("H",function(n){return t(n,"Hours")});gt("d",function(n){return t(n,"Date")});gt("M",function(n){return t(n,"Month")+1}),function(){function n(n,i){var r=t(n,"Hours");return g(i).ampm[p(r/12)]||""}it("t",n,1);it("tt",n);it("T",n,1,1);it("TT",n,null,2)}(),function(){function n(n,i){var r=t(n,"Day");return g(i).weekdays[r]}it("dow",n,3);it("Dow",n,3,1);it("weekday",n);it("Weekday",n,null,1)}();vr("mon",0,3);vr("month",0);vr("month2",1);vr("month3",2);f.ms=f.f;f.milliseconds=f.f;f.seconds=f.s;f.minutes=f.m;f.hours=f.h;f["24hr"]=f.H;f["12hr"]=f.h;f.date=f.d;f.day=f.d;f.year=f.yyyy;ot(i,!0,!0,"short,long,full",function(n,t){n[t]=function(n){return vu(this,t,!1,n)}});"〇一二三四五六七八九十百千万".split("").forEach(function(n,t){t>9&&(t=bi(10,t-9));iu[n]=t});ai(iu,ni);io=h("([期週周])?([〇一二三四五六七八九十百千万"+gr+"]+)(?!昨)","g"),function(){var n=a.weekdays.slice(0,7),t=a.months.slice(0,12);ot(i,!0,!0,"today yesterday tomorrow weekday weekend future past".split(" ").concat(n).concat(t),function(n,t){n["is"+ei(t)]=function(n){return this.is(t,0,n)}})}();i.utc||(i.utc={create:function(){return pt(arguments,0,!0)},past:function(){return pt(arguments,-1,!0)},future:function(){return pt(arguments,1,!0)}});n(i,!1,!0,{RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"});lt.prototype.toString=function(){return this.isValid()?this.start+".."+this.end:"Invalid Range"};n(lt,!0,!0,{isValid:function(){return ye(this.start)&&ye(this.end)&&typeof this.start==typeof this.end},span:function(){return this.isValid()?rt((s(this.end)?this.end.charCodeAt(0):this.end)-(s(this.start)?this.start.charCodeAt(0):this.start))+1:NaN},contains:function(n){return null==n?!1:n.start&&n.end?n.start>=this.start&&n.start<=this.end&&n.end>=this.start&&n.end<=this.end:n>=this.start&&n<=this.end},every:function(n,t){var r,i=this.start,f=this.end,e=i>f,u=i,o=0,h=[];for(y(n)&&(t=n,n=null),n=n||1,c(i)?r=fs:s(i)?r=us:et(i)&&(r=n,c(r)?n=r:(i=r.toLowerCase().match(/^(\d+)?\s?(\w+?)s?$/i),r=parseInt(i[1])||1,i=i[2].slice(0,1).toUpperCase()+i[2].slice(1),i.match(/hour|minute|second/i)?i+="s":"Year"===i?i="FullYear":"Day"===i&&(i="Date"),n=[r,i]),r=rs),e&&n>0&&(n*=-1);e?u>=f:f>=u;)h.push(u),t&&t(u,o),u=r(u,n),o++;return h},union:function(n){return new lt(this.start<n.start?this.start:n.start,this.end>n.end?this.end:n.end)},intersect:function(n){return n.start>this.end||n.end<this.start?new lt(NaN,NaN):new lt(this.start>n.start?this.start:n.start,this.end<n.end?this.end:n.end)},clone:function(){return new lt(this.start,this.end)},clamp:function(n){var t=this.start,i=this.end,r=t>i?i:t,t=t>i?t:i;return pu(r>n?r:n>t?t:n)}});[w,o,i].forEach(function(t){n(t,!1,!0,{range:function(n,i){return t.create&&(n=t.create(n),i=t.create(i)),new lt(n,i)}})});n(w,!0,!0,{upto:function(n,t,i){return w.range(this,n).every(i,t)},clamp:function(n,t){return new lt(n,t).clamp(this)},cap:function(n){return this.clamp(void 0,n)}});n(w,!0,!0,{downto:w.prototype.upto});n(u,!1,function(n){return n instanceof lt},{create:function(n){return n.every()}});n(Function,!0,!0,{lazy:function(n,t,i){function o(){return f.length<i-(e&&t?1:0)&&f.push([this,arguments]),e||(e=!0,t?r():si(o,u,r)),h}var r,u,s,h,c=this,f=[],e=!1;return n=n||1,i=i||1/0,u=wt(n),s=at(u/n)||1,r=function(){var t,n=f.length;if(0!=n){for(t=ut(n-s,0);n>t;)h=Function.prototype.apply.apply(c,f.shift()),n--;si(o,u,function(){e=!1;r()})}},o},throttle:function(n){return this.lazy(n,!0,1)},debounce:function(n){function t(){t.cancel();si(t,n,i,this,arguments)}var i=this;return t},delay:function(n){var t=l(arguments,null,1);return si(this,n,this,this,t),this},every:function(n){function r(){t.apply(t,i);si(t,n,r)}var t=this,i=arguments,i=1<i.length?l(i,null,1):[];return si(t,n,r),t},cancel:function(){var n,t=this.timers;if(ft(t))for(;n=t.shift();)clearTimeout(n);return this.n=!0,this},after:function(n){var t=this,i=0,r=[];if(c(n)){if(0===n)return t.call(),t}else n=1;return function(){var u;return r.push(l(arguments)),i++,i==n?(u=t.call(this,r),i=0,r=[],u):void 0}},once:function(){return this.throttle(1/0,!0)},fill:function(){var n=this,t=l(arguments);return function(){var i=l(arguments);return t.forEach(function(n,t){(null!=n||t>=i.length)&&i.splice(t,0,n)}),n.apply(this,i)}}});n(w,!1,!0,{random:function(n,t){var i,u;return 1==arguments.length&&(t=n,n=0),i=br(n||0,r(t)?1:t),u=ut(n||0,r(t)?1:t)+1,p(b.random()*(u-i)+i)}});n(w,!0,!0,{log:function(n){return b.log(this)/(n?b.log(n):1)},abbr:function(n){return wu(this,n,"kmbt",0,4)},metric:function(n,t){return wu(this,n,"nμm kMGTPE",4,r(t)?1:t)},bytes:function(n,t){return wu(this,n,"kMGTPE",0,r(t)?4:t,!0)+"B"},isInteger:function(){return 0==this%1},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(n){return 0==this%n},format:function(n,t,i){var u,e,o,f="";for(r(t)&&(t=","),r(i)&&(i="."),u=(c(n)?rr(this,n||0).toFixed(ut(n,0)):this.toString()).replace(/^-/,"").split("."),e=u[0],o=u[1],u=e.length;u>0;u-=3)u<e.length&&(f=t+f),f=e.slice(ut(0,u-3),u)+f;return o&&(f+=i+fr("0",(n||0)-o.length)+o),(0>this?"-":"")+f},hex:function(n){return this.pad(n||1,!1,16)},times:function(n){if(n)for(var t=0;this>t;t++)n.call(this,t);return this.toNumber()},chr:function(){return o.fromCharCode(this)},pad:function(n,t,i){return v(this,n,t,i)},ordinalize:function(){var n=rt(this),n=parseInt(n.toString().slice(-2));return this+pf(n)},toNumber:function(){return parseFloat(this,10)}}),function(){function t(n){return function(t){return t?rr(this,t,n):n(this)}}n(w,!0,!0,{ceil:t(wt),round:t(at),floor:t(p)});ot(w,!0,!0,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(n,t){n[t]=function(n,i){return b[t](this,n,i)}})}();hf=["isObject","isNaN"];cf="keys values select reject each merge clone equal watch tap has toQueryString".split(" ");n(e,!1,!0,{watch:function(n,t,i){if(uo){var r=n[t];e.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){return r},set:function(u){r=i.call(n,t,r,u)}})}}});n(e,!1,function(){return 1<arguments.length},{keys:function(n,t){var i=e.keys(n);return i.forEach(function(i){t.call(n,i,n[i])}),i}});n(e,!1,!0,{isObject:function(n){return ri(n)},isNaN:function(n){return c(n)&&n.valueOf()!==n.valueOf()},equal:function(n,t){return wf(n,t)},extended:function(n){return new ht(n)},merge:function(n,t,r,f){var s,p,a,o,c,v,l;if(n&&"string"!=typeof t)for(s in t)if(st(t,s)&&n){if(o=t[s],c=n[s],v=tt(c),p=k(o),a=k(c),l=v&&!1===f?c:o,v&&y(f)&&(l=f.call(t,s,c,o)),r&&(p||a))if(et(o))l=new i(o.getTime());else{if(!nt(o)){a||(n[s]=u.isArray(o)?[]:{});e.merge(n[s],o,r,f);continue}l=new h(o.source,vi(o))}n[s]=l}return n},values:function(n,t){var i=[];return d(n,function(r,u){i.push(u);t&&t.call(n,u)}),i},clone:function(n,t){var i;if(!k(n))return n;if(i=bt.call(n),et(n,i)&&n.clone)return n.clone();if(et(n,i)||nt(n,i))return new n.constructor(n);if(n instanceof ht)i=new ht;else if(ft(n,i))i=[];else{if(!ri(n,i))throw new TypeError("Clone must be a basic data type.");i={}}return e.merge(i,n,t)},fromQueryString:function(n,t){var i=e.extended();return n=n&&n.toString?n.toString():"",n.replace(/^.*?\?/,"").split("&").forEach(function(n){n=n.split("=");2===n.length&&pe(i,n[0],decodeURIComponent(n[1]),t)}),i},toQueryString:function(n,t){return we(t,n)},tap:function(n,t){var i=t;return y(t)||(i=function(){t&&n[t]()}),i.call(n,n),n},has:function(n,t){return st(n,t)},select:function(n){return ke(n,arguments,!0)},reject:function(n){return ke(n,arguments,!1)}});ot(e,!1,!0,vt,function(n,t){var i="is"+t;hf.push(i);n[i]=vf[t]});n(e,!1,function(){return 0===arguments.length},{extend:function(){var n=hf.concat(cf);"undefined"!=typeof of&&(n=n.concat(of));or(n,e)}});or(cf,ht);n(h,!1,!0,{escape:function(n){return kt(n)}});n(h,!0,!0,{getFlags:function(){return vi(this)},setFlags:function(n){return h(this.source,n)},addFlag:function(n){return this.setFlags(vi(this,n))},removeFlag:function(n){return this.setFlags(vi(this).replace(n,""))}});n(o,!0,!1,{repeat:function(n){return n=pr(n),fr(this,n)}});n(o,!0,function(n){return nt(n)||2<arguments.length},{startsWith:function(n){var t=arguments,i=t[1],t=t[2],u=this;return i&&(u=u.slice(i)),r(t)&&(t=!0),i=nt(n)?n.source.replace("^",""):kt(n),h("^"+i,t?"":"i").test(u)},endsWith:function(n){var t=arguments,i=t[1],t=t[2],u=this;return tt(i)&&(u=u.slice(0,i)),r(t)&&(t=!0),i=nt(n)?n.source.replace("$",""):kt(n),h(i+"$",t?"":"i").test(u)}});n(o,!0,!0,{escapeRegExp:function(){return kt(this)},escapeURL:function(n){return n?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(n){return n?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return lf(unescape(encodeURIComponent(this)))},decodeBase64:function(){return decodeURIComponent(escape(af(this)))},each:function(n,t){var i,r,u;if(y(n)?(t=n,n=/[\s\S]/g):n?s(n)?n=h(kt(n),"gi"):nt(n)&&(n=h(n.source,vi(n,"g"))):n=/[\s\S]/g,i=this.match(n)||[],t)for(r=0,u=i.length;u>r;r++)i[r]=t.call(this,i[r],r,i)||i[r];return i},shift:function(n){var t="";return n=n||0,this.codes(function(i){t+=o.fromCharCode(i+n)}),t},codes:function(n){for(var i,u=[],t=0,r=this.length;r>t;t++)i=this.charCodeAt(t),u.push(i),n&&n.call(this,i,t);return u},chars:function(n){return this.each(n)},words:function(n){return this.trim().each(/\S+/g,n)},lines:function(n){return this.trim().each(/^.*$/gm,n)},paragraphs:function(n){var t=this.trim().split(/[\r\n]{2,}/);return t.map(function(t){if(n)var i=n.call(t);return i?i:t})},isBlank:function(){return 0===this.trim().length},has:function(n){return-1!==this.search(nt(n)?n:kt(n))},add:function(n,t){return t=r(t)?this.length:t,this.slice(0,t)+n+this.slice(t)},remove:function(n){return this.replace(n,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s\u3000])+/g,function(n,t){return"　"===t?t:" "})},at:function(){return bf(this,arguments,!0)},from:function(n){return this.slice(ge(this,n,!0))},to:function(n){return r(n)&&(n=this.length),this.slice(0,ge(this,n))},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(o.Inflector&&o.Inflector.acronymRegExp,function(n,t){return(t>0?"_":"")+n.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(n){return this.underscore().replace(/(^|_)([^_]+)/g,function(t,i,r,u){return t=(t=o.Inflector)&&t.acronyms[r],t=s(t)?t:void 0,u=!1!==n||u>0,t?u?t:t.toLowerCase():u?r.capitalize():r})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var n=this;return nr(0<arguments.length?arguments:[""],function(t){n=n.replace(h("<\/?"+kt(t)+"[^<>]*>","gi"),"")}),n},removeTags:function(){var n=this;return nr(0<arguments.length?arguments:["\\S+"],function(t){t=h("<("+t+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi");n=n.replace(t,"")}),n},truncate:function(n,t,i){return de(this,n,t,i)},truncateOnWord:function(n,t,i){return de(this,n,t,i,!0)},pad:function(n,t){var i,r;return n=pr(n),i=ut(0,n-this.length)/2,r=p(i),i=wt(i),wr(r,t)+this+wr(i,t)},padLeft:function(n,t){return n=pr(n),wr(ut(0,n-this.length),t)+this},padRight:function(n,t){return n=pr(n),this+wr(ut(0,n-this.length),t)},first:function(n){return r(n)&&(n=1),this.substr(0,n)},last:function(n){return r(n)&&(n=1),this.substr(0>this.length-n?0:this.length-n)},toNumber:function(n){return cu(this,n)},capitalize:function(n){var t;return this.toLowerCase().replace(n?/[^']/g:/^\S/,function(n){var i,r=n.toUpperCase();return i=t?n:r,t=r!==n,i})},assign:function(){var n={};return nr(arguments,function(t,i){k(t)?ai(n,t):n[i+1]=t}),this.replace(/\{([^{]+?)\}/g,function(t,i){return st(n,i)?n[i]:t})}});n(o,!0,!0,{insert:o.prototype.add}),function(n){if(eu.btoa)lf=eu.btoa,af=eu.atob;else{var t=/[^A-Za-z0-9\+\/\=]/g;lf=function(t){var i,r,u,h,o,f,s="",e=0;do i=t.charCodeAt(e++),r=t.charCodeAt(e++),u=t.charCodeAt(e++),h=i>>2,i=(3&i)<<4|r>>4,o=(15&r)<<2|u>>6,f=63&u,isNaN(r)?o=f=64:isNaN(u)&&(f=64),s=s+n.charAt(h)+n.charAt(i)+n.charAt(o)+n.charAt(f);while(e<t.length);return s};af=function(i){var f,r,c,e,h,s="",u=0;if(i.match(t))throw Error("String contains invalid base64 characters");i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");do f=n.indexOf(i.charAt(u++)),r=n.indexOf(i.charAt(u++)),e=n.indexOf(i.charAt(u++)),h=n.indexOf(i.charAt(u++)),f=f<<2|r>>4,r=(15&r)<<4|e>>2,c=(3&e)<<6|h,s+=o.fromCharCode(f),64!=e&&(s+=o.fromCharCode(r)),64!=h&&(s+=o.fromCharCode(c));while(u<i.length);return s}}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")}();let version="3.2.0",ajaxUrl="",TEMP={},HROS={};HROS.CONFIG={website:"http://"+location.hostname+location.pathname,sinaweiboAppkey:"",tweiboAppkey:"",memberID:0,lockPwdAndLoginPwd:!1,desk:1,dockPos:"",appXY:"",appSize:"",appButtonTop:20,appButtonLeft:20,windowIndexid:1e4,widgetIndexid:1,windowMinWidth:215,windowMinHeight:59,wallpaperState:1,wallpaper:"",wallpaperType:"",wallpaperWidth:0,wallpaperHeight:0,appVerticalSpacing:0,appHorizontalSpacing:0,deskCount:0,timeOutPrompt:"会话过期,请重新登陆!",loadingPrompt:"正在载入中，请稍后...",postOnce:"不要重复提交!"};HROS.VAR={zoomLevel:1,isAppMoving:!1,dock:[],desk1:[],desk2:[],desk3:[],desk4:[],desk5:[],folder:[]};let appbtnTemp=template.compile('<div id="<%=id%>" class="appbtn" title="<%=title%>" appid="<%=appid%>" realappid="<%=realappid%>" type="<%=type%>">'+'<img src="<%=imgsrc%>" alt="<%=title%>" style="width:<%=appsize%>px;height:<%=appsize%>px;">'+'<span style="width:<%=appsize+10%>px;"><%=title%><\/span>'+"<\/div>"),addbtnTemp=template.compile('<div class="appbtn add"><div><img src="/images/ui/addicon.png"><\/div>'+'<span style="width:<%=appsize+10%>px;">添加应用<\/span>'+"<\/div>"),taskTemp=template.compile('<a id="<%=id%>" class="task-item task-item-current" title="<%=title%>" appid="<%=appid%>" realappid="<%=realappid%>" type="<%=type%>">'+'<div class="task-item-icon">'+'<img src="<%=imgsrc%>" alt="<%=title%>">'+"<\/div>"+'<div class="task-item-txt"><%=title%><\/div>'+"<\/a>"),widgetWindowTemp=template.compile('<div id="<%=id%>" class="widget" appid="<%=appid%>" realappid="<%=realappid%>" type="<%=type%>" style="z-index:<%=zIndex%>;width:<%=width%>px;height:<%=height%>px;top:<%=top%>px;right:<%=right%>px">'+'<div class="move"><a class="ha-close" href="###" title="关闭"><\/a>'+"<% if(issetbar){ %>"+'<a class="ha-star" href="###" title="评分"><\/a><a class="ha-share" href="###" title="分享"><\/a>'+"<% } %>"+'<\/div><div class="frame">'+'<iframe src="<%=url%>" frameborder="0" allowtransparency="true"><\/iframe>'+"<\/div><\/div>"),windowTemp=template.compile('<div id="<%=id%>" class="window-container window-current<% if(isflash){ %> window-container-flash<% } %>" starcount="<%=starcount%>" appid="<%=appid%>" realappid="<%=realappid%>" type="<%=type%>" state="show" style="<% if(isopenmax){ %>width:100%;height:100%;<% }else{ %>width:<%=width%>px;height:<%=height%>px;<% } %>z-index:<%=zIndex%>" ismax="<% if(isopenmax){ %>1<% }else{ %>0<% } %>">'+'<div style="height:100%"><div class="title-bar">'+'<img class="icon" src="<%=imgsrc%>" alt="<%=title%>"><span class="title"><%=title%><\/span>'+'<div class="title-handle"><a class="ha-hide" btn="hide" href="###" title="最小化"><b class="hide-b"><\/b><\/a>'+"<% if(istitlebar){ %>"+'<a class="ha-max" btn="max" href="###" title="最大化" <% if(isopenmax){ %>style="display:none"<% } %>><b class="max-b"><\/b><\/a>'+'<a class="ha-revert" btn="revert" href="###" title="还原" <% if(!isopenmax){ %>style="display:none"<% } %>><b class="revert-b"><\/b><b class="revert-t"><\/b><\/a>'+"<% } %>"+"<% if(istitlebarFullscreen){ %>"+'<a class="ha-fullscreen" btn="fullscreen" href="###" title="全屏">+<\/a>'+"<% } %>"+'<a class="ha-close" btn="close" href="###" title="关闭">×<\/a><\/div><\/div><div class="window-frame">'+"<% if(isflash){ %>"+'<div class="window-mask"><div class="maskbg"><\/div><div>运行中，点击恢复显示 :)<\/div><\/div>'+"<% }else{ %>"+'<div class="window-mask window-mask-noflash"><\/div>'+"<% } %>"+'<div class="window-loading"><\/div>'+'<iframe id="<%=id%>_iframe" frameborder="0" src="<%=url%>"><\/iframe>'+'<\/div><div class="set-bar"><div class="fr">'+"<% if(issetbar){ %>"+'<a class="btn share"><i class="icon icon104"><\/i><span class="btn-con">分享<\/span><\/a><a class="btn star"><i class="icon icon177"><\/i><span class="btn-con">评分<\/span><\/a><a class="btn detail"><i class="icon icon120"><\/i><span class="btn-con">详情<\/span><\/a>'+"<% } %>"+'<a class="btn refresh"><i class="icon icon158"><\/i><span class="btn-con">刷新<\/span><\/a><\/div><\/div><\/div>'+"<% if(isresize){ %>"+'<div class="window-resize window-resize-t" resize="t"><\/div><div class="window-resize window-resize-r" resize="r"><\/div><div class="window-resize window-resize-b" resize="b"><\/div><div class="window-resize window-resize-l" resize="l"><\/div><div class="window-resize window-resize-rt" resize="rt"><\/div><div class="window-resize window-resize-rb" resize="rb"><\/div><div class="window-resize window-resize-lt" resize="lt"><\/div><div class="window-resize window-resize-lb" resize="lb"><\/div>'+"<% } %>"+"<\/div>"),folderWindowTemp=template.compile('<div id="<%=id%>" class="folder-window window-container window-current" appid="<%=appid%>" realappid="<%=realappid%>" type="<%=type%>" state="show" style="width:<%=width%>px;height:<%=height%>px;z-index:<%=zIndex%>">'+'<div style="height:100%"><div class="title-bar">'+'<img class="icon" src="<%=imgsrc%>" alt="<%=title%>"><span class="title"><%=title%><\/span>'+'<div class="title-handle"><a class="ha-hide" btn="hide" href="###" title="最小化"><b class="hide-b"><\/b><\/a>'+"<% if(istitlebar){ %>"+'<a class="ha-max" btn="max" href="###" title="最大化"><b class="max-b"><\/b><\/a><a class="ha-revert" btn="revert" href="###" title="还原" style="display:none"><b class="revert-b"><\/b><b class="revert-t"><\/b><\/a>'+"<% } %>"+'<a class="ha-close" btn="close" href="###" title="关闭">×<\/a><\/div><\/div><div class="window-frame"><div class="folder_body"><\/div><\/div><div class="set-bar"><div class="fr"><a class="btn refresh"><i class="icon icon158"><\/i><span class="btn-con">刷新<\/span><\/a><\/div><\/div><\/div>'+"<% if(isresize){ %>"+'<div class="window-resize window-resize-t" resize="t"><\/div><div class="window-resize window-resize-r" resize="r"><\/div><div class="window-resize window-resize-b" resize="b"><\/div><div class="window-resize window-resize-l" resize="l"><\/div><div class="window-resize window-resize-rt" resize="rt"><\/div><div class="window-resize window-resize-rb" resize="rb"><\/div><div class="window-resize window-resize-lt" resize="lt"><\/div><div class="window-resize window-resize-lb" resize="lb"><\/div>'+"<% } %>"+"<\/div>"),folderViewTemp=template.compile('<div id="<%=id%>" class="quick_view_container" appid="<%=appid%>" realappid="<%=realappid%>" style="top:<%=top%>px;left:<%=left%>px">'+'<div class="perfect_nine_box"><div class="perfect_nine_t"><div class="perfect_nine_t_m"><\/div><\/div><span class="perfect_nine_t_l"><\/span><span class="perfect_nine_t_r"><\/span><div class="perfect_nine_middle"><span class="perfect_nine_m_l">'+'<div class="perfect_nine_m_l_t" style="top:0px;height:<%=mlt%>px"><\/div>'+'<div class="perfect_nine_m_l_m" style="top:<%=mlt%>px;height:20px;display:<% if(mlm){ %>block<% }else{ %>none<% } %>"><\/div>'+'<div class="perfect_nine_m_l_b" style="top:<% if(mlm){ %><%=mlt+20%><% }else{ %><%=mlt%><% } %>px;height:<%=mlb%>px"><\/div>'+'<\/span><span class="perfect_nine_m_r">'+'<div class="perfect_nine_m_r_t" style="top:0px;height:<%=mrt%>px"><\/div>'+'<div class="perfect_nine_m_r_m" style="top:<%=mrt%>px;height:20px;display:<% if(mrm){ %>block<% }else{ %>none<% } %>"><\/div>'+'<div class="perfect_nine_m_r_b" style="top:<% if(mrm){ %><%=mrt+20%><% }else{ %><%=mrt%><% } %>px;height:<%=mrb%>px"><\/div>'+'<\/span><div class="perfect_nine_context"><div class="quick_view_container_control"><a href="###" class="quick_view_container_open">打开<\/a><\/div>'+'<div class="quick_view_container_list" id="quick_view_container_list_<%=appid%>" realid="<%=appid%>">'+'<div class="quick_view_container_list_in" id="quick_view_container_list_in_<%=appid%>" style="height:<%=height%>px">'+"<%==apps%>"+'<\/div><div class="scrollBar"><\/div><div class="scrollBar_bgc"><\/div><\/div><\/div><\/div><div class="perfect_nine_b"><div class="perfect_nine_b_m"><\/div><\/div><span class="perfect_nine_b_l"><\/span><span class="perfect_nine_b_r"><\/span><\/div><\/div>'),fileDownloadTemp=template.compile('<iframe src="filedownload.php?appid=<%=appid%>" frameborder="0" style="display:none"><\/iframe>'),suggestTemp=template.compile('<li class="resultList" appid="<%=appid%>" realappid="<%=realappid%>" type="<%=type%>">'+'<a href="###"><div><%=name%><\/div><\/a>'+"<\/li>"),editFolderDialogTemp=template.compile('<div id="addfolder">'+'<a class="folderSelector"><img src="<%=src%>"><\/a>'+'<div class="folderNameTxt">请输入文件夹名称：<\/div>'+'<div class="folderInput"><input type="text" class="folderName" id="folderName" value="<%=name%>"><\/div>'+'<div class="folderNameError">文件夹名称不能只包含空字符<\/div><div class="fcDropdown"><a class="fcDropdown_item" title="默认"><img class="fcDropdown_img" src="/images/ui/folder_default.png"><\/a><a class="fcDropdown_item" title="文本"><img class="fcDropdown_img" src="/images/ui/folder_doc.png"><\/a><a class="fcDropdown_item" title="游戏"><img class="fcDropdown_img" src="/images/ui/folder_game.png"><\/a><a class="fcDropdown_item" title="生活"><img class="fcDropdown_img" src="/images/ui/folder_life.png"><\/a><a class="fcDropdown_item" title="音乐"><img class="fcDropdown_img" src="/images/ui/folder_music.png"><\/a><a class="fcDropdown_item" title="工具"><img class="fcDropdown_img" src="/images/ui/folder_tool.png"><\/a><a class="fcDropdown_item" title="视频"><img class="fcDropdown_img" src="/images/ui/folder_video.png"><\/a><\/div><\/div>'),starDialogTemp=template.compile('<div id="star" realappid="<%=realappid%>">'+'<div class="grade-box">'+'<div class="star-num"><%=point%><\/div>'+'<div class="star-box"><div>打分：<\/div>'+'<i style="width:<%=realpoint%>%"><\/i>'+'<ul><li class="grade-1" num="1"><a href="###"><em>很不好用<\/em><\/a><\/li><li class="grade-2" num="2"><a href="###"><em>体验一般般<\/em><\/a><\/li><li class="grade-3" num="3"><a href="###"><em>比较好用<\/em><\/a><\/li><li class="grade-4" num="4"><a href="###"><em>很好用<\/em><\/a><\/li><li class="grade-5" num="5"><a href="###"><em>棒极了，推荐<\/em><\/a><\/li><\/ul><\/div><\/div><\/div>'),lockTemp=template.compile('<div id="lock"><div class="title"><div class="time"><\/div><div class="week"><\/div><\/div><div id="lock-info">'+'<div class="img"><img src="<%=avatar%>" title="<%=username%>" alt="<%=username%>"><\/img><\/div>'+'<div class="text"><input type="password" class="mousetrap" id="lockpassword" placeholder="请输入解锁密码"><\/div><div class="text-tip"><\/div><div class="text"><input type="button" id="lockbtn" value="解 锁"><\/div><\/div><div class="tip">点击屏幕，开启解锁<\/div><\/div>');HROS.app=function(){return{init:function(){$("#desk").on("click",".add",function(){HROS.window.createTemp({appid:"hoorayos-yysc",title:"应用市场",url:"/AppMarket/Index",width:800,height:484,isflash:!1})});HROS.app.move();HROS.app.moveScrollbar();$("body").on("contextmenu",".appbtn:not(.add)",function(n){HROS.popupMenu.hide();let t;switch($(this).attr("type")){case"app":case"widget":t=HROS.popupMenu.app($(this));break;case"pwindow":case"pwidget":t=HROS.popupMenu.papp($(this));break;case"folder":t=HROS.popupMenu.folder($(this));break;case"file":t=HROS.popupMenu.file($(this))}let i=$(window).width()-n.clientX<t.width()?n.clientX-t.width():n.clientX,r=$(window).height()-n.clientY<t.height()?n.clientY-t.height():n.clientY;return t.css({left:i,top:r}).show(),!1});$("body").on("click","#star ul li",function(){let n=$(this).attr("num");!isNaN(n)&&/^[1-5]$/.test(n)&&(HROS.base.checkLogin()?HROS.request.post("/appmarket/modifystar",{AppId:$("#star").attr("realappid"),StarCount:n},function(n){n.IsSuccess?n.IsSuccess?NewCrm.msgbox.success("打分成功！"):NewCrm.msgbox.fail("你已经打过分了！"):NewCrm.msgbox.fail(n.Message);$.dialog.list.star.close()}):HROS.base.login())}).on("click","#share a",function(){$.dialog.list.share.close()});HROS.app.get()},updateXY:function(n){HROS.CONFIG.appXY.toLowerCase()!==n&&HROS.base.checkLogin()&&HROS.request.post("/desk/modifyxy",{appXy:n},function(t){t.IsSuccess?(HROS.CONFIG.appXY=n.toLowerCase(),HROS.deskTop.resize(),NewCrm.msgbox.success("图标排列方向更新成功")):NewCrm.msgbox.fail("图标排列方向更新失败")})},updateSize:function(n){HROS.CONFIG.appSize!==n&&(HROS.CONFIG.appSize=n,HROS.deskTop.resize(),HROS.base.checkLogin()&&HROS.request.post("/desk/modifysize",{appSize:n},function(n){n.IsSuccess?NewCrm.msgbox.success("更新应用显示尺寸成功"):NewCrm.msgbox.fail("更新应用显示尺寸失败")}))},updateVertical:function(n){HROS.CONFIG.appVerticalSpacing!=n&&(HROS.CONFIG.appVerticalSpacing=n,HROS.deskTop.resize(),HROS.base.checkLogin()&&HROS.request.post("/desk/modifyverticalspace",{appVertical:n},function(n){n.IsSuccess?NewCrm.msgbox.success("更新应用垂直间距成功"):NewCrm.msgbox.fail("更新应用垂直间距失败")}))},updateHorizontal:function(n){HROS.CONFIG.appHorizontalSpacing!=n&&(HROS.CONFIG.appHorizontalSpacing=n,HROS.deskTop.resize(),HROS.base.checkLogin()&&HROS.request.post("/desk/modifyhorizontalspace",{appHorizontal:n},function(n){n.IsSuccess?NewCrm.msgbox.success("更新应用水平间距成功"):NewCrm.msgbox.fail("更新应用水平间距失败")}))},get:function(){HROS.VAR.isAppMoving=!0;HROS.request.get("/desk/getuserdeskmembers",{},function(n){if(n.IsSuccess){if(HROS.VAR.isAppMoving=!1,typeof n=="object"){let t=[],i=[];$.each(n.Model,function(n,r){let u=[];$.each(r,function(n,r){r.type==="folder"&&t.push(r);r.isOnDock?i.push(r):u.push(r)});parseInt(n)===1?HROS.VAR.desk1=u:parseInt(n)===2?HROS.VAR.desk2=u:parseInt(n)===3?HROS.VAR.desk3=u:parseInt(n)===4?HROS.VAR.desk4=u:parseInt(n)===5&&(HROS.VAR.desk5=u)});HROS.VAR.folder=t;HROS.VAR.dock=i}HROS.app.set()}})},set:function(){let n="";HROS.VAR.dock!=null&&HROS.VAR.dock!==""&&$(HROS.VAR.dock).each(function(){n+=appbtnTemp({title:this.name,type:this.type,id:"d_"+this.memberId,appid:this.memberId,realappid:this.appId==0?this.memberId:this.appId,imgsrc:this.icon,appsize:48})});$("#dock-bar .dock-applist .appbtn").remove();$("#dock-bar .dock-applist").append(n);for(let n=1;n<=HROS.CONFIG.deskCount;n++){let t="",i=eval("HROS.VAR.desk"+n);typeof i!="undefined"&&i!==""&&$(i).each(function(){t+=appbtnTemp({title:this.name,type:this.type,id:"d_"+this.memberId,appid:this.memberId,realappid:this.appId==0?this.memberId:this.appId,imgsrc:this.icon,appsize:HROS.CONFIG.appSize})});t+=addbtnTemp({appsize:HROS.CONFIG.appSize});$("#desk-"+n+" .desktop-apps-container .appbtn").remove();$("#desk-"+n+" .desktop-apps-container").append(t)}HROS.app.setPos(!1);$("body .quick_view_container").each(function(){HROS.folderView.get($("#d_"+$(this).attr("appid")))});$("#desk .folder-window").each(function(){HROS.window.updateFolder($(this).attr("appid"))});HROS.app.getScrollbar()},setPos:function(n){$("i.addicon").width(HROS.CONFIG.appSize).height(HROS.CONFIG.appSize);$("#desk .desktop-container .appbtn img ").width(HROS.CONFIG.appSize).height(HROS.CONFIG.appSize);$("#desk .desktop-container .appbtn span").width(Number(HROS.CONFIG.appSize)+10);n=n==null?!0:n;let i=HROS.grid.getAppGrid(),t=HROS.grid.getDockAppGrid();$("#dock-bar .dock-applist .appbtn").each(function(n){$(this).css({top:HROS.CONFIG.dockPos.toLowerCase()==="top"?t[n].startY:t[n].startY+5,left:HROS.CONFIG.dockPos.toLowerCase()==="top"?t[n].startX+5:t[n].startX}).attr("top",$(this).offset().top).attr("left",$(this).offset().left)});for(let t=1;t<=5;t++)$("#desk-"+t+" .appbtn").each(function(t){let f=HROS.CONFIG.appVerticalSpacing/2,e=HROS.CONFIG.appHorizontalSpacing/2,r=i[t].startY+f,u=i[t].startX+e;$(this).stop(!0,!1).animate({top:r,left:u},n?500:0);switch(HROS.CONFIG.dockPos.toLowerCase()){case"top":$(this).attr("left",u).attr("top",r+$("#dock-bar").height());break;case"left":$(this).attr("left",u+$("#dock-bar").width()).attr("top",r);break;default:$(this).attr("left",u).attr("top",r)}});HROS.app.getScrollbar()},add:function(n,t){function i(){t&&t()}HROS.base.checkLogin()?HROS.request.post("/appmarket/install",{AppId:n,DeskNum:HROS.CONFIG.desk},function(n){n.IsSuccess?i():NewCrm.msgbox.fail(n.Message)}):i()},remove:function(n,t){function i(){HROS.widget.removeCookie(n);t&&t()}HROS.base.checkLogin()?HROS.request.post("/desk/uninstall",{memberId:parseInt(n)},function(n){n.IsSuccess?(i(),NewCrm.msgbox.success("移除成功，刷新后查看")):NewCrm.msgbox.fail(n.Message)}):i()},move:function(){$("#dock-bar .dock-applist").on("mousedown",".appbtn",function(n){if(n.preventDefault(),n.stopPropagation(),n.button===0||n.button===1){let t=$(this),u=$('<div id="shortcut_shadow">'+t.html()+"<\/div>"),f=n.clientX,e=n.clientY,i=n.clientX,r=n.clientY,s=f-t.offset().left,h=e-t.offset().top,o=HROS.maskBox.desk();$(document).on("mousemove",function(n){$("body").append(u);o.show();i=n.clientX<=0?0:n.clientX>=$(window).width()?$(window).width():n.clientX;r=n.clientY<=0?0:n.clientY>=$(window).height()?$(window).height():n.clientY;(f!==i||e!==r)&&u.css({left:i-s,top:r-h}).show()}).on("mouseup",function(){if($(document).off("mousemove").off("mouseup"),u.remove(),o.hide(),f===i&&e===r){switch(t.attr("type")){case"window":case"pwindow":case"file":HROS.window.create(t.attr("realappid"),t.attr("type"));break;case"widget":case"pwidget":HROS.widget.create(t.attr("realappid"),t.attr("type"));break;case"folder":HROS.folderView.get(t)}return!1}let n=HROS.grid.searchFolderGrid(i,r);if(n!==null){if(t.hasClass("folder")===!1){let i=t.attr("appid"),r=t.index(),u=n;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDockToFolder(i,r,u)&&HROS.request.post("/desk/membermove",{model:{MoveType:"dock-folder",MemberId:i,From:r,To:u}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataDockToFolder(i,r,u)}}else{let u=HROS.CONFIG.dockPos.toLowerCase()==="left"?0:HROS.CONFIG.dockPos.toLowerCase()==="top"?($(window).width()-$("#dock-container").width()+20)/2:$(window).width()-$("#dock-container").width(),f=HROS.CONFIG.dockPos.toLowerCase()==="top"?0:($(window).height()-$("#dock-container").height()+20)/2,n=HROS.grid.searchDockAppGrid(i-u,r-f);if(n!==null){if(n!==t.index()){let c=HROS.grid.searchDockAppGrid2(i-u,r-f),e=t.attr("appid"),o=t.index(),s=n,h=c%2==0?"b":"a";HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDockToDock(e,o,s,h):HROS.app.dataDockToDock(e,o,s,h)}}else{let n=HROS.CONFIG.dockPos.toLowerCase()==="left"?$("#dock-bar").width():0,u=HROS.CONFIG.dockPos.toLowerCase()==="top"?$("#dock-bar").height():0,f=$("#desk-"+HROS.CONFIG.desk+" .desktop-apps-container").scrollLeft(),e=$("#desk-"+HROS.CONFIG.desk+" .desktop-apps-container").scrollTop(),o=HROS.grid.searchAppGrid(i-n+f,r-u+e);if(o!==null){let v=HROS.grid.searchAppGrid2(i-n+f,r-u+e),s=t.attr("appid"),h=t.index(),l=o,a=v%2==0?"b":"a",c=HROS.CONFIG.desk;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDockToDesk(s,h,l,a,c)&&HROS.request.post("/desk/membermove",{model:{MoveType:"dock-desk",MemberId:s,From:h,To:c}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataDockToDesk(s,h,l,a,c)}}}})}});$("#desktop .desktop-apps-container").on("mousedown",".appbtn:not(.add)",function(n){if(n.preventDefault(),n.stopPropagation(),n.button===0||n.button===1){let t=$(this),u=$('<div id="shortcut_shadow">'+t.html()+"<\/div>"),f=n.clientX,e=n.clientY,i=n.clientX,r=n.clientY,s=f-t.offset().left,h=e-t.offset().top,o=HROS.maskBox.desk();$(document).on("mousemove",function(n){$("body").append(u);o.show();i=n.clientX<=0?0:n.clientX>=$(window).width()?$(window).width():n.clientX;r=n.clientY<=0?0:n.clientY>=$(window).height()?$(window).height():n.clientY;(f!==i||e!==r)&&u.css({left:i-s,top:r-h}).show()}).on("mouseup",function(){if($(document).off("mousemove").off("mouseup"),u.remove(),o.hide(),f===i&&e===r){switch(t.attr("type")){case"app":case"pwindow":case"file":HROS.window.create(t.attr("realappid"),t.attr("type"));break;case"widget":case"pwidget":HROS.widget.create(t.attr("realappid"),t.attr("type"));break;case"folder":HROS.folderView.get(t)}return!1}let n=HROS.grid.searchFolderGrid(i,r);if(n!==null){if(t.attr("type")!=="folder"){let i=t.attr("appid"),r=t.index(),u=n,f=HROS.CONFIG.desk;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDeskToFolder(i,r,u,f)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-folder",MemberId:i,From:r,To:u}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataDeskToFolder(i,r,u,f)}}else{let n=HROS.CONFIG.dockPos.toLowerCase()==="left"?0:HROS.CONFIG.dockPos.toLowerCase()==="top"?($(window).width()-$("#dock-container").width()+20)/2:$(window).width()-$("#dock-container").width(),u=HROS.CONFIG.dockPos.toLowerCase()==="top"?0:($(window).height()-$("#dock-container").height()+20)/2,f=HROS.grid.searchDockAppGrid(i-n,r-u);if(f!==null){let l=HROS.grid.searchDockAppGrid2(i-n,r-u),e=t.attr("appid"),o=t.index(),s=f,h=l%2==0?"b":"a",c=HROS.CONFIG.desk;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDeskToDock(e,o,s,h,c)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-dock",MemberId:e,From:o,To:s}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataDeskToDock(e,o,s,h,c)}else{let u=HROS.CONFIG.dockPos.toLowerCase()==="left"?$("#dock-bar").width():0,f=HROS.CONFIG.dockPos.toLowerCase()==="top"?$("#dock-bar").height():0,e=$("#desk-"+HROS.CONFIG.desk+" .desktop-apps-container").scrollLeft(),o=$("#desk-"+HROS.CONFIG.desk+" .desktop-apps-container").scrollTop(),n=HROS.grid.searchAppGrid(i-u+e,r-f+o);if(n!==null&&n!==t.index()){let v=HROS.grid.searchAppGrid2(i-u+e,r-f+o),s=t.attr("appid"),h=t.index(),c=n,l=v%2==0?"b":"a",a=HROS.CONFIG.desk;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDeskToDesk(s,h,c,l,a):HROS.app.dataDeskToDesk(s,h,c,l,a)}}}})}});$("body").on("mousedown",".folder_body .appbtn, .quick_view_container .appbtn",function(n){if(n.preventDefault(),n.stopPropagation(),n.button===0||n.button===1){let t=$(this),u=$('<div id="shortcut_shadow">'+t.html()+"<\/div>"),f=n.clientX,e=n.clientY,i=n.clientX,r=n.clientY,s=f-t.offset().left,h=e-t.offset().top,o=HROS.maskBox.desk();$(document).on("mousemove",function(n){$("body").append(u);o.show();i=n.clientX<=0?0:n.clientX>=$(window).width()?$(window).width():n.clientX;r=n.clientY<=0?0:n.clientY>=$(window).height()?$(window).height():n.clientY;(f!==i||e!==r)&&u.css({left:i-s,top:r-h}).show()}).on("mouseup",function(){if($(document).off("mousemove").off("mouseup"),u.remove(),o.hide(),f===i&&e===r){switch(t.attr("type")){case"app":case"window":case"pwindow":case"file":HROS.window.create(t.attr("realappid"),t.attr("type"));break;case"widget":case"pwidget":HROS.widget.create(t.attr("realappid"),t.attr("type"))}return!1}let n=HROS.grid.searchFolderGrid(i,r);if(n!==null){if(t.parents(".folder-window").attr("appid")!==n){let i=t.attr("appid"),r=t.index(),u=n,f=t.parents(".folder-window").attr("appid")||t.parents(".quick_view_container").attr("appid");HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataFolderToFolder(i,r,u,f)&&HROS.request.post("/desk/membermove",{model:{MoveType:"folder-folder",MemberId:i,From:r,To:u}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataFolderToFolder(i,r,u,f)}}else{let n=HROS.CONFIG.dockPos.toLowerCase()==="left"?0:HROS.CONFIG.dockPos.toLowerCase()==="top"?($(window).width()-$("#dock-container").width()+20)/2:$(window).width()-$("#dock-container").width(),u=HROS.CONFIG.dockPos.toLowerCase()==="top"?0:($(window).height()-$("#dock-container").height()+20)/2,f=HROS.grid.searchDockAppGrid(i-n,r-u);if(f!==null){let a=HROS.grid.searchDockAppGrid2(i-n,r-u),e=t.attr("appid"),o=t.index(),s=f,h=t.parents(".folder-window").attr("appid")||t.parents(".quick_view_container").attr("appid"),c=a%2==0?"b":"a",l=HROS.CONFIG.desk;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataFolderToDock(e,o,s,h,c,l)&&HROS.request.post("/desk/membermove",{model:{MoveType:"folder-dock",MemberId:e,From:o,To:s}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataFolderToDock(e,o,s,h,c,l)}else{let n=HROS.CONFIG.dockPos.toLowerCase()==="left"?$("#dock-bar").width():0,u=HROS.CONFIG.dockPos.toLowerCase()==="top"?$("#dock-bar").height():0,f=$("#desk-"+HROS.CONFIG.desk+" .desktop-apps-container").scrollLeft(),e=$("#desk-"+HROS.CONFIG.desk+" .desktop-apps-container").scrollTop(),o=HROS.grid.searchAppGrid(i-n+f,r-u+e);if(o!==null){let y=HROS.grid.searchAppGrid2(i-n+f,r-u+e),s=t.attr("appid"),h=t.index(),l=o,a=t.parents(".folder-window").attr("appid")||t.parents(".quick_view_container").attr("appid"),v=y%2==0?"b":"a",c=HROS.CONFIG.desk;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataFolderToDesk(s,h,l,a,v,c)&&HROS.request.post("/desk/membermove",{model:{MoveType:"folder-desk",MemberId:s,From:h,To:c}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataFolderToDesk(s,h,l,a,v,c)}}}})}})},getScrollbar:function(){setTimeout(function(){$("#desk .desktop-container").each(function(){let n=$(this).children(".desktop-apps-container"),r=$(this).children(".scrollbar"),t=n.nextAll(".scrollbar-x").position().left,i=n.nextAll(".scrollbar-y").position().top;if(r.hide(),n.scrollLeft(0).scrollTop(0),HROS.CONFIG.appXY.toLowerCase()==="x"){let t=parseInt(n.children(".add").css("top"))+108;n.height()/t<1&&(n.nextAll(".scrollbar-y").height(n.height()/t*n.height()),i=i+n.nextAll(".scrollbar-y").height()>n.height()?n.height()-n.nextAll(".scrollbar-y").height():i,n.nextAll(".scrollbar-y").css("top",i).show(),n.scrollTop(i/n.height()*t))}else{let i=parseInt(n.children(".add").css("left"))+106;n.width()/i<1&&(n.nextAll(".scrollbar-x").width(n.width()/i*n.width()),t=t+n.nextAll(".scrollbar-x").width()>n.width()?n.width()-n.nextAll(".scrollbar-w").width():t,n.nextAll(".scrollbar-x").css("left",t).show(),n.scrollLeft(t/n.width()*i))}})},500)},moveScrollbar:function(){$("#desk .scrollbar").on("mousedown",function(n){let r,u,f,e,h,c,o,s,t=$(this),i=t.prevAll(".desktop-apps-container");h=parseInt(i.children(".add").css("left"))+106;c=parseInt(i.children(".add").css("top"))+108;o=i.width()-t.width();s=i.height()-t.height();t.hasClass("scrollbar-x")?r=n.clientX-t.position().left:u=n.clientY-t.position().top;$(document).on("mousemove",function(n){t.hasClass("scrollbar-x")?(f=n.clientX-r<0?0:n.clientX-r>o?o:n.clientX-r,t.css("left",f),i.scrollLeft(f/i.width()*h)):(e=n.clientY-u<0?0:n.clientY-u>s?s:n.clientY-u,t.css("top",e),i.scrollTop(e/i.height()*c))}).on("mouseup",function(){$(this).off("mousemove").off("mouseup")})});for(let n=1;n<=5;n++)$("#desk-"+n).on("mousewheel",function(n,t){let i=$(this).find(".desktop-apps-container");if(HROS.CONFIG.appXY.toLowerCase()==="x"){let n=parseInt(i.find(".add").css("top"))+108,r;r=t<0?i.scrollTop()+200>n-i.height()?n-i.height():i.scrollTop()+200:i.scrollTop()-200<0?0:i.scrollTop()-200;i.stop(!1,!0).animate({scrollTop:r},300);i.nextAll(".scrollbar-y").stop(!1,!0).animate({top:r/n*i.height()},300)}else{let n=parseInt(i.find(".add").css("left"))+106,r;r=t<0?i.scrollLeft()+200>n-i.width()?n-i.width():i.scrollLeft()+200:i.scrollLeft()-200<0?0:i.scrollLeft()-200;i.stop(!1,!0).animate({scrollLeft:r},300);i.nextAll(".scrollbar-x").stop(!1,!0).animate({left:r/n*i.width()},300)}})},checkIsMoving:function(){let n=!1;return HROS.VAR.isAppMoving?($.dialog({title:"温馨提示",icon:"warning",content:"数据正在处理中，请稍后。",ok:!0}),n=!0):HROS.VAR.isAppMoving=!0,n},dataWarning:function(){$.dialog({title:"温馨提示",icon:"warning",content:"数据错误，请刷新后重试。",ok:!0})},dataDockToFolder:function(n,t,i){let r=!1;return $(HROS.VAR.dock).each(function(t){if(this.memberId===parseInt(n))return $(HROS.VAR.folder).each(function(n){if(this.memberId===parseInt(i))return HROS.VAR.folder[n].apps.push(HROS.VAR.dock[t]),HROS.VAR.folder[n].apps=HROS.VAR.folder[n].apps.sortBy(function(n){return n.memberId},!0),HROS.VAR.dock.splice(t,1),r=!0,!1}),!1}),r?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),r},dataDockToDock:function(n,t,i,r){let u=!1;return HROS.VAR.dock[t]!==null&&(i===0?r==="b"?HROS.VAR.dock.splice(0,0,HROS.VAR.dock[t]):HROS.VAR.dock.splice(1,0,HROS.VAR.dock[t]):r==="b"?HROS.VAR.dock.splice(i,0,HROS.VAR.dock[t]):HROS.VAR.dock.splice(i+1,0,HROS.VAR.dock[t]),t>i?HROS.VAR.dock.splice(t+1,1):HROS.VAR.dock.splice(t,1),u=!0),u?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),u},dataDockToDesk:function(n,t,i,r,u){let f=!1;return u=eval("HROS.VAR.desk"+u),HROS.VAR.dock[t]!==null&&(i===0?r==="b"?u.splice(0,0,HROS.VAR.dock[t]):u.splice(1,0,HROS.VAR.dock[t]):r==="b"?u.splice(i,0,HROS.VAR.dock[t]):u.splice(i+1,0,HROS.VAR.dock[t]),HROS.VAR.dock.splice(t,1),f=!0),f?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),f},dataDockToOtherdesk:function(n,t,i){let r=!1;return i=eval("HROS.VAR.desk"+i),HROS.VAR.dock[t]!==null&&(i.push(HROS.VAR.dock[t]),HROS.VAR.dock.splice(t,1),r=!0),r?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),r},dataDockToDelete:function(n,t){let i=!1;return HROS.VAR.dock[t]!==null&&(HROS.VAR.dock.splice(t,1),i=!0),i?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),i},dataDeskToFolder:function(n,t,i,r){let u=!1;return r=eval("HROS.VAR.desk"+r),$(HROS.VAR.folder).each(function(n){if(this.memberId===parseInt(i)&&r[t]!==null)return HROS.VAR.folder[n].apps.push(r[t]),HROS.VAR.folder[n].apps=HROS.VAR.folder[n].apps.sortBy(function(n){return n.memberId},!0),r.splice(t,1),u=!0,!1}),u?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),u},dataDeskToDock:function(n,t,i,r,u){let f=!1;return u=eval("HROS.VAR.desk"+u),u[t]!==null&&(i===0?r==="b"?HROS.VAR.dock.splice(0,0,u[t]):HROS.VAR.dock.splice(1,0,u[t]):r==="b"?HROS.VAR.dock.splice(i,0,u[t]):HROS.VAR.dock.splice(i+1,0,u[t]),u.splice(t,1),HROS.VAR.dock.length>7&&(u.push(HROS.VAR.dock[7]),HROS.VAR.dock.splice(7,1)),f=!0),f?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),f},dataDeskToDesk:function(n,t,i,r,u){let f=!1;return u=eval("HROS.VAR.desk"+u),u[t]!==null&&(i===0?r==="b"?u.splice(0,0,u[t]):u.splice(1,0,u[t]):r==="b"?u.splice(i,0,u[t]):u.splice(i+1,0,u[t]),t>i?u.splice(t+1,1):u.splice(t,1),f=!0),f?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),f},dataDeskToOtherdesk:function(n,t,i,r,u,f){let e=!1;return f=eval("HROS.VAR.desk"+f),u=eval("HROS.VAR.desk"+u),f[t]!==null&&(i===0?r==="b"?u.splice(0,0,f[t]):u.splice(1,0,f[t]):r==="b"?u.splice(i,0,f[t]):u.splice(i+1,0,f[t]),f.splice(t,1),e=!0),e?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),e},dataFolderToFolder:function(n,t,i,r){let f=!1,e=0,o,u;return $(HROS.VAR.folder).each(function(n){this.memberId===parseInt(r)&&HROS.VAR.folder[n].apps[t]!==null&&(o=n,e+=1);this.memberId===parseInt(i)&&(u=n,e+=1)}),e===2&&(HROS.VAR.folder[u].apps.push(HROS.VAR.folder[o].apps[t]),HROS.VAR.folder[u].apps=HROS.VAR.folder[u].apps.sortBy(function(n){return n.appid},!0),HROS.VAR.folder[o].apps.splice(t,1),f=!0),f?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),f},dataFolderToDock:function(n,t,i,r,u,f){let e=!1;return f=eval("HROS.VAR.desk"+f),$(HROS.VAR.folder).each(function(n){if(this.memberId===parseInt(r)&&HROS.VAR.folder[n].apps[t]!==null)return i===0?u==="b"?HROS.VAR.dock.splice(0,0,HROS.VAR.folder[n].apps[t]):HROS.VAR.dock.splice(1,0,HROS.VAR.folder[n].apps[t]):u==="b"?HROS.VAR.dock.splice(i,0,HROS.VAR.folder[n].apps[t]):HROS.VAR.dock.splice(i+1,0,HROS.VAR.folder[n].apps[t]),HROS.VAR.folder[n].apps.splice(t,1),HROS.VAR.dock.length>7&&(f.push(HROS.VAR.dock[7]),HROS.VAR.dock.splice(7,1)),e=!0,!1}),e?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),e},dataFolderToDesk:function(n,t,i,r,u,f){let e=!1;return f=eval("HROS.VAR.desk"+f),$(HROS.VAR.folder).each(function(n){if(this.memberId===parseInt(r)&&HROS.VAR.folder[n].apps[t]!==null)return i===0?u==="b"?f.splice(0,0,HROS.VAR.folder[n].apps[t]):f.splice(1,0,HROS.VAR.folder[n].apps[t]):u==="b"?f.splice(i,0,HROS.VAR.folder[n].apps[t]):f.splice(i+1,0,HROS.VAR.folder[n].apps[t]),HROS.VAR.folder[n].apps.splice(t,1),e=!0,!1}),e?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),e},dataFolderToOtherdesk:function(n,t,i,r){let u=!1;return i=eval("HROS.VAR.desk"+i),$(HROS.VAR.folder).each(function(n){if(this.memberId===parseInt(r)&&HROS.VAR.folder[n].apps[t]!==null)return i.push(HROS.VAR.folder[n].apps[t]),HROS.VAR.folder[n].apps.splice(t,1),u=!0,!1}),u?$("#desktop").is(":visible")?HROS.app.set():HROS.appmanage.set():HROS.app.dataWarning(),u},dataAllDockToDesk:function(n){n=eval("HROS.VAR.desk"+n);$(HROS.VAR.dock).each(function(t){n.push(HROS.VAR.dock[t])});HROS.VAR.dock.splice(0,HROS.VAR.dock.length)},dataDeleteByAppid:function(n){$(HROS.VAR.dock).each(function(t){if(this.appid===n)return HROS.VAR.dock.splice(t,1),!1});for(let t=1;t<=5;t++){let i=eval("HROS.VAR.desk"+t);$(i).each(function(t){if(this.appid===n)return i.splice(t,1),this.type==="folder"&&$(HROS.VAR.folder).each(function(t){if(this.appid===n)return HROS.VAR.folder.splice(t,1),!1}),!1})}$(HROS.VAR.folder).each(function(t){$(this.apps).each(function(i){if(this.appid===n)return HROS.VAR.folder[t].apps.splice(i,1),!1})})}}}();HROS.appmanage=function(){return{init:function(){$("#appmanage .amg_close").off("click").on("click",function(){HROS.appmanage.close()});$("#amg_folder_container").on("contextmenu",".appbtn",function(){return!1});HROS.appmanage.move();HROS.appmanage.moveScrollbar()},set:function(){$("#desktop").hide();$("#appmanage").show();$("#amg_folder_container .folderItem").show().addClass("folderItem_turn");$("#amg_folder_container .folderInner").height($(window).height()-80);let n="";HROS.VAR.dock!==""&&$(HROS.VAR.dock).each(function(){n+=appbtnTemp({title:this.name,type:this.type,id:"d_"+this.memberId,appid:this.memberId,realappid:this.appId==0?this.memberId:this.appId,imgsrc:this.icon})});$("#amg_dock_container").html(n);for(let n=0;n<HROS.CONFIG.deskCount;n++){let t="",i=eval("HROS.VAR.desk"+(n+1));i!==""&&$(i).each(function(){t+=appbtnTemp({title:this.name,type:this.type,id:"d_"+this.memberId,appid:this.memberId,realappid:this.appId==0?this.memberId:this.appId,imgsrc:this.icon,appsize:26})});$("#amg_folder_container .folderItem:eq("+n+") .folderInner .appbtn").remove();$("#amg_folder_container .folderItem:eq("+n+") .folderInner").append(t)}HROS.appmanage.setPos();HROS.appmanage.getScrollbar()},setPos:function(){let n=HROS.grid.getManageDockAppGrid(),t=HROS.grid.getManageAppGrid();$("#amg_dock_container .appbtn").each(function(t){$(this).css({top:10,left:n[t].startX+6})});for(let n=0;n<5;n++)$("#amg_folder_container .folderItem:eq("+n+") .folderInner .appbtn").each(function(n){$(this).css({top:t[n].startY+5,left:0})})},move:function(){$("#amg_dock_container").on("mousedown",".appbtn",function(n){if(n.preventDefault(),n.stopPropagation(),n.button===0||n.button===1){let t=$(this),u=$('<div id="shortcut_shadow">'+t.html()+"<\/div>"),f=n.clientX,e=n.clientY,i=n.clientX,r=n.clientY,s=f-t.offset().left,h=e-t.offset().top,o=HROS.maskBox.desk();$(document).on("mousemove",function(n){$("body").append(u);o.show();i=n.clientX<=0?0:n.clientX>=$(window).width()?$(window).width():n.clientX;r=n.clientY<=0?0:n.clientY>=$(window).height()?$(window).height():n.clientY;(f!==i||e!==r)&&u.css({left:i-s,top:r-h}).show()}).on("mouseup",function(){if($(document).off("mousemove").off("mouseup"),u.remove(),o.hide(),f===i&&e===r){HROS.appmanage.close();switch(t.attr("type")){case"widget":case"pwidget":HROS.widget.create(t.attr("realappid"),t.attr("type"));break;case"window":case"pwindow":case"folder":HROS.window.create(t.attr("realappid"),t.attr("type"))}return!1}if(r<=80){let n=HROS.grid.searchManageDockAppGrid(i);if(n!=null&&n!=t.index()){let o=HROS.grid.searchManageDockAppGrid2(i),r=t.attr("appid"),u=t.index(),f=n,e=o%2==0?"b":"a";HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDockToDock(r,u,f,e):HROS.app.dataDockToDock(r,u,f,e)}}else{let n=parseInt(i/($(window).width()/5)),u=HROS.grid.searchManageAppGrid(r-80+$("#amg_folder_container .folderItem:eq("+n+") .folderInner").scrollTop());if(u!=null){let h=HROS.grid.searchManageAppGrid2(r-80+$("#amg_folder_container .folderItem:eq("+n+") .folderInner").scrollTop()),i=t.attr("appid"),f=t.index(),o=u,s=h%2==0?"b":"a",e=n+1;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDockToDesk(i,f,o,s,e)&&HROS.request.post("/desk/membermove",{model:{MoveType:"dock-desk",MemberId:i,From:f,To:e}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataDockToDesk(i,f,o,s,e)}}})}return!1});$("#amg_folder_container").on("mousedown",".appbtn:not(.add)",function(n){if(n.preventDefault(),n.stopPropagation(),n.button==0||n.button==1){let t=$(this),u=$('<div id="shortcut_shadow2">'+t.html()+"<\/div>"),f=n.clientX,e=n.clientY,r=n.clientX,i=n.clientY,s=f-t.offset().left,h=e-t.offset().top,o=HROS.maskBox.desk();$(document).on("mousemove",function(n){$("body").append(u);o.show();r=n.clientX<=0?0:n.clientX>=$(window).width()?$(window).width():n.clientX;i=n.clientY<=0?0:n.clientY>=$(window).height()?$(window).height():n.clientY;(f!=r||e!=i)&&u.css({left:r-s,top:i-h}).show()}).on("mouseup",function(){if($(document).off("mousemove").off("mouseup"),u.remove(),o.hide(),f==r&&e==i){HROS.appmanage.close();switch(t.attr("type")){case"app":HROS.window.create(t.attr("realappid"),t.attr("type"));break;case"widget":case"pwidget":HROS.widget.create(t.attr("realappid"),t.attr("type"));break;case"window":case"pwindow":case"folder":HROS.window.create(t.attr("realappid"),t.attr("type"))}return!1}if(i<=80){function n(){let n=HROS.grid.searchManageDockAppGrid(r);if(n!=null){let s=HROS.grid.searchManageDockAppGrid2(r),i=t.attr("appid"),u=t.index(),f=n,e=s%2==0?"b":"a",o=t.parent().attr("desk");HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDeskToDock(i,u,f,e,o):HROS.app.dataDeskToDock(i,u,f,e,o)}}HROS.CONFIG.dockPos.toLowerCase()=="none"?$.dialog({title:"温馨提示",icon:"warning",content:"当前应用码头处于停用状态，是否开启？",ok:function(){HROS.dock.updatePos("top");n()},cancel:!0}):n()}else{let n=parseInt(r/($(window).width()/5)),u=HROS.grid.searchManageAppGrid(i-80+$("#amg_folder_container .folderItem:eq("+n+") .folderInner").scrollTop());if(n+1==t.parent().attr("desk")){if(u!=null&&u!=t.index()){let h=HROS.grid.searchManageAppGrid2(i-80+$("#amg_folder_container .folderItem:eq("+n+") .folderInner").scrollTop()),r=t.attr("appid"),f=t.index(),e=u,o=h%2==0?"b":"a",s=n+1;HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDeskToDesk(r,f,e,o,s):HROS.app.dataDeskToDesk(r,f,e,o,s)}}else if(u!=null){let c=HROS.grid.searchManageAppGrid2(i-80+$("#amg_folder_container .folderItem:eq("+n+") .folderInner").scrollTop()),r=t.attr("appid"),f=t.index(),o=u,s=c%2==0?"b":"a",e=n+1,h=t.parent().attr("desk");HROS.base.checkLogin()?HROS.app.checkIsMoving()||HROS.app.dataDeskToOtherdesk(r,f,o,s,e,h)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-desk",MemberId:r,From:f,To:e}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataDeskToOtherdesk(r,f,o,s,e,h)}}})}return!1})},getScrollbar:function(){$("#amg_folder_container .folderInner").height($(window).height()-80);$("#amg_folder_container .folderItem").each(function(){let n=$(this).find(".folderInner"),r=parseInt(n.children(".appbtn:last").css("top"))+41,t=n.next(".scrollBar"),i=t.position().top;t.hide();n.scrollTop(0);n.height()/r<1&&(t.height(n.height()/r*n.height()),i=i+t.height()>n.height()?n.height()-t.height():i,t.css("top",i).show(),n.scrollTop(i/n.height()*r))})},moveScrollbar:function(){$(".scrollBar").on("mousedown",function(n){let t,u,e,f,i=$(this),r=i.prev(".folderInner");e=parseInt(r.children(".appbtn:last").css("top"))+41;f=r.height()-i.height();t=n.clientY-i.offset().top;$(document).on("mousemove",function(n){u=n.clientY-t-80<0?0:n.clientY-t-80>f?f:n.clientY-t-80;i.css("top",u);r.scrollTop(u/r.height()*e)}).on("mouseup",function(){$(this).off("mousemove").off("mouseup")})});$("#amg_folder_container .folderInner").on("mousewheel",function(n,t){let i=$(this),r=parseInt(i.children(".appbtn:last").css("top"))+41,u;u=t<0?i.scrollTop()+120>r-i.height()?r-i.height():i.scrollTop()+120:i.scrollTop()-120<0?0:i.scrollTop()-120;i.stop(!1,!0).animate({scrollTop:u},300);i.next(".scrollBar").stop(!1,!0).animate({top:u/r*i.height()},300)})},resize:function(){HROS.appmanage.getScrollbar()},close:function(){$("#amg_dock_container").html("");$("#amg_folder_container .folderInner").html("");$("#desktop").show();$("#appmanage").hide();$("#amg_folder_container .folderItem").removeClass("folderItem_turn");HROS.app.set();HROS.deskTop.resize()}}}();HROS.base=function(){return{init:function(){HROS.CONFIG.memberID=$.parseJSON($.cookie("User")).Id;$("body").on("contextmenu",function(){return!1});HROS.signalR.init();HROS.base.getSkin(undefined,function(n){HROS.base.setSkin(n,null)});HROS.zoom.init();HROS.deskTop.init();HROS.wallpaper.init();HROS.searchbar.init();HROS.startmenu.init();HROS.taskbar.init();HROS.dock.init();HROS.app.init();HROS.widget.init();HROS.window.init();HROS.folderView.init();HROS.appmanage.init();HROS.popupMenu.init();HROS.lock.init();HROS.hotkey.init();HROS.base.run()},login:function(){$(".login").animate({top:0},500,function(){changeTabindex("login")})},logout:function(){HROS.signalR.stop(function(){HROS.request.get("/desk/logout",{},function(){location.reload()})})},checkLogin:function(){return parseInt(HROS.CONFIG.memberID)!==0?!0:!1},getSkin:function(n,t){n===undefined?HROS.request.get("/desk/getskin",{},function(n){n.IsSuccess&&typeof t=="function"&&t&&t(n.Model)}):this.setSkin(n,t)},setSkin:function(n,t){function u(n,t){n.attachEvent?n.attachEvent("onload",t):setTimeout(function(){r(n,t)},0)}function r(n,t){if(!t.isCalled){let i=!1;if(/webkit/i.test(navigator.userAgent))n.sheet&&(i=!0);else if(n.sheet)try{n.sheet.cssRules&&(i=!0)}catch(u){u.code===1e3&&(i=!0)}i?setTimeout(function(){t()},1):setTimeout(function(){r(n,t)},1)}}$("#window-skin").attr("id","window-skin-ready2remove");let i=document.createElement("link");i.href="/images/skins/"+n+".css?"+version;i.rel="stylesheet";i.id="window-skin";$("head").append(i);u(i,function(){$("#window-skin-ready2remove").remove();HROS.CONFIG.skin=n;t&&t()})},run:function(){let t=location.search,n={};if(t.indexOf("?")!==-1){let r=t.substr(1),i=r.split("&");for(let t=0;t<i.length;t++)n[i[t].split("=")[0]]=unescape(i[t].split("=")[1])}typeof n.run!="undefined"&&typeof n.type!="undefined"&&(n.type==="app"?HROS.window.create(n.run):HROS.widget.checkCookie(n.run,n.type)||HROS.widget.create(n.run))}}}();HROS.deskTop=function(){return{init:function(){$(window).on("resize",function(){HROS.deskTop.resize()});$("body").on("click","#desktop",function(){HROS.popupMenu.hide();HROS.folderView.hide();HROS.searchbar.hide();HROS.startmenu.hide()}).on("contextmenu","#desktop",function(n){HROS.popupMenu.hide();HROS.folderView.hide();HROS.searchbar.hide();HROS.startmenu.hide();let t=HROS.popupMenu.desk(),i=$(window).width()-n.clientX<t.width()?n.clientX-t.width():n.clientX,r=$(window).height()-n.clientY<t.height()?n.clientY-t.height():n.clientY;return t.css({left:i,top:r}).show(),!1})},resize:function(){$("#desktop").is(":visible")?(HROS.dock.setPos(),HROS.app.setPos(),HROS.window.setPos(),HROS.folderView.setPos()):HROS.appmanage.resize();HROS.wallpaper.set(!1)},updateDefaultDesk:function(n){HROS.base.checkLogin()&&HROS.request.post("/desk/modifydefaultdesk",{deskNum:n},function(t){t.IsSuccess?(NewCrm.msgbox.success("默认桌面更新成功"),$(".dock-pagination").find("a").each(function(t){parseInt(n)===t+1&&$(this).trigger("click")})):NewCrm.msgbox.fail("默认桌面更新失败")})},modifyWallpaperSource:function(n){HROS.base.checkLogin()&&HROS.request.post("/desk/modifywallpapersource",{source:n},function(n){n.IsSuccess?HROS.wallpaper.get(function(){HROS.wallpaper.set()}):NewCrm.msgbox.fail(n.Message)})}}}();HROS.dock=function(){return{init:function(){HROS.dock.getPos(function(){HROS.dock.setPos()});HROS.dock.move();let n;$("#dock-container").on("mouseenter",function(){n=setTimeout(function(){$("#dock-container").addClass("showtop")},300)}).on("mouseleave",function(){clearInterval(n);$(this).removeClass("showtop")});$("body").on("contextmenu","#dock-container",function(n){HROS.popupMenu.hide();HROS.folderView.hide();HROS.searchbar.hide();HROS.startmenu.hide();let t=HROS.popupMenu.dock(),i=$(window).width()-n.clientX<t.width()?n.clientX-t.width():n.clientX,r=$(window).height()-n.clientY<t.height()?n.clientY-t.height():n.clientY;return t.css({left:i,top:r}).show(),!1});$("#dock-bar .dock-tool-setting").on("mousedown",function(){return!1}).on("click",function(){HROS.base.checkLogin()?HROS.window.createTemp({appid:"hoorayos-zmsz",title:"桌面设置",url:"/Desk/ConfigDesk",width:750,height:450,isflash:!1}):HROS.base.login()});$("#dock-bar .dock-tool-style").on("mousedown",function(){return!1}).on("click",function(){HROS.base.checkLogin()?HROS.window.createTemp({appid:"hoorayos-ztsz",title:"主题设置",url:"/Desk/SystemWallPaper",width:580,height:520,isflash:!1}):HROS.base.login()});$("#dock-bar .dock-tool-appmanage").on("mousedown",function(){return!1}).on("click",function(){HROS.appmanage.set()});$("#dock-bar .dock-tool-search").on("mousedown",function(){return!1}).on("click",function(n){n.stopPropagation();HROS.searchbar.get()});$("#dock-bar .pagination").on("mousedown",function(){return!1}).on("click",function(){HROS.dock.switchDesk($(this).attr("index"))});$("#dock-bar .dock-tool-start").on("mousedown",function(){return!1}).on("click",function(){return HROS.startmenu.show(),!1})},setPos:function(){HROS.dock.switchDesk(HROS.CONFIG.desk);let t=$("#desk-"+HROS.CONFIG.desk),i=$("#desk .desktop-container"),n=t.css("width","100%").width(),r=t.css("height","100%").height();$("#dock-container").removeClass("dock-top dock-left dock-right");$("#dock-bar").removeClass("top-bar left-bar right-bar").hide();HROS.CONFIG.dockPos.toLowerCase()==="top"?($("#dock-bar").addClass("top-bar").children("#dock-container").addClass("dock-top"),i.css({width:n,height:r-$("#task-bar").height()-$("#dock-bar").height(),left:n,top:$("#dock-bar").height()}),t.css({left:0}),$("#dock-bar").show()):HROS.CONFIG.dockPos.toLowerCase()==="left"?($("#dock-bar").addClass("left-bar").children("#dock-container").addClass("dock-left"),i.css({width:n-$("#dock-bar").width(),height:r-$("#task-bar").height(),left:n+$("#dock-bar").width(),top:0}),t.css({left:$("#dock-bar").width()}),$("#dock-bar").show()):HROS.CONFIG.dockPos.toLowerCase()==="right"?($("#dock-bar").addClass("right-bar").children("#dock-container").addClass("dock-right"),i.css({width:n-$("#dock-bar").width(),height:r-$("#task-bar").height(),left:n,top:0}),t.css({left:0}),$("#dock-bar").show()):HROS.CONFIG.dockPos.toLowerCase()==="none"&&(i.css({width:n,height:r-$("#task-bar").height(),left:n,top:0}),t.css({left:0}));HROS.taskbar.resize();HROS.folderView.setPos()},updatePos:function(n){n!==HROS.CONFIG.dockPos.toLowerCase()&&typeof n!="undefined"&&(HROS.CONFIG.dockPos=n.toLowerCase(),n==="none"&&HROS.app.dataAllDockToDesk(HROS.CONFIG.desk),HROS.base.checkLogin()&&HROS.request.post("/desk/modifydockposition",{Pos:n,DeskNum:HROS.CONFIG.desk},function(n){n.IsSuccess?(NewCrm.msgbox.success("应用码头位置更新成功"),HROS.dock.setPos(),HROS.app.set()):NewCrm.msgbox.fail("应用码头位置更新失败")}))},move:function(){$("#dock-container").on("mousedown",function(n){if(n.button===0||n.button===1){let t=HROS.maskBox.dock(),n;$(document).on("mousemove",function(i){t.show();n=i.clientY<t.height()*.2?"top":i.clientX<t.width()*.5?"left":"right";$(".dock_drap_effect").removeClass("hover");$(".dock_drap_effect_"+n).addClass("hover")}).on("mouseup",function(){$(document).off("mousemove").off("mouseup");t.hide();HROS.dock.updatePos(n)})}})},switchDesk:function(n){n=/^\+?[1-5]*$/.test(n)?n:1;let r=$("#dock-bar .dock-pagination"),i=HROS.CONFIG.desk,t=n,u=$("#desk-"+i).offset().left,f=$("#desk-"+t).offset().left;i!==t?$("#desk-"+t).hasClass("animated")||$("#desk-"+i).hasClass("animated")||($("#desk-"+i).addClass("animated").animate({left:f},500,"easeInOutCirc",function(){$(this).removeClass("animated")}),$("#desk-"+t).addClass("animated").animate({left:u},500,"easeInOutCirc",function(){$(this).removeClass("animated");r.removeClass("current-pagination-"+i).addClass("current-pagination-"+t);HROS.CONFIG.desk=t})):r.removeClass("current-pagination-"+i).addClass("current-pagination-"+t)},getPos:function(n){HROS.request.get("/desk/getdockpos",{},function(t){t.IsSuccess&&(HROS.CONFIG.dockPos=t.Model.toLowerCase(),typeof n=="function"&&n&&n())})}}}();HROS.folderView=function(){return{init:function(){$("body").on("click",".quick_view_container",function(){HROS.popupMenu.hide()}).on("click",".quick_view_container_open",function(){HROS.window.create($(this).parents(".quick_view_container").attr("appid"),"folder");HROS.folderView.hide()}).on("click",".appbtn",function(){HROS.popupMenu.hide();HROS.folderView.hide();HROS.searchbar.hide();HROS.startmenu.hide()});HROS.folderView.moveScrollbar()},get:function(n){setTimeout(function(){let e=!1;if($("body .quick_view_container").each(function(){if($(this).attr("realappid")==n.attr("realappid"))return e=!0,!1}),e)let t="#qv_"+n.attr("appid");else HROS.folderView.hide();let u="";$(HROS.VAR.folder).each(function(){if(this.memberId==parseInt(n.attr("appid")))return u=this.apps,!1});let f="",t=0;u!=""?($(u).each(function(){f+=appbtnTemp({title:this.name,type:this.type,id:"d_"+this.memberId,appid:this.memberId,realappid:this.appId==0?this.memberId:this.appId,imgsrc:this.icon})}),t+=u.length%4==0?Math.floor(u.length/4)*60:(Math.floor(u.length/4)+1)*60):(f="文件夹为空",t+=30);let r,i;n.parent("div").hasClass("dock-applist")?(r=parseInt(n.attr("left"))+n.width(),i=parseInt(n.attr("top"))):(r=parseInt(n.attr("left"))+n.width(),i=parseInt(n.attr("top"))-20);let s=!1;if(t+i+44>$(window).height()){let n=t+i+44-$(window).height();n<=i?i-=n:(t-=n-i,i=0,s=!0)}r+330>$(window).width()?(r-=330+n.width(),e?($(folderViewId+" .quick_view_container_list_in").html("").append(f),$(folderViewId).stop(!0,!1).animate({left:r,top:i},500),$(folderViewId+" .perfect_nine_m_l_t").stop(!0,!1).animate({top:0,height:Math.ceil((t+24)/2)},200),$(folderViewId+" .perfect_nine_m_l_m").stop(!0,!1).animate({top:Math.ceil((t+24)/2)},200).hide(),$(folderViewId+" .perfect_nine_m_l_b").stop(!0,!1).animate({top:Math.ceil((t+24)/2),height:Math.ceil((t+24)/2)+20},200),$(folderViewId+" .perfect_nine_m_r_t").stop(!0,!1).animate({top:0,height:n.offset().top-i},200),$(folderViewId+" .perfect_nine_m_r_m").stop(!0,!1).animate({top:parseInt(n.attr("top"))-i},200).show(),$(folderViewId+" .perfect_nine_m_r_b").stop(!0,!1).animate({top:parseInt(n.attr("top"))-i+20,height:t+24-(parseInt(n.attr("top"))-i)-0},200),$(folderViewId+" .quick_view_container_list_in").stop(!0,!1).animate({height:t},200)):$("body").append(folderViewTemp({id:"qv_"+n.attr("appid"),appid:n.attr("appid"),realappid:n.attr("realappid"),apps:f,top:i,left:r,height:t,mlt:Math.ceil((t+24)/2),mlm:!1,mlb:Math.ceil((t+24)/2),mrt:n.offset().top-i,mrm:!0,mrb:t+24-(n.offset().top-i)-20}))):e?($(folderViewId+" .quick_view_container_list_in").html("").append(f),$(folderViewId).stop(!0,!1).animate({left:r,top:i},500),$(folderViewId+" .perfect_nine_m_l_t").stop(!0,!1).animate({top:0,height:parseInt(n.attr("top"))-i},200),$(folderViewId+" .perfect_nine_m_l_m").stop(!0,!1).animate({top:parseInt(n.attr("top"))-i},200).show(),$(folderViewId+" .perfect_nine_m_l_b").stop(!0,!1).animate({top:parseInt(n.attr("top"))-i+20,height:t+24-(parseInt(n.attr("top"))-i)-20},200),$(folderViewId+" .perfect_nine_m_r_t").stop(!0,!1).animate({top:0,height:Math.ceil((t+24)/2)},200),$(folderViewId+" .perfect_nine_m_r_m").stop(!0,!1).animate({top:Math.ceil((t+24)/2)},200).hide(),$(folderViewId+" .perfect_nine_m_r_b").stop(!0,!1).animate({top:Math.ceil((t+24)/2),height:Math.ceil((t+24)/2)},200),$(folderViewId+" .quick_view_container_list_in").stop(!0,!1).animate({height:t},200)):$("body").append(folderViewTemp({id:"qv_"+n.attr("appid"),appid:n.attr("appid"),realappid:n.attr("realappid"),apps:f,top:i,left:r,height:t,mlt:n.offset().top-i,mlm:!0,mlb:t+24-(n.offset().top-i)-20,mrt:Math.ceil((t+24)/2),mrm:!1,mrb:Math.ceil((t+24)/2)}));let o="#quick_view_container_list_in_"+n.attr("appid"),h="#quick_view_container_list_"+n.attr("appid")+" .scrollBar";$("#quick_view_container_list_"+n.attr("appid")+" .scrollBar_bgc").hide();$(h).hide().height(0);s&&($("#quick_view_container_list_"+n.attr("appid")+" .scrollBar_bgc").show(),$(h).show().height($(o).height()/(Math.ceil($(o).children().length/4)*60)*$(o).height()))},0)},setPos:function(){$("body .quick_view_container").each(function(){HROS.folderView.get($("#d_"+$(this).attr("appid")))})},moveScrollbar:function(){$("body").on("mousedown",".quick_view_container .quick_view_container_list .scrollBar",function(n){let i=$(this),t=i.prev(".quick_view_container_list_in"),u=t.offset().top,r,f,o,e;o=Math.ceil(t.children().length/4)*60;e=t.height()-i.height();r=n.clientY-i.offset().top;$(document).on("mousemove",function(n){f=n.clientY-r-u<0?0:n.clientY-r-u>e?e:n.clientY-r-u;i.css("top",f);t.scrollTop(f/t.height()*o)}).on("mouseup",function(){$(this).off("mousemove").off("mouseup")})});$("body").on("mousewheel",".quick_view_container_list_in",function(n,t){let i=$(this),r=Math.ceil($(this).children().length/4)*60,u;u=t<0?i.scrollTop()+40>r-i.height()?r-i.height():i.scrollTop()+40:i.scrollTop()-40<0?0:i.scrollTop()-40;i.stop(!1,!0).animate({scrollTop:u},300);$(this).next(".scrollBar").stop(!1,!0).animate({top:u/r*i.height()},300)})},hide:function(){$(".quick_view_container").remove()}}}();HROS.grid=function(){return{getAppGrid:function(){let f=$("#desk-"+HROS.CONFIG.desk).width()-HROS.CONFIG.appButtonLeft,e=$("#desk-"+HROS.CONFIG.desk).height()-HROS.CONFIG.appButtonTop,n=HROS.CONFIG.appButtonTop,t=HROS.CONFIG.appButtonLeft,u=[],i=HROS.CONFIG.appSize=="s"?80:100,r=HROS.CONFIG.appSize=="s"?100:120;for(let o=0;o<1e4;o++)u.push({startY:n,endY:n+i,startX:t,endX:t+r}),HROS.CONFIG.appXY.toLowerCase()==="x"?(t+=r,t+r>f&&(n+=i,t=HROS.CONFIG.appButtonLeft)):(n+=i,n+i>e&&(n=HROS.CONFIG.appButtonTop,t+=r));return u},searchAppGrid:function(n,t){let i=HROS.grid.getAppGrid(),r=null;for(let u=0;u<i.length;u++)if(n>=i[u].startX&&n<=i[u].endX&&t>=i[u].startY&&t<=i[u].endY){r=u;break}return r},searchAppGrid2:function(n,t){let i=HROS.grid.getAppGrid(),r=[];for(let n=0;n<i.length;n++){let t=i[n].endY-i[n].startY,u=i[n].endX-i[n].startX,f=t/2,e=u/2;HROS.CONFIG.appXY.toLowerCase()=="x"?r.push({startY:i[n].startY,endY:i[n].startY+t,startX:i[n].startX,endX:i[n].startX+e},{startY:i[n].startY,endY:i[n].startY+t,startX:i[n].startX+e,endX:i[n].endX}):r.push({startY:i[n].startY,endY:i[n].startY+f,startX:i[n].startX,endX:i[n].startX+u},{startY:i[n].startY+f,endY:i[n].endY,startX:i[n].startX,endX:i[n].startX+u})}let u=null;for(let i=0;i<r.length;i++)if(n>=r[i].startX&&n<=r[i].endX&&t>=r[i].startY&&t<=r[i].endY){u=i;break}return u},getDockAppGrid:function(){let f=$("#dock-bar .dock-applist").height(),r=[],n=0,t=0,i=68,u=68;for(let e=0;e<7;e++)r.push({startY:n,endY:n+i,startX:t,endX:t+u}),n+=i,n+i>f&&(n=0,t+=u);return r},searchDockAppGrid:function(n,t){let i=HROS.grid.getDockAppGrid(),r=null;for(let u=0;u<i.length;u++)if(n>=i[u].startX&&n<=i[u].endX&&t>=i[u].startY&&t<=i[u].endY){r=u;break}return r},searchDockAppGrid2:function(n,t){let i=HROS.grid.getDockAppGrid(),r=[];for(let n=0;n<i.length;n++){let t=i[n].endY-i[n].startY,u=i[n].endX-i[n].startX,f=t/2,e=u/2;HROS.CONFIG.dockPos.toLowerCase()=="top"?r.push({startY:i[n].startY,endY:i[n].startY+t,startX:i[n].startX,endX:i[n].startX+e},{startY:i[n].startY,endY:i[n].startY+t,startX:i[n].startX+e,endX:i[n].endX}):r.push({startY:i[n].startY,endY:i[n].startY+f,startX:i[n].startX,endX:i[n].startX+u},{startY:i[n].startY+f,endY:i[n].endY,startX:i[n].startX,endX:i[n].startX+u})}let u=null;for(let i=0;i<r.length;i++)if(n>=r[i].startX&&n<=r[i].endX&&t>=r[i].startY&&t<=r[i].endY){u=i;break}return u},getFolderGrid:function(){let n=[];return $(".quick_view_container, .folder-window:visible").each(function(){n.push({zIndex:$(this).css("z-index"),id:$(this).attr("appid"),startY:$(this).offset().top,endY:$(this).offset().top+$(this).height(),startX:$(this).offset().left,endX:$(this).offset().left+$(this).width()})}),n.sort(function(n,t){return t.zIndex-n.zIndex}),n},searchFolderGrid:function(n,t){let i=HROS.grid.getFolderGrid(),r=null;for(let u=0;u<i.length;u++)if(n>=i[u].startX&&n<=i[u].endX&&t>=i[u].startY&&t<=i[u].endY){r=i[u].id;break}return r},getManageDockAppGrid:function(){let t=[],n=20;for(let i=0;i<100;i++)t.push({startX:n,endX:n+70}),n+=70;return t},searchManageDockAppGrid:function(n){let t=HROS.grid.getManageDockAppGrid(),i=null;for(let r=0;r<t.length;r++)if(n>=t[r].startX&&n<=t[r].endX){i=r;break}return i},searchManageDockAppGrid2:function(n){let t=HROS.grid.getManageDockAppGrid(),i=[];for(let n=0;n<t.length;n++){let u=t[n].endX-t[n].startX,r=u/2;i.push({startX:t[n].startX,endX:t[n].startX+r},{startX:t[n].startX+r,endX:t[n].endX})}let r=null;for(let t=0;t<i.length;t++)if(n>=i[t].startX&&n<=i[t].endX){r=t;break}return r},getManageAppGrid:function(){let t=[],n=0;for(let i=0;i<1e4;i++)t.push({startY:n,endY:n+40}),n+=40;return t},searchManageAppGrid:function(n){let t=HROS.grid.getManageAppGrid(),i=null;for(let r=0;r<t.length;r++)if(n>=t[r].startY&&n<=t[r].endY){i=r;break}return i},searchManageAppGrid2:function(n){let t=HROS.grid.getManageAppGrid(),i=[];for(let n=0;n<t.length;n++){let u=t[n].endY-t[n].startY,f=t[n].endX-t[n].startX,r=u/2;i.push({startY:t[n].startY,endY:t[n].startY+r},{startY:t[n].startY+r,endY:t[n].endY})}let r=null;for(let t=0;t<i.length;t++)if(n>=i[t].startY&&n<=i[t].endY){r=t;break}return r}}}();HROS.hotkey=function(){return{init:function(){Mousetrap.bind(["backspace"],function(){return!1});Mousetrap.bind(["alt+d"],function(){return HROS.window.hideAll(),!1});Mousetrap.bind(["ctrl+up","command+up"],function(){return HROS.appmanage.set(),!1});Mousetrap.bind(["ctrl+f","command+f"],function(){return HROS.searchbar.get(),!1});Mousetrap.bind(["ctrl+1","command+1"],function(){return HROS.dock.switchDesk(1),!1});Mousetrap.bind(["ctrl+2","command+2"],function(){return HROS.dock.switchDesk(2),!1});Mousetrap.bind(["ctrl+3","command+3"],function(){return HROS.dock.switchDesk(3),!1});Mousetrap.bind(["ctrl+4","command+4"],function(){return HROS.dock.switchDesk(4),!1});Mousetrap.bind(["ctrl+5","command+5"],function(){return HROS.dock.switchDesk(5),!1});Mousetrap.bind(["ctrl+left","command+left"],function(){return parseInt(HROS.CONFIG.desk)-1<1?HROS.dock.switchDesk(5):HROS.dock.switchDesk(parseInt(HROS.CONFIG.desk)-1),!1});Mousetrap.bind(["ctrl+right","command+right"],function(){return parseInt(HROS.CONFIG.desk)+1>5?HROS.dock.switchDesk(1):HROS.dock.switchDesk(parseInt(HROS.CONFIG.desk)+1),!1});Mousetrap.bind(["ctrl+l","command+l"],function(){return HROS.lock.show(),!1})}}}();HROS.lock=function(){return{state:"nolock",init:function(){Mousetrap.bind(["space"],function(){return $("#lock").click(),!1});$("body").on("click","#lock",function(){$("#lock-info").is(":visible")?($("#lock .title").animate({top:"10%"},500),$("#lock .tip").animate({top:"80%"},500),$("#lock-info").fadeOut(),Mousetrap.bind(["space"],function(){return $("#lock").click(),!1}),Mousetrap.unbind("esc")):($("#lock .title").animate({top:"-200px"},500),$("#lock .tip").animate({top:"100%"},500),$("#lock-info").fadeIn(),$("#lockpassword").val("").focus(),$("#lock-info .text-tip").text(""),Mousetrap.bind(["esc"],function(){return $("#lock").click(),!1}),Mousetrap.unbind("space"))});$("body").on("click","#lock-info",function(){return!1});$("body").on("click","#lockbtn",function(){$("#lockpassword").val()!==""?HROS.request.post("/desk/unlockscreen",{unlockPassword:$("#lockpassword").val()},function(n){n.IsSuccess?HROS.lock.hide():($("#lockpassword").val("").focus(),$("#lock-info .text-tip").text("解锁密码错误"))}):$("#lock-info .text-tip").text("请输入解锁密码")});$("body").on("keydown","#lockpassword",function(n){n.keyCode=="13"&&$("#lockbtn").click()})},show:function(){if($("#lock").length==0)if(HROS.base.checkLogin()){let n=function(){$("#desktop").hide();let n=$.parseJSON($.cookie("User"));$("body").append(lockTemp({avatar:n.UserFace,userinfoname:n.Name}));let t=function(){let n=new Date;$("#lock .time").text((n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()));let t=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+"，星期";switch(n.getDay()){case 1:t+="一";break;case 2:t+="二";break;case 3:t+="三";break;case 4:t+="四";break;case 5:t+="五";break;case 6:t+="六";break;default:t+="日"}$("#lock .week").text(t)};t();lockFunc=setInterval(function(){let n=!1;$("#desktop").is(":visible")&&(n=!0);$("#lock").length==0&&(n=!0);$("#lock").is(":hidden")&&(n=!0);n&&(clearInterval(lockFunc),$("#lock").remove(),HROS.lock.show());t()},1e3)};parseInt(HROS.CONFIG.lockPwdAndLoginPwd)?$.dialog({title:"温馨提示",icon:"warning",content:"解锁密码默认为登录密码，是否要先进行修改？",button:[{name:"继续锁定",callback:function(){n()},focus:!0},{name:"修改解锁密码",callback:function(){HROS.window.createTemp({appid:"zhsz",title:"账号设置",url:"/usersetting/index?target=usersafe",width:550,height:580})}}]}):n()}else $.dialog({title:"温馨提示",icon:"warning",content:"锁定功能需要登录后才能使用,为了更好的操作,是否登录?",ok:function(){HROS.base.login()}})},hide:function(){clearInterval(lockFunc);$("#lock").remove();$("#desktop").show()}}}();HROS.maskBox=function(){return{desk:function(){return TEMP.maskBoxDesk||(TEMP.maskBoxDesk=$('<div id="maskbox"><\/div>'),$("body").append(TEMP.maskBoxDesk)),TEMP.maskBoxDesk},dock:function(){return TEMP.maskBoxDock||(TEMP.maskBoxDock=$('<div id="maskbox-dockdrap"><div id="docktop" class="dock_drap_effect dock_drap_effect_top"><\/div><div id="dockleft" class="dock_drap_effect dock_drap_effect_left"><\/div><div id="dockright" class="dock_drap_effect dock_drap_effect_right"><\/div><div id="dockmask" class="dock_drap_mask"><div class="dock_drop_region_top"><div class="text">拖放至顶部<\/div><\/div><div class="dock_drop_region_left"><div class="text">拖放至左侧<\/div><\/div><div class="dock_drop_region_right"><div class="text">拖放至右侧<\/div><\/div><\/div><\/div>'),$("body").append(TEMP.maskBoxDock)),TEMP.maskBoxDock},copyright:function(){return TEMP.maskBoxCopyright||(TEMP.maskBoxCopyright=$('<div id="maskbox-copyright"><\/div>'),$("body").append(TEMP.maskBoxCopyright)),TEMP.maskBoxCopyright}}}();HROS.popupMenu=function(){return{init:function(){$(".popup-menu").on("contextmenu",function(){return!1});$("body").on("mouseenter",".popup-menu li",function(){$(this).children(".popup-menu").length==1&&($(this).children("a").addClass("focus"),$(this).children(".popup-menu").show(),$(this).parents(".popup-menu").offset().left+$(this).parents(".popup-menu").width()*2+10<$(window).width()?$(this).children(".popup-menu").css({left:$(this).parents(".popup-menu").width()-5,top:0}):$(this).children(".popup-menu").css({left:-1*$(this).parents(".popup-menu").width(),top:0}),$(this).children(".popup-menu").offset().top+$(this).children(".popup-menu").height()+10>$(window).height()&&$(this).children(".popup-menu").css({top:$(window).height()-$(this).children(".popup-menu").height()-$(this).children(".popup-menu").offset().top-10}))}).on("mouseleave",".popup-menu li",function(){$(this).children("a").removeClass("focus");$(this).children(".popup-menu").hide()})},app:function(n){if(HROS.window.show2under(),!TEMP.popupMenuApp){let n="";n+='<div class="popup-menu app-menu"><ul>';n+='<li style="border-bottom:1px solid #F0F0F0"><a menu="open" href="###">打开<\/a><\/li>';n+="<li>";n+='<a menu="move" href="###">移动到<b class="arrow">»<\/b><\/a>';n+='<div class="popup-menu"><ul>';for(let t=1;t<=HROS.CONFIG.deskCount;t++)n+='<li><a menu="moveto" desk="'+t+'" href="###">桌面'+t+"<\/a><\/li>";n+="<\/ul><\/div>";n+="<\/li>";n+='<li><a menu="edit" href="###"><b class="edit"><\/b>编辑<\/a><\/li>';n+='<li><a menu="del" href="###"><b class="uninstall"><\/b>卸载<\/a><\/li>';n+="<\/ul><\/div>";TEMP.popupMenuApp=$(n);$("body").append(TEMP.popupMenuApp)}$('.app-menu a[menu="moveto"]').removeClass("disabled");n.parent().hasClass("desktop-apps-container")&&$('.app-menu a[menu="moveto"]').each(function(){$(this).attr("desk")==HROS.CONFIG.desk&&$(this).addClass("disabled")});$('.app-menu a[menu="moveto"]').off("click").on("click",function(){let t=n.attr("appid"),i=n.index(),u=99999,r=$(this).attr("desk"),f=HROS.CONFIG.desk,e=n.parents(".folder-window").attr("appid")||n.parents(".quick_view_container").attr("appid");if(HROS.base.checkLogin()){if(!HROS.app.checkIsMoving())n.parent().hasClass("dock-applist")?HROS.app.dataDockToOtherdesk(t,i,r)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-desk",MemberId:t,From:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):n.parent().hasClass("desktop-apps-container")?HROS.app.dataDeskToOtherdesk(t,i,u,"a",r,f)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-desk",MemberId:t,From:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataFolderToOtherdesk(t,i,r,e)&&HROS.request.post("/desk/membermove",{model:{MoveType:"folder-desk",MemberId:t,From:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)})}else n.parent().hasClass("dock-applist")?HROS.app.dataDockToOtherdesk(t,i,r):n.parent().hasClass("desktop-apps-container")?HROS.app.dataDeskToOtherdesk(t,i,u,"a",r,f):HROS.app.dataFolderToOtherdesk(t,i,r,e);$(".popup-menu").hide()});$('.app-menu a[menu="open"]').off("click").on("click",function(){HROS.window.create(n.attr("realappid"),n.attr("type"));$(".popup-menu").hide()});$('.app-menu a[menu="edit"]').off("click").on("click",function(){HROS.base.checkLogin()?$.dialog.open("/desk/configmember?memberId="+n.attr("realappid"),{id:"editdialog",title:"编辑应用“"+n.children("span").text()+"”",width:600,height:350}):HROS.base.login();$(".popup-menu").hide()});$('.app-menu a[menu="del"]').off("click").on("click",function(){HROS.app.dataDeleteByAppid(n.attr("appid"));HROS.widget.removeCookie(n.attr("realappid"),n.attr("type"));HROS.app.remove(n.attr("appid"),function(){n.find("img, span").show().animate({opacity:"toggle",width:0,height:0},500,function(){n.remove();HROS.deskTop.resize()})});$(".popup-menu").hide()});return TEMP.popupMenuApp},papp:function(n){if(HROS.window.show2under(),!TEMP.popupMenuPapp){let n="";n+='<div class="popup-menu papp-menu"><ul>';n+='<li style="border-bottom:1px solid #F0F0F0"><a menu="open" href="###">打开<\/a><\/li>';n+="<li>";n+='<a menu="move" href="###">移动到<b class="arrow">»<\/b><\/a>';n+='<div class="popup-menu"><ul>';for(let t=1;t<=HROS.CONFIG.deskCount;t++)n+='<li><a menu="moveto" desk="'+t+'" href="###">桌面'+t+"<\/a><\/li>";n+="<\/ul><\/div>";n+="<\/li>";n+='<li><a menu="edit" href="###"><b class="edit"><\/b>编辑<\/a><\/li>';n+='<li><a menu="del" href="###"><b class="del"><\/b>删除<\/a><\/li>';n+="<\/ul><\/div>";TEMP.popupMenuPapp=$(n);$("body").append(TEMP.popupMenuPapp)}$('.papp-menu a[menu="moveto"]').removeClass("disabled");n.parent().hasClass("desktop-apps-container")&&$('.papp-menu a[menu="moveto"]').each(function(){$(this).attr("desk")==HROS.CONFIG.desk&&$(this).addClass("disabled")});$('.papp-menu a[menu="moveto"]').off("click").on("click",function(){let t=n.attr("appid"),i=n.index(),u=99999,r=$(this).attr("desk"),f=HROS.CONFIG.desk,e=n.parents(".folder-window").attr("appid")||n.parents(".quick_view_container").attr("appid");if(HROS.base.checkLogin())n.parent().hasClass("dock-applist")?HROS.app.dataDockToOtherdesk(t,i,r)&&HROS.request.post("/desk/membermove",{model:{MoveType:"dock-otherdesk",MemberId:t,From:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):n.parent().hasClass("desktop-apps-container")?HROS.app.dataDeskToOtherdesk(t,i,u,"a",r,f)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-desk",MemberId:t,Trom:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataFolderToOtherdesk(t,i,r,e);else n.parent().hasClass("dock-applist")?HROS.app.dataDockToOtherdesk(t,i,r):n.parent().hasClass("desktop-apps-container")?HROS.app.dataDeskToOtherdesk(t,i,u,"a",r,f):HROS.app.dataFolderToOtherdesk(t,i,r,e);$(".popup-menu").hide()});$('.papp-menu a[menu="open"]').off("click").on("click",function(){switch(n.attr("type")){case"papp":HROS.window.create(n.attr("realappid"),n.attr("type"));break;case"pwidget":HROS.widget.create(n.attr("realappid"),n.attr("type"))}$(".popup-menu").hide()});$('.papp-menu a[menu="edit"]').off("click").on("click",function(){HROS.base.checkLogin()?NewCrm.msgbox.info("正在开发中...."):HROS.base.login();$(".popup-menu").hide()});$('.papp-menu a[menu="del"]').off("click").on("click",function(){HROS.app.dataDeleteByAppid(n.attr("appid"));HROS.widget.removeCookie(n.attr("realappid"),n.attr("type"));HROS.app.remove(n.attr("appid"),function(){n.find("img, span").show().animate({opacity:"toggle",width:0,height:0},500,function(){n.remove();HROS.deskTop.resize()})});$(".popup-menu").hide()});return TEMP.popupMenuPapp},folder:function(n){if(HROS.window.show2under(),!TEMP.popupMenuFolder){let n="";n+='<div class="popup-menu folder-menu"><ul><li><a menu="view" href="###">预览<\/a><\/li>';n+='<li style="border-bottom:1px solid #F0F0F0"><a menu="open" href="###">打开<\/a><\/li>';n+="<li>";n+='<a menu="move" href="###">移动到<b class="arrow">»<\/b><\/a>';n+='<div class="popup-menu"><ul>';for(let t=1;t<=HROS.CONFIG.deskCount;t++)n+='<li><a menu="moveto" desk="'+t+'" href="###">桌面'+t+"<\/a><\/li>";n+="<\/ul><\/div>";n+="<\/li>";n+='<li><a menu="rename" href="###"><b class="edit"><\/b>重命名<\/a><\/li>';n+='<li><a menu="del" href="###"><b class="del"><\/b>删除<\/a><\/li>';n+="<\/ul><\/div>";TEMP.popupMenuFolder=$(n);$("body").append(TEMP.popupMenuFolder)}$('.folder-menu a[menu="moveto"]').removeClass("disabled");n.parent().hasClass("desktop-apps-container")&&$('.folder-menu a[menu="moveto"]').each(function(){$(this).attr("desk")==HROS.CONFIG.desk&&$(this).addClass("disabled")});$('.folder-menu a[menu="view"]').off("click").on("click",function(){HROS.folderView.get(n);$(".popup-menu").hide()});$('.folder-menu a[menu="open"]').off("click").on("click",function(){HROS.window.create(n.attr("realappid"),n.attr("type"));$(".popup-menu").hide()});$('.folder-menu a[menu="moveto"]').off("click").on("click",function(){let t=n.attr("appid"),i=n.index(),u=99999,r=$(this).attr("desk"),f=HROS.CONFIG.desk,e=n.parents(".folder-window").attr("appid")||n.parents(".quick_view_container").attr("appid");if(HROS.base.checkLogin())n.parent().hasClass("dock-applist")?HROS.app.dataDockToOtherdesk(t,i,r)&&HROS.request.post("/desk/membermove",{model:{MoveType:"dock-otherdesk",MemberId:t,From:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):n.parent().hasClass("desktop-apps-container")?HROS.app.dataDeskToOtherdesk(t,i,u,"a",r,f)&&HROS.request.post("/desk/membermove",{model:{MoveType:"desk-desk",MemberId:t,From:i,To:r}},function(n){n.IsSuccess?HROS.VAR.isAppMoving=!1:NewCrm.msgbox.fail(n.Message)}):HROS.app.dataFolderToOtherdesk(t,i,r,e);else n.parent().hasClass("dock-applist")?HROS.app.dataDockToOtherdesk(t,i,r):n.parent().hasClass("desktop-apps-container")?HROS.app.dataDeskToOtherdesk(t,i,u,"a",r,f):HROS.app.dataFolderToOtherdesk(t,i,r,e);$(".popup-menu").hide()});$('.folder-menu a[menu="rename"]').off("click").on("click",function(){if(HROS.base.checkLogin()){$.dialog({id:"addfolder",title:"重命名“"+n.find("span").text()+"”文件夹",padding:0,content:editFolderDialogTemp({name:n.find("span").text(),src:n.find("img").attr("src")}),ok:function(){if($("#folderName").val()!="")HROS.request.post("/desk/modifyfolderinfo",{name:$("#folderName").val(),icon:$(".folderSelector img").attr("src"),memberId:parseInt(n.attr("appid"))},function(n){n.IsSuccess&&HROS.app.get()});else return $(".folderNameError").show(),!1},cancel:!0});$(".folderSelector").off("click").on("click",function(){$(".fcDropdown").show()});$(".fcDropdown_item").off("click").on("click",function(){$(".folderSelector img").attr("src",$(this).children("img").attr("src")).attr("idx",$(this).children("img").attr("idx"));$(".fcDropdown").hide()})}else HROS.base.login();$(".popup-menu").hide()});$('.folder-menu a[menu="del"]').off("click").on("click",function(){$.dialog({id:"delfolder",title:"删除“"+n.find("span").text()+"”文件夹",content:"删除文件夹会将文件夹内的应用移出到桌面",icon:"warning",ok:function(){HROS.app.remove(n.attr("appid"),function(){HROS.app.dataDeleteByAppid(n.attr("appid"));n.find("img, span").show().animate({opacity:"toggle",width:0,height:0},500,function(){n.remove();HROS.deskTop.resize()})})},cancel:!0});$(".popup-menu").hide()});return TEMP.popupMenuFolder},file:function(n){HROS.window.show2under();TEMP.popupMenuFile||(TEMP.popupMenuFile=$('<div class="popup-menu file-menu"><ul><li style="border-bottom:1px solid #F0F0F0"><a menu="download" href="###">下载<\/a><\/li><li><a menu="del" href="###"><b class="del"><\/b>删除<\/a><\/li><\/ul><\/div>'),$("body").append(TEMP.popupMenuFile));$('.file-menu a[menu="download"]').off("click").on("click",function(){$("body").append(fileDownloadTemp({appid:n.attr("appid")}));$(".popup-menu").hide()});$('.file-menu a[menu="del"]').off("click").on("click",function(){HROS.app.dataDeleteByAppid(n.attr("appid"));HROS.app.remove(n.attr("appid"),function(){n.find("img, span").show().animate({opacity:"toggle",width:0,height:0},500,function(){n.remove();HROS.deskTop.resize()})});$(".popup-menu").hide()});return TEMP.popupMenuFile},dock:function(){if(HROS.window.show2under(),!TEMP.popupMenuDock){TEMP.popupMenuDock=$('<div class="popup-menu dock-menu"><ul><li><a menu="dockPos" pos="top" href="###"><b class="hook"><\/b>向上停靠<\/a><\/li><li><a menu="dockPos" pos="left" href="###"><b class="hook"><\/b>向左停靠<\/a><\/li><li><a menu="dockPos" pos="right" href="###"><b class="hook"><\/b>向右停靠<\/a><\/li><li><a menu="dockPos" pos="none" href="###">隐藏<\/a><\/li><\/ul><\/div>');$("body").append(TEMP.popupMenuDock);$('.dock-menu a[menu="dockPos"]').on("click",function(){$(this).attr("pos")=="none"?$.dialog({title:"温馨提示",icon:"warning",content:"<p>如果应用码头存在应用，隐藏后会将应用转移到当前桌面。<\/p><p>若需要再次开启，可在桌面空白处点击右键，进入「 桌面设置 」里开启。<\/p>",ok:function(){HROS.dock.updatePos("none")},cancel:!0}):HROS.dock.updatePos($(this).attr("pos"));$(".popup-menu").hide()})}return $('.dock-menu a[menu="dockPos"]').each(function(){$(this).children(".hook").hide();$(this).attr("pos")==HROS.CONFIG.dockPos.toLowerCase()&&$(this).children(".hook").show();$(".popup-menu").hide()}),TEMP.popupMenuDock},task:function(n){HROS.window.show2under();TEMP.popupMenuTask||(TEMP.popupMenuTask=$('<div class="popup-menu task-menu"><ul><li><a menu="max" href="###">最大化<\/a><\/li><li style="border-bottom:1px solid #F0F0F0"><a menu="hide" href="###">最小化<\/a><\/li><li><a menu="close" href="###">关闭<\/a><\/li><\/ul><\/div>'),$("body").append(TEMP.popupMenuTask));$('.task-menu a[menu="max"]').off("click").on("click",function(){HROS.window.max(n.attr("appid"),n.attr("type"));$(".popup-menu").hide()});$('.task-menu a[menu="hide"]').off("click").on("click",function(){HROS.window.hide(n.attr("appid"),n.attr("type"));$(".popup-menu").hide()});$('.task-menu a[menu="close"]').off("click").on("click",function(){HROS.window.close(n.attr("appid"),n.attr("type"));$(".popup-menu").hide()});return TEMP.popupMenuTask},desk:function(){if(HROS.window.show2under(),!TEMP.popupMenuDesk){TEMP.popupMenuDesk=$('<div class="popup-menu desk-menu"><ul><li><a menu="hideall" href="###">显示桌面<\/a><\/li><li style="border-bottom:1px solid #F0F0F0"><a menu="closeall" href="###">关闭所有窗口<\/a><\/li><li><a href="###">新建<b class="arrow">»<\/b><\/a><div class="popup-menu"><ul><li><a menu="addfolder" href="###"><b class="folder"><\/b>新建文件夹<\/a><\/li><li><a menu="addpapp" href="###"><b class="customapp"><\/b>新建私人应用<\/a><\/li><\/ul><\/div><\/li><li style="border-bottom:1px solid #F0F0F0"><b class="upload"><\/b><a menu="uploadfile" href="###">上传文件<\/a><\/li><li><a menu="themes" href="###"><b class="themes"><\/b>主题设置<\/a><\/li><li><a menu="setting" href="###"><b class="setting"><\/b>桌面设置<\/a><\/li><li style="border-bottom:1px solid #F0F0F0"><a href="###">图标设置<b class="arrow">»<\/b><\/a><div class="popup-menu"><ul><li><a href="###">排列<b class="arrow">»<\/b><\/a><div class="popup-menu"><ul><li><a menu="orderby" orderby="x" href="###"><b class="hook"><\/b>横向排列<\/a><\/li><li><a menu="orderby" orderby="y" href="###"><b class="hook"><\/b>纵向排列<\/a><\/li><\/ul><\/div><\/li><li><a href="###">尺寸<b class="arrow">»<\/b><\/a><div class="popup-menu"><ul><li><a menu="size" size="32" href="###"><b class="hook"><\/b>小图标<\/a><\/li><li><a menu="size" size="48" href="###"><b class="hook"><\/b>常规图标<\/a><\/li><li><a menu="size" size="64" href="###"><b class="hook"><\/b>大图标<\/a><\/li><\/ul><\/div><\/li><\/ul><\/div><\/li><li><a menu="lock" href="###">锁定<\/a><\/li><li><a menu="logout" href="###">注销<\/a><\/li><\/ul><\/div>');$("body").append(TEMP.popupMenuDesk);HROS.base.checkLogin()||$('body .desk-menu li a[menu="logout"]').parent().remove();$('.desk-menu a[menu="orderby"]').on("click",function(){HROS.app.updateXY($(this).attr("orderby"));$(".popup-menu").hide()});$('.desk-menu a[menu="size"]').on("click",function(){HROS.app.updateSize($(this).attr("size"));$(".popup-menu").hide()});$('.desk-menu a[menu="hideall"]').on("click",function(){HROS.window.hideAll();$(".popup-menu").hide()});$('.desk-menu a[menu="closeall"]').on("click",function(){HROS.window.closeAll();$(".popup-menu").hide()});$('.desk-menu a[menu="addfolder"]').on("click",function(){if(HROS.base.checkLogin()){$.dialog({id:"addfolder",title:"新建文件夹",padding:0,content:editFolderDialogTemp({name:"新建文件夹",src:"/images/ui/folder_default.png"}),ok:function(){if($("#folderName").val()!="")HROS.request.post("/desk/createfolder",{FolderName:$("#folderName").val(),FolderImg:$(".folderSelector img").attr("src"),DeskId:HROS.CONFIG.desk},function(){HROS.app.get()});else return $(".folderNameError").show(),!1},cancel:!0});$(".folderSelector").on("click",function(){return $("#addfolder .fcDropdown").show(),!1});$(document).click(function(){$("#addfolder .fcDropdown").hide()});$(".fcDropdown_item").on("click",function(){$(".folderSelector img").attr("src",$(this).children("img").attr("src")).attr("idx",$(this).children("img").attr("idx"));$("#addfolder .fcDropdown").hide()})}else HROS.base.login();$(".popup-menu").hide()});$('.desk-menu a[menu="addpapp"]').on("click",function(){HROS.base.checkLogin()?NewCrm.msgbox.info("正在开发中...."):HROS.base.login();$(".popup-menu").hide()});$('.desk-menu a[menu="uploadfile"]').on("click",function(){NewCrm.msgbox.info("正在开发中....");$(".popup-menu").hide()});$('.desk-menu a[menu="themes"]').on("click",function(){HROS.base.checkLogin()?HROS.window.createTemp({appid:"hoorayos-ztsz",title:"主题设置",url:"/Desk/SystemWallPaper",width:580,height:520,isflash:!1}):HROS.base.login();$(".popup-menu").hide()});$('.desk-menu a[menu="setting"]').on("click",function(){HROS.base.checkLogin()?HROS.window.createTemp({appid:"hoorayos-zmsz",title:"桌面设置",url:"/Desk/ConfigDesk",width:750,height:450,isflash:!1}):HROS.base.login();$(".popup-menu").hide()});$('.desk-menu a[menu="lock"]').on("click",function(){HROS.lock.show();$(".popup-menu").hide()});$('.desk-menu a[menu="logout"]').on("click",function(){HROS.base.logout();$(".popup-menu").hide()})}return $('.desk-menu a[menu="orderby"]').each(function(){$(this).children(".hook").hide();$(this).attr("orderby")==HROS.CONFIG.appXY.toLowerCase()&&$(this).children(".hook").show();$(".popup-menu").hide()}),$('.desk-menu a[menu="size"]').each(function(){$(this).children(".hook").hide();$(this).attr("size")==HROS.CONFIG.appSize&&$(this).children(".hook").show();$(".popup-menu").hide()}),TEMP.popupMenuDesk},hide:function(){$(".popup-menu").hide()}}}();HROS.searchbar=function(){return{init:function(){$("#pageletSearchInput").on("click",function(){return!1});$("#search-suggest .resultBox").on("click","li",function(){switch($(this).attr("type")){case"window":HROS.window.create($(this).attr("realappid"),$(this).attr("type"));break;case"widget":HROS.widget.create($(this).attr("realappid"),$(this).attr("type"))}});$("#search-suggest .openAppMarket a, #pageletSearchButton").on("click",function(){HROS.searchbar.openAppMarket($("#pageletSearchInput").val())});$("#pageletSearchInput").on("keydown",function(n){n.keyCode=="13"&&($("#search-suggest .resultBox .resultList a.selected").length==0&&$("#search-suggest > .resultList a.selected").length==0?HROS.searchbar.openAppMarket($(this).val()):$("#search-suggest .resultList a.selected").click())})},get:function(){let n="";searchFunc=setInterval(function(){let t=$("#pageletSearchInput").val();t!=""?($("#search-suggest").show(),t!=n&&(n=t,HROS.searchbar.getSuggest(t)),$("#search-bar").removeClass("above").addClass("above")):($("#search-suggest").hide(),$("#search-bar").removeClass("above"))},1e3);HROS.searchbar.set();Mousetrap.bind(["up"],function(){if($("#search-suggest .resultBox .resultList a.selected").length==0&&$("#search-suggest > .resultList a.selected").length==0)$("#search-suggest > .resultList:last a").addClass("selected");else if($("#search-suggest .resultBox .resultList:first a").hasClass("selected"))$("#search-suggest .resultList a").removeClass("selected");else if($("#search-suggest > .resultList a.selected").length!=0){let n=$("#search-suggest > .resultList a.selected").parent(".resultList").index();$("#search-suggest .resultList a").removeClass("selected");n>1?$("#search-suggest > .resultList:eq("+(n-1)+") a").addClass("selected"):$("#search-suggest .resultBox .resultList:last a").addClass("selected")}else{let n=$("#search-suggest .resultBox .resultList a.selected").parent(".resultList").index();$("#search-suggest .resultList a").removeClass("selected");n>0&&$("#search-suggest .resultBox .resultList:eq("+(n-1)+") a").addClass("selected")}return!1});Mousetrap.bind(["down"],function(){if($("#search-suggest .resultBox .resultList a.selected").length==0&&$("#search-suggest > .resultList a.selected").length==0)$("#search-suggest .resultBox .resultList").length==0?$("#search-suggest > .resultList:first a").addClass("selected"):$("#search-suggest .resultBox .resultList:first a").addClass("selected");else if($("#search-suggest > .resultList:last a").hasClass("selected"))$("#search-suggest .resultList a").removeClass("selected");else if($("#search-suggest .resultBox .resultList a.selected").length!=0){let n=$("#search-suggest .resultBox .resultList a.selected").parent(".resultList").index();$("#search-suggest .resultList a").removeClass("selected");n<$("#search-suggest .resultBox .resultList").length-1?$("#search-suggest .resultBox .resultList:eq("+(n+1)+") a").addClass("selected"):$("#search-suggest > .resultList:first a").addClass("selected")}else{let n=$("#search-suggest > .resultList a.selected").parent(".resultList").index();$("#search-suggest .resultList a").removeClass("selected");n<$("#search-suggest > .resultList").length-1?$("#search-suggest > .resultList:eq("+(n+1)+") a").addClass("selected"):$("#search-suggest .resultBox .resultList:first a").addClass("selected")}return!1});Mousetrap.bind(["backspace"],function(){})},set:function(){$("#search-bar").show();$("#search-suggest .resultList a").removeClass("selected");$("#pageletSearchInput").focus()},getSuggest:function(n){let t=[];$(HROS.VAR.dock).each(function(){$.inArray(this.type,["window","widget"])>=0&&t.push(this)});for(let n=1;n<=5;n++){let i=eval("HROS.VAR.desk"+n);$(i).each(function(){$.inArray(this.type,["window","widget"])>=0&&t.push(this)})}$(HROS.VAR.folder).each(function(){$(this.apps).each(function(){$.inArray(this.type,["window","widget"])>=0&&t.push(this)})});let i="";$(t).each(function(){this.name.indexOf(n)>=0&&(i+=suggestTemp({name:this.name,appid:this.appid,realappid:this.realappid,type:this.type}))});$("#search-suggest .resultBox").html(i);i==""?$("#search-suggest .resultBox").hide():$("#search-suggest .resultBox").show();HROS.searchbar.set()},openAppMarket:function(n){n!=""&&HROS.window.createTemp({appid:"hoorayos-yysc",title:"大资本市场",url:"/AppMarket/Index?searchText="+n,width:800,height:484,isflash:!1,refresh:!0});HROS.searchbar.hide()},hide:function(){typeof searchFunc!="undefined"&&clearInterval(searchFunc);$("#search-bar").removeClass("above");$("#search-bar, #search-suggest").hide();$("#pageletSearchInput").val("");$("#search-suggest .resultBox").html("");Mousetrap.unbind(["up","down"])}}}();HROS.startmenu=function(){return{init:function(){$("#startmenu-container").on("mousedown",function(n){n.preventDefault()});$("#startmenu-container .startmenu-nick a, #startmenu-container .startmenu-avatar img").on("click",function(){HROS.startmenu.openUser()});$("#startmenu-container .startmenu-exit a").on("click",function(){HROS.base.logout()});$("#startmenu-container .startmenu-lock").on("click",function(){HROS.lock.show()});$("#startmenu-container .startmenu-feedback").on("click",function(){HROS.window.createTemp({appid:"hoorayos-feedback",title:"反馈",url:"about:blank",width:700,height:500,isflash:!1})});$("#startmenu-container .startmenu a").on("click",function(){switch($(this).attr("class")){case"help":HROS.base.help()}})},getAvatar:function(){HROS.request.get("/desk/getuserface",{},function(n){n.IsSuccess&&$("#startmenu-container .startmenu-avatar img").attr("src",n.Model)})},openUser:function(){HROS.CONFIG.memberID!=0?HROS.window.createTemp({appid:"zhsz",title:"账号设置",url:"/usersetting/index",width:800,height:600}):HROS.base.login()},show:function(){HROS.popupMenu.hide();HROS.folderView.hide();HROS.searchbar.hide();$("#startmenu-container").css({top:"auto",left:"auto",right:"auto",bottom:"auto"}).show();switch(HROS.CONFIG.dockPos.toLowerCase()){case"top":$("#startmenu-container").css({top:$("#dock-container").height()-1,right:$("#dock-container").offset().left});break;case"left":$("#startmenu-container").css({bottom:$("#dock-container").offset().top,left:$("#dock-container").width()-1});break;case"right":$("#startmenu-container").css({bottom:$("#dock-container").offset().top,right:$("#dock-container").width()-1})}},hide:function(){$("#startmenu-container").hide()}}}();HROS.taskbar=function(){return{init:function(){$(window).on("resize",function(){HROS.taskbar.resize()});HROS.taskbar.click();HROS.taskbar.pageClick()},click:function(){$("#task-content-inner").on("click","a.task-item",function(){$(this).hasClass("task-item-current")?HROS.window.hide($(this).attr("appid")):HROS.window.show2top($(this).attr("appid"))}).on("contextmenu","a.task-item",function(n){$(".popup-menu").hide();$(".quick_view_container").remove();let t=HROS.popupMenu.task($(this)),i=$(window).width()-n.clientX<t.width()?n.clientX-t.width():n.clientX,r=n.clientY-t.height();return t.css({left:i,top:r}).show(),!1})},pageClick:function(){$("#task-next-btn").on("click",function(){if($(this).hasClass("disable")==!1){let i=$("#task-bar").width(),r=$("#task-content-inner .task-item").length*114,u=i-112,t=r-u,n=parseInt($("#task-content-inner").css("margin-left"))-114;n<=t*-1&&(n=t*-1,$("#task-next a").addClass("disable"));$("#task-pre a").removeClass("disable");$("#task-content-inner").animate({marginLeft:n},200)}});$("#task-pre-btn").on("click",function(){if($(this).hasClass("disable")==!1){let n=parseInt($("#task-content-inner").css("margin-left"))+114;n>=0&&(n=0,$("#task-pre a").addClass("disable"));$("#task-next a").removeClass("disable");$("#task-content-inner").animate({marginLeft:n},200)}})},resize:function(){$("#task-content-inner").removeClass("fl");HROS.CONFIG.dockPos.toLowerCase()=="left"?$("#task-bar").css({left:$("#dock-bar").width(),right:0}):HROS.CONFIG.dockPos.toLowerCase()=="right"?($("#task-bar").css({left:0,right:$("#dock-bar").width()}),$("#task-content-inner").addClass("fl")):$("#task-bar").css({left:0,right:0});let i=$("#task-bar").width(),n=$("#task-content-inner .task-item").length*114,t=i-112;$("#task-content-inner").css("width",n);n>=t?($("#task-next, #task-pre").show(),$("#task-content").css("width",t),$("#task-content-inner").addClass("fl").stop(!0,!1).animate({marginLeft:0},200),$("#task-next a").removeClass("disable"),$("#task-pre a").addClass("disable")):($("#task-next, #task-pre").hide(),$("#task-content").css("width","100%"),$("#task-content-inner").css({"margin-left":0,"margin-right":0}))}}}();HROS.wallpaper=function(){return{init:function(){HROS.wallpaper.get(function(){HROS.wallpaper.set()})},get:function(n){HROS.request.get("/desk/getwallpaper",{},function(t){if(t.IsSuccess){let i=t.Model;HROS.CONFIG.wallpaperState=i.WallpaperSource;switch(HROS.CONFIG.wallpaperState.toLowerCase()){case"upload":case"system":HROS.CONFIG.wallpaper=i.WallpaperUrl;HROS.CONFIG.wallpaperType=i.WallpaperMode;HROS.CONFIG.wallpaperWidth=i.WallpaperWidth;HROS.CONFIG.wallpaperHeight=i.WallpaperHeigth;break;case"bing":case"web":HROS.CONFIG.wallpaperType=i.WallpaperMode;HROS.CONFIG.wallpaper=i.WallpaperUrl}typeof n=="function"&&n&&n()}})},set:function(n){n=n||!0;n&&($("#zoomWallpaperGrid").attr("id","zoomWallpaperGrid-ready2remove").css("zIndex",-11),setTimeout(function(){$("#zoomWallpaperGrid-ready2remove").remove();$("#zoomWallpaperGrid").removeClass("radi")},1500));let t=$(window).width(),i=$(window).height();switch(HROS.CONFIG.wallpaperState.toLowerCase()){case"upload":case"system":let r,u;switch(HROS.CONFIG.wallpaperType.toLocaleLowerCase()){case"tile":n&&$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;top:0;left:0;height:100%;width:100%;background:#fff url('+HROS.CONFIG.wallpaper+') repeat"><\/div>');break;case"center":n&&$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;top:0;left:0;height:100%;width:100%;background:#fff url('+HROS.CONFIG.wallpaper+') no-repeat 50% 50%"><\/div>');break;case"fill":r=(i-HROS.CONFIG.wallpaperHeight)/2;u=(t-HROS.CONFIG.wallpaperWidth)/2;n?$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;left:0;top:0;overflow:hidden;height:'+i+"px;width:"+t+'px;background:#fff"><img id="zoomWallpaper" src="'+HROS.CONFIG.wallpaper+'" style="position:absolute;height:'+HROS.CONFIG.wallpaperHeight+"px;width:"+HROS.CONFIG.wallpaperWidth+"px;top:"+r+"px;left:"+u+'px"><div style="position:absolute;height:'+i+"px;width:"+t+'px;background:#fff;opacity:0;filter:alpha(opacity=0)"><\/div><\/div>'):($("#zoomWallpaperGrid, #zoomWallpaperGrid div").css({height:i+"px",width:t+"px"}),$("#zoomWallpaper").css({top:r+"px",left:u+"px"}));break;case"adapted":let f,e;HROS.CONFIG.wallpaperHeight/HROS.CONFIG.wallpaperWidth>i/t?(f=i,e=HROS.CONFIG.wallpaperWidth*(i/HROS.CONFIG.wallpaperHeight),r=0,u=(t-e)/2):HROS.CONFIG.wallpaperHeight/HROS.CONFIG.wallpaperWidth<i/t?(e=t,f=HROS.CONFIG.wallpaperHeight*(t/HROS.CONFIG.wallpaperWidth),u=0,r=(i-f)/2):(f=HROS.CONFIG.wallpaperHeight,e=HROS.CONFIG.wallpaperWidth,r=u=0);n?$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;left:0;top:0;overflow:hidden;height:'+i+"px;width:"+t+'px;background:#fff"><img id="zoomWallpaper" src="'+HROS.CONFIG.wallpaper+'" style="position:absolute;height:'+f+"px;width:"+e+"px;top:"+r+"px;left:"+u+'px"><div style="position:absolute;height:'+i+"px;width:"+t+'px;background:#fff;opacity:0;filter:alpha(opacity=0)"><\/div><\/div>'):($("#zoomWallpaperGrid, #zoomWallpaperGrid div").css({height:i+"px",width:t+"px"}),$("#zoomWallpaper").css({height:f+"px",width:e+"px",top:r+"px",left:u+"px"}));break;case"draw":n?$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;left:0;top:0;overflow:hidden;height:'+i+"px;width:"+t+'px;background:#fff"><img id="zoomWallpaper" src="'+HROS.CONFIG.wallpaper+'" style="position:absolute;height:'+i+"px;width:"+t+'px;top:0;left:0"><div style="position:absolute;height:'+i+"px;width:"+t+'px;background:#fff;opacity:0;filter:alpha(opacity=0)"><\/div><\/div>'):$("#zoomWallpaperGrid").css({height:i+"px",width:t+"px"}).children("#zoomWallpaper, div").css({height:i+"px",width:t+"px"})}break;case"bing":case"web":n&&$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;top:0;left:0;height:100%;width:100%;overflow:hidden"><div><\/div><iframe id="iframeWallpaper" frameborder="no" border="0" scrolling="no" class="iframeWallpaper" style="position:absolute;left:0;top:0;overflow:hidden;width:100%;height:100%" src="'+HROS.CONFIG.wallpaper+'"><\/iframe><\/div>')}},update:function(n,t){function i(){HROS.wallpaper.get(function(){HROS.wallpaper.set()})}HROS.base.checkLogin()?t===""?HROS.request.post("/desk/modifydisplaymodel",{wallPaperShowType:n},function(n){n.IsSuccess&&(NewCrm.msgbox.success("壁纸显示模式设置成功！"),i())}):HROS.request.post("/desk/modifywallpaper",{wallpaperId:t},function(n){n.IsSuccess&&(NewCrm.msgbox.success("壁纸设置成功！"),i())}):(NewCrm.msgbox.success("壁纸设置成功！"),i())}}}();HROS.widget=function(){return{init:function(){HROS.widget.handle();HROS.widget.move();HROS.widget.reduction();$("#desk").on("mouseover",".widget",function(){$(this).children(".move").show()}).on("mouseout",".widget",function(){$(this).children(".move").hide()})},createTemp:function(n){let t=n.appid==null?Date.parse(new Date):n.appid,i=!1;if($("#desk .widget").each(function(){if($(this).attr("appid")==t)return i=!0,!1}),!i){function i(n){$("#desk").append(widgetWindowTemp({width:n.width,height:n.height,type:"widgetTemp",id:"w_"+n.appid,appid:n.appid,realappid:n.appid,top:n.top,right:n.right,url:n.url,zIndex:HROS.CONFIG.widgetIndexid,issetbar:0}));HROS.CONFIG.widgetIndexid+=1}i({appid:t,url:n.url,width:n.width,height:n.height,top:n.top==null?0:n.top,right:n.right==null?0:n.right})}},create:function(n,t){t=t?"widget":t;let i=!1;if($("#desk .widget").each(function(){if($(this).attr("appid")==n)return i=!0,!1}),!i&&$("#d_"+n).attr("opening")!=1){$("#d_"+n).attr("opening",1);function i(i){let r="#w_"+i.appid;if(HROS.widget.checkCookie(n,t)){let n=$.parseJSON($.cookie("widgetState"+HROS.CONFIG.memberID));$(n).each(function(){this.appid==i.appid&&this.type==i.type.toLowerCase()&&(i.top=this.top,i.right=this.right)})}else HROS.widget.addCookie(i.realappid,i.type.toLowerCase(),0,0);TEMP.widgetTemp={title:i.title,width:i.width,height:i.height,type:i.type.toLowerCase(),id:"w_"+i.appid,appid:i.appid,realappid:i.realappid==0?i.appid:i.realappid,top:i.top?i.top:0,right:i.right?i.right:0,url:i.url,zIndex:HROS.CONFIG.widgetIndexid,issetbar:1,starcount:i.starcount};$("#desk").append(widgetWindowTemp(TEMP.widgetTemp));$(r).data("info",TEMP.widgetTemp);HROS.CONFIG.widgetIndexid+=1}HROS.request.get("/desk/createwindow",{id:n,type:t},function(t){if(t.IsSuccess){let r=t.Model;i({type:r.type,appid:r.appId,realappid:r.appId,title:r.name,imgsrc:r.icon,url:r.url,width:r.width,height:r.height,isresize:r.isResize,isopenmax:r.isOpenMax,issetbar:r.isSetbar,starcount:r.starCount});$("#d_"+n).attr("opening",0)}else NewCrm.msgbox.fail(t.Message)})}},reduction:function(){if(typeof $.cookie("widgetState"+HROS.CONFIG.memberID)!="undefined"){let n=$.parseJSON($.cookie("widgetState"+HROS.CONFIG.memberID));$(n).each(function(){HROS.widget.create(this.appid,this.type)})}},checkCookie:function(n,t){let r=$.cookie("widgetState"+HROS.CONFIG.memberID),i=!1;if(r){let u=$.parseJSON(r);return $(u).each(function(){this.appid==n&&this.type==t&&(i=!0)}),i}return i},addCookie:function(n,t,i,r){if(t=="widget"||t=="pwidget"){let f=$.cookie("widgetState"+HROS.CONFIG.memberID),u=f?$.parseJSON(f):null;HROS.widget.checkCookie(n,t)?$(u).each(function(){this.appid==n&&this.type==t&&(this.top=i,this.right=r)}):(u==null&&(u=[]),u.push({appid:n,type:t,top:i,right:r}));$.cookie("widgetState"+HROS.CONFIG.memberID,$.toJSON(u),{expires:95})}},removeCookie:function(n,t){if((t=="widget"||t=="pwidget")&&HROS.widget.checkCookie(n,t)){let i=$.parseJSON($.cookie("widgetState"+HROS.CONFIG.memberID));$(i).each(function(r){if(this.appid==n&&this.type==t)return i.splice(r,1),!1});$.cookie("widgetState"+HROS.CONFIG.memberID,$.toJSON(i),{expires:95})}},move:function(){$("#desk").on("mousedown",".widget .move",function(n){let t=$(this).parents(".widget");HROS.widget.show2top(t.attr("appid"));let e=n.clientX-t.offset().left,f=n.clientY-t.offset().top,i,r,u;$(document).on("mousemove",function(n){i=HROS.maskBox.desk();i.show();r=n.clientY-f<0?0:n.clientY-f;u=$(window).width()-t.width()-(n.clientX-e);t.css({top:r,right:u})}).on("mouseup",function(){$(this).off("mousemove").off("mouseup");typeof i!="undefined"&&i.hide();t.attr("type")!="widgetTemp"&&HROS.widget.addCookie(t.attr("appid"),t.attr("type"),r,u)})})},close:function(n){let t="#w_"+n;HROS.widget.removeCookie($(t).attr("appid"),$(t).attr("type"));$(t).html("").remove()},show2top:function(n){let t="#w_"+n;$(t).css("z-index",HROS.CONFIG.widgetIndexid);HROS.CONFIG.widgetIndexid+=1},handle:function(){$("#desk").on("mousedown",".widget a",function(n){n.preventDefault();n.stopPropagation()});$("#desk").on("click",".widget .ha-close",function(){let n=$(this).parents(".widget");HROS.widget.close(n.attr("appid"))}).on("click",".widget .ha-star",function(){let n=$(this).parents(".widget"),t=parseFloat(n.data("info").starcount).toFixed(1);$.dialog({title:"给“"+n.data("info").title+"”打分",width:250,id:"star",content:starDialogTemp({realappid:n.data("info").realappid,point:t,realpoint:t*20})})}).on("click",".widget .ha-share",function(){let n=$(this).parents(".widget");$.dialog({title:"分享应用",width:370,id:"share",content:shareDialogTemp({sinaweiboAppkey:HROS.CONFIG.sinaweiboAppkey==""?"1197457869":HROS.CONFIG.sinaweiboAppkey,tweiboAppkey:HROS.CONFIG.tweiboAppkey==""?"801356816":HROS.CONFIG.tweiboAppkey,title:"我正在使用 %23HoorayOS%23 中的 %23"+n.data("info").title+"%23 应用，很不错哦，推荐你也来试试！",url:HROS.CONFIG.website+"?run="+n.data("info").realappid+"%26type=widget"})})})}}}();HROS.window=function(){return{init:function(){HROS.window.handle();HROS.window.move();HROS.window.resize();$("#desk").on("click",".window-container .window-mask, .window-container .folder_body",function(){HROS.window.show2top($(this).parents(".window-container").attr("appid"),!0)});$("#desk").on("contextmenu",".window-container",function(){return!1});$("#desk").on("click",".folder_body li",function(){return!1}).on("contextmenu",".folder_body .appbtn",function(n){$(".popup-menu").hide();$(".quick_view_container").remove();switch($(this).attr("type")){case"app":case"window":case"widget":let n=HROS.popupMenu.app($(this));break;case"pwindow":case"pwidget":let n=HROS.popupMenu.papp($(this))}let t=$(window).width()-n.clientX<popupmenu.width()?n.clientX-popupmenu.width():n.clientX,i=$(window).height()-n.clientY<popupmenu.height()?n.clientY-popupmenu.height():n.clientY;return popupmenu.css({left:t,top:i}).show(),!1})},createTemp:function(n){let r="window",t=n.appid==null?Date.parse(new Date):n.appid,i=!1;if($("#task-content-inner a.task-item").each(function(){if($(this).attr("appid")==t)return i=!0,HROS.window.show2top($(this).attr("appid")),!1}),i){if(n.refresh){let i="#w_"+t;$(i).find("iframe").attr("src",n.url)}}else{function i(n){let t="#w_"+n.appid;$("#task-content-inner").prepend(taskTemp({type:n.type.toLowerCase(),id:"t_"+n.appid,appid:n.appid,realappid:n.appid,title:n.title,imgsrc:n.imgsrc}));HROS.taskbar.resize();TEMP.windowTemp={top:($(window).height()-n.height)/2<=0?0:($(window).height()-n.height)/2,left:($(window).width()-n.width)/2<=0?0:($(window).width()-n.width)/2,emptyW:$(window).width()-n.width,emptyH:$(window).height()-n.height,width:n.width,height:n.height,zIndex:HROS.CONFIG.windowIndexid,type:n.type.toLowerCase(),id:"w_"+n.appid,appid:n.appid,realappid:n.appid,title:n.title,url:n.url,imgsrc:n.imgsrc,isresize:n.isresize,isopenmax:n.isopenmax,istitlebar:n.isresize,istitlebarFullscreen:n.isresize?window.fullScreenApi.supportsFullScreen==!0?!0:!1:!1,issetbar:n.issetbar,isflash:n.isflash};$("#desk").append(windowTemp(TEMP.windowTemp));$(t).data("info",TEMP.windowTemp);HROS.CONFIG.windowIndexid+=1;HROS.window.setPos(!1);$(t+" iframe").on("load",function(){$(t+" .window-frame").children("div").eq(1).fadeOut()});HROS.window.show2top(n.appid)}i({type:r,appid:t,realappid:t,imgsrc:"/images/ui/default_icon.png",title:n.title,url:n.url,width:n.width,height:n.height,isresize:n.isresize,isopenmax:n.isopenmax,issetbar:!1,isflash:n.isflash})}},create:function(n,t){t=t==null?"window":t;let i,r=!1;if($("#task-content-inner a.task-item").each(function(){if($(this).attr("realappid")==n)return r=!0,i=$(this).attr("appid"),HROS.window.show2top(i),!1}),!r&&$("#d_"+n).attr("opening")!=1){$("#d_"+i).attr("opening",1);function r(n){let t="#w_"+n.appid,i=($(window).height()-n.height)/2<=0?0:($(window).height()-n.height)/2,r=($(window).width()-n.width)/2<=0?0:($(window).width()-n.width)/2;switch(n.type.toLowerCase()){case"app":case"pwindow":$("#task-content-inner").prepend(taskTemp({type:n.type.toLowerCase(),id:"t_"+n.appid,appid:n.appid,realappid:n.realappid,title:n.title,imgsrc:n.imgsrc}));HROS.taskbar.resize();TEMP.windowTemp={top:i,left:r,emptyW:$(window).width()-n.width,emptyH:$(window).height()-n.height,width:n.width,height:n.height,zIndex:HROS.CONFIG.windowIndexid,type:n.type.toLowerCase(),id:"w_"+n.appid,appid:n.appid,realappid:n.realappid,title:n.title,url:n.url,imgsrc:n.imgsrc,isresize:n.isresize,isopenmax:n.isresize?n.isopenmax:!1,istitlebar:n.isresize,istitlebarFullscreen:n.isresize?window.fullScreenApi.supportsFullScreen==!0?!0:!1:!1,issetbar:n.issetbar,isflash:n.isflash,starcount:n.starcount};$("#desk").append(windowTemp(TEMP.windowTemp));$(t).data("info",TEMP.windowTemp);HROS.CONFIG.windowIndexid+=1;HROS.window.setPos(!1);$(t+" iframe").on("load",function(){$(t+" .window-frame").children("div").fadeOut()});HROS.window.show2top(n.appid);break;case"folder":$("#task-content-inner").prepend(taskTemp({type:n.type.toLowerCase(),id:"t_"+n.appid,appid:n.appid,realappid:n.realappid,title:n.title,imgsrc:n.imgsrc}));HROS.taskbar.resize();TEMP.folderWindowTemp={top:i,left:r,emptyW:$(window).width()-n.width,emptyH:$(window).height()-n.height,width:n.width,height:n.height,zIndex:HROS.CONFIG.windowIndexid,type:n.type.toLowerCase(),id:"w_"+n.appid,appid:n.appid,realappid:n.realappid,title:n.title,imgsrc:n.imgsrc};$("#desk").append(folderWindowTemp(TEMP.folderWindowTemp));$(t).data("info",TEMP.folderWindowTemp);HROS.CONFIG.windowIndexid+=1;HROS.window.setPos(!1);let u="";if($(HROS.VAR.folder).each(function(){if(this.memberId==n.appid)return u=this.apps,!1}),u!=""){let n="";$(u).each(function(){n+=appbtnTemp({title:this.name,type:this.type,id:"d_"+this.memberId,appid:this.memberId,realappid:this.appId==0?this.memberId:this.appId,imgsrc:this.icon})});$(t).find(".folder_body").append(n)}HROS.window.show2top(n.appid);break;case"file":TEMP.fileWindowTemp={top:i,left:r,emptyW:$(window).width()-n.width,emptyH:$(window).height()-n.height,width:n.width,height:n.height,zIndex:HROS.CONFIG.windowIndexid,type:n.type.toLowerCase(),id:"w_"+n.appid,appid:n.appid,realappid:n.realappid,title:n.title,imgsrc:n.imgsrc};$("body").append(fileDownloadTemp(TEMP.fileWindowTemp))}}HROS.request.get("/desk/createwindow",{id:n,type:t},function(n){if(n.IsSuccess){let t=n.Model;r({type:t.type,appid:t.memberId,realappid:t.appId,title:t.name,imgsrc:t.icon,url:t.url,width:t.width,height:t.height,isresize:t.isResize,isopenmax:t.isOpenMax,issetbar:t.isSetbar,starcount:t.starCount});$("#d_"+i).attr("opening",0)}else NewCrm.msgbox.fail(n.Message)})}},setPos:function(n){n=n==null?!0:n;$("#desk .window-container").each(function(){let t=$(this).data("info"),u=$(window).width()-$(this).width(),f=$(window).height()-$(this).height(),i=t.left/t.emptyW*u>=u?u:t.left/t.emptyW*u;i=i<=0?0:i;let r=t.top/t.emptyH*f>=f?f:t.top/t.emptyH*f;r=r<=0?0:r;$(this).attr("state")!="hide"?$(this).stop(!0,!1).animate({left:i,top:r},n?500:0,function(){t.left=i;t.top=r;t.emptyW=$(window).width()-$(this).width();t.emptyH=$(window).height()-$(this).height()}):(t.left=i,t.top=r,t.emptyW=$(window).width()-$(this).width(),t.emptyH=$(window).height()-$(this).height())})},close:function(n){let t="#w_"+n,i="#t_"+n;$(t).removeData("info").html("").remove();$("#task-content-inner "+i).html("").remove();$("#task-content-inner").css("width",$("#task-content-inner .task-item").length*114);$("#task-bar, #nav-bar").removeClass("min-zIndex");HROS.taskbar.resize()},closeAll:function(){$("#desk .window-container").each(function(){HROS.window.close($(this).attr("appid"))})},hide:function(n){let t="#w_"+n,i="#t_"+n;$(t).css("left",-1e4).attr("state","hide");$("#task-content-inner "+i).removeClass("task-item-current");$(t).attr("ismax")==1&&$("#task-bar, #nav-bar").removeClass("min-zIndex")},hideAll:function(){$("#task-content-inner a.task-item").removeClass("task-item-current");$("#desk-"+HROS.CONFIG.desk).nextAll("div.window-container").css("left",-1e4).attr("state","hide")},max:function(n){HROS.window.show2top(n);let t="#w_"+n,i="#t_"+n;$(t+" .title-handle .ha-max").hide().next(".ha-revert").show();$(t).addClass("window-maximize").attr("ismax",1).animate({width:"100%",height:"100%",top:0,left:0},200);$("#task-bar, #nav-bar").addClass("min-zIndex")},revert:function(n){HROS.window.show2top(n);let i="#w_"+n,u="#t_"+n;$(i+" .title-handle .ha-revert").hide().prev(".ha-max").show();let r=$(i),t=r.data("info");r.removeClass("window-maximize").attr("ismax",0).animate({width:t.width,height:t.height,left:t.left,top:t.top},500);$("#task-bar, #nav-bar").removeClass("min-zIndex")},refresh:function(n){let t="#w_"+n,i="#t_"+n;$(t+"_iframe").length!=0?$(t+"_iframe").attr("src",$(t+"_iframe").attr("src")):HROS.window.updateFolder(n)},show2top:function(n,t){function f(){HROS.window.show2under();$("#task-content-inner "+e).addClass("task-item-current");$(r).attr("ismax")==1&&$("#task-bar, #nav-bar").addClass("min-zIndex");$(r).addClass("window-current").css({"z-index":HROS.CONFIG.windowIndexid,left:u.left,top:u.top}).attr("state","show");$(r).attr("ismax")==1&&$(r).css({left:0,top:0});$(r+" .window-mask").hide();$(r+" iframe").show();HROS.CONFIG.windowIndexid+=1}t=t==null?!1:t;let r="#w_"+n,e="#t_"+n,u=$(r).data("info"),i=[];if(t){let n=$(r).offset().left,u=n+$(r).width(),t=$(r).offset().top,e=t+$(r).height(),s=n+$(r).width()/2,h=t+$(r).height()/2,c=parseInt($(r).css("zIndex"));$("#desk .window-container:not("+r+")").each(function(){let r=$(this).offset().left,o=r+$(this).width(),f=$(this).offset().top,l=f+$(this).height(),v=r+$(this).width()/2,y=f+$(this).height()/2,p=parseInt($(this).css("zIndex")),a="";if(p>c&&((r>=n&&r<=u&&f>=t&&f<=e||r>=n&&r<=u&&l>=t&&l<=e||o>=n&&o<=u&&f>=t&&f<=e||o>=n&&o<=u&&l>=t&&l<=e)&&(a="x"),(r>=n&&r<=u&&f<t&&l>e||o>=n&&o<=u&&f<t&&l>e)&&(a="x"),(f>=t&&f<=e&&r<n&&o>u||l>=t&&l<=e&&r<n&&o>u)&&(a="y"),(r>=n&&r<=u&&l>=t&&l<=e&&o>=n&&o<=u&&l>=t&&l<=e||r>=n&&r<=u&&f>=t&&f<=e&&o>=n&&o<=u&&f>=t&&f<=e)&&(a="y")),a!=""){let c,p;a=="x"?v>s?(c="right",p=u-r+30):(c="left",p=o-n+30):y>h?(c="bottom",p=e-f+30):(c="top",p=l-t+30);i.push({id:$(this).attr("id"),direction:c,distance:p})}});let o=0;for(let n=0;n<i.length;n++){let t=$("#"+i[n].id).offset().left,r=$("#"+i[n].id).offset().top;i[n].direction=="left"?$("#"+i[n].id).delay(o).animate({left:t-i[n].distance},300).animate({left:t},300):i[n].direction=="right"?$("#"+i[n].id).delay(o).animate({left:t+i[n].distance},300).animate({left:t},300):i[n].direction=="top"?$("#"+i[n].id).delay(o).animate({top:r-i[n].distance},300).animate({top:r},300):i[n].direction=="bottom"&&$("#"+i[n].id).delay(o).animate({top:r+i[n].distance},300).animate({top:r},300);o+=100}setTimeout(f,o+100)}else f()},show2under:function(){$("#task-content-inner a.task-item").removeClass("task-item-current");$("#desk .window-container").removeClass("window-current");$("#desk .window-container .window-mask").show();$("#desk .window-container-flash iframe").hide()},updateFolder:function(n){let i="#w_"+n,r="#t_"+n,t="";if($(HROS.VAR.folder).each(function(){if(this.memberId==parseInt(n))return t=this.apps,!1}),t!=null){let n="";for(let i=0;i<t.length;i++)n+=appbtnTemp({top:0,left:0,title:t[i].name,type:t[i].type,id:"d_"+t[i].memberId,appid:t[i].memberId,realappid:t[i].appId,imgsrc:t[i].icon});$(i).find(".folder_body").html("").append(n).on("contextmenu",".appbtn",function(n){$(".popup-menu").hide();$(".quick_view_container").remove();TEMP.AppRight=HROS.popupMenu.app($(this));let t=$(window).width()-n.clientX<TEMP.AppRight.width()?n.clientX-TEMP.AppRight.width():n.clientX,i=$(window).height()-n.clientY<TEMP.AppRight.height()?n.clientY-TEMP.AppRight.height():n.clientY;return TEMP.AppRight.css({left:t,top:i}).show(),!1})}},handle:function(){$("#desk").on("mousedown",".window-container .title-bar .title-handle a",function(n){n.preventDefault();n.stopPropagation()});$("#desk").on("dblclick",".window-container .title-bar",function(){let n=$(this).parents(".window-container");n.find(".ha-max").is(":hidden")?n.find(".ha-revert").click():n.find(".ha-max").click()}).on("click",".window-container .ha-hide",function(){let n=$(this).parents(".window-container");HROS.window.hide(n.attr("appid"))}).on("click",".window-container .ha-max",function(){let n=$(this).parents(".window-container");HROS.window.max(n.attr("appid"))}).on("click",".window-container .ha-revert",function(){let n=$(this).parents(".window-container");HROS.window.revert(n.attr("appid"))}).on("click",".window-container .ha-fullscreen",function(){let n=$(this).parents(".window-container");window.fullScreenApi.requestFullScreen(document.getElementById(n.find("iframe").attr("id")))}).on("click",".window-container .ha-close",function(){let n=$(this).parents(".window-container");HROS.window.close(n.attr("appid"))}).on("click",".window-container .refresh",function(){let n=$(this).parents(".window-container");HROS.window.refresh(n.attr("appid"))}).on("click",".window-container .detail",function(){let n=$(this).parents(".window-container");n.attr("realappid")!==0?HROS.window.createTemp({appid:"hoorayos-yysc",title:"应用市场",url:"/AppMarket/AppDetail?appId="+n.attr("realappid"),width:800,height:484,isflash:!1,refresh:!0}):NewCrm.msgbox.info("对不起，该应用没有任何详细介绍")}).on("click",".window-container .star",function(){let n=$(this).parents(".window-container"),t=parseFloat(n.data("info").starcount).toFixed(1);$.dialog({title:"给“"+n.data("info").title+"”打分",width:250,id:"star",content:starDialogTemp({realappid:n.data("info").realappid,point:t,realpoint:t*20})})}).on("click",".window-container .share",function(){let n=$(this).parents(".window-container");$.dialog({title:"分享应用",width:370,id:"share",content:shareDialogTemp({sinaweiboAppkey:HROS.CONFIG.sinaweiboAppkey==""?"1197457869":HROS.CONFIG.sinaweiboAppkey,tweiboAppkey:HROS.CONFIG.tweiboAppkey==""?"801356816":HROS.CONFIG.tweiboAppkey,title:"我正在使用 %23HoorayOS%23 中的 %23"+n.data("info").title+"%23 应用，很不错哦，推荐你也来试试！",url:HROS.CONFIG.website+"?run="+n.data("info").realappid+"%26type=app"})})}).on("contextmenu",".window-container",function(){return $(".popup-menu").hide(),$(".quick_view_container").remove(),!1})},move:function(){$("#desk").on("mousedown",".window-container .title-bar",function(n){let t=$(this).parents(".window-container");if(t.attr("ismax")==1)return!1;HROS.window.show2top(t.attr("appid"));let u=t.data("info"),f=n.clientX-t.offset().left,r=n.clientY-t.offset().top,i;$(document).on("mousemove",function(n){i=HROS.maskBox.desk();i.show();t.find(".ha-revert").hide().prev(".ha-max").show();t.css({width:u.width,height:u.height,left:n.clientX-f,top:n.clientY-r<=10?0:n.clientY-r>=i.height()-30?i.height()-30:n.clientY-r});t.data("info").left=t.offset().left;t.data("info").top=t.offset().top}).on("mouseup",function(){$(this).off("mousemove").off("mouseup");typeof i!="undefined"&&i.hide()})})},resize:function(){$("#desk").on("mousedown",".window-container .window-resize",function(n){let t=$(this).parents(".window-container"),o=$(this),e,i=n.clientX,r=n.clientY,u=t.width(),f=t.height();$(document).on("mousemove",function(n){e=HROS.maskBox.desk();e.show();let s=n.clientX<=10?0:n.clientX>=e.width()-12?e.width()-2:n.clientX,h=n.clientY<=10?0:n.clientY>=e.height()-12?e.height():n.clientY;switch(o.attr("resize")){case"t":f+r-h>HROS.CONFIG.windowMinHeight?t.css({height:f+r-h,top:h}):t.css({height:HROS.CONFIG.windowMinHeight});break;case"r":u-i+s>HROS.CONFIG.windowMinWidth?t.css({width:u-i+s}):t.css({width:HROS.CONFIG.windowMinWidth});break;case"b":f-r+h>HROS.CONFIG.windowMinHeight?t.css({height:f-r+h}):t.css({height:HROS.CONFIG.windowMinHeight});break;case"l":u+i-s>HROS.CONFIG.windowMinWidth?t.css({width:u+i-s,left:s}):t.css({width:HROS.CONFIG.windowMinWidth});break;case"rt":f+r-h>HROS.CONFIG.windowMinHeight?t.css({height:f+r-h,top:h}):t.css({height:HROS.CONFIG.windowMinHeight});u-i+s>HROS.CONFIG.windowMinWidth?t.css({width:u-i+s}):t.css({width:HROS.CONFIG.windowMinWidth});break;case"rb":u-i+s>HROS.CONFIG.windowMinWidth?t.css({width:u-i+s}):t.css({width:HROS.CONFIG.windowMinWidth});f-r+h>HROS.CONFIG.windowMinHeight?t.css({height:f-r+h}):t.css({height:HROS.CONFIG.windowMinHeight});break;case"lt":u+i-s>HROS.CONFIG.windowMinWidth?t.css({width:u+i-s,left:s}):t.css({width:HROS.CONFIG.windowMinWidth});f+r-h>HROS.CONFIG.windowMinHeight?t.css({height:f+r-h,top:h}):t.css({height:HROS.CONFIG.windowMinHeight});break;case"lb":u+i-s>HROS.CONFIG.windowMinWidth?t.css({width:u+i-s,left:s}):t.css({width:HROS.CONFIG.windowMinWidth});f-r+h>HROS.CONFIG.windowMinHeight?t.css({height:f-r+h}):t.css({height:HROS.CONFIG.windowMinHeight})}}).on("mouseup",function(){typeof e!="undefined"&&e.hide();t.data("info").width=t.width();t.data("info").height=t.height();t.data("info").left=t.offset().left;t.data("info").top=t.offset().top;t.data("info").emptyW=$(window).width()-t.width();t.data("info").emptyH=$(window).height()-t.height();$(this).off("mousemove").off("mouseup")})})}}}();HROS.zoom=function(){return{init:function(){$("body").append('<div id="zoombox"><\/div>');swfobject.embedSWF("/js/hooray/zoom.swf?onchange=HROS.zoom.check","zoombox","10","10","6.0.0","expressInstall.swf","",{allowScriptAccess:"always",wmode:"transparent",scale:"noScale"},{id:"accessory_zoom",name:"zoom_detect"})},check:function(n){let t=n.scale,i=t>1?"放大":"缩小";t!=1?(HROS.VAR.zoomLevel=t,$("#zoom-tip").show().find("span").text("您的浏览器目前处于"+i+"状态，会导致显示不正常，您可以键盘按“ctrl+数字0”组合键恢复初始状态！")):t!=HROS.VAR.zoomLevel&&$("#zoom-tip").fadeOut()},close:function(){$("#zoom-tip").remove()}}}();HROS.signalR=function(){return{init:function(){let n=(new signalR.HubConnectionBuilder).withUrl("/hubs?userId="+HROS.CONFIG.memberID).configureLogging(signalR.LogLevel.Information).build();n.on("Message",n=>{let i=JSON.parse(n),t=window.Notification||window.mozNotification||window.webKitNotification;if(t&&t.permission!=="granted")t.requestPermission(function(n){t.permission!==n&&(t.permission=n)});else if(t&&t.permission==="granted")let n={dir:"rtl",lang:"zh-CN",body:i.Content},r=new t(i.Title,n)});n.start().then(()=>{n.invoke("RegisterConnection").then(n=>{connectionId=n}).catch(n=>NewCrm.msgbox.fail("推送服务注册失败:"+n))}).catch(()=>NewCrm.msgbox.fail("推送服务连接失败"));HROS.signalR.instance=n},stop:function(n){HROS.signalR.instance.stop();HROS.signalR.instance.onclose(function(){n&&n&&n()})}}}();HROS.request=function(){return{get:function(n,t,i){return HROS.request.internalRequset(n,"GET",t,i)},post:function(n,t,i){if(HROS.request.state==="posting")NewCrm.msgbox.fail(HROS.CONFIG.postOnce);else return HROS.request.internalRequset(n,"POST",t,i)},internalRequset:function(n,t,i,r){let u=$.cookie("User");u||HROS.request.noCheckUrls.includes(n.toLowerCase())?$.ajax({type:t,url:n,data:Object.keys(i).length?i:null,beforeSend:function(){NewCrm.msgbox.loading(HROS.CONFIG.loadingPrompt);HROS.request.state="posting"},success:function(n){NewCrm.msgbox.close();r&&(HROS.request.state=n.IsSuccess?"posted":"normal",r&&r(n))},error:function(n){NewCrm.msgbox.fail(n.statusText);HROS.request.state="normal";n.abort()}}):NewCrm.msgbox.fail(HROS.CONFIG.timeOutPrompt)},noCheckUrls:function(){return["/desk/landing"]}()}}();window.HROS=HROS(function(n,t,i){function h(t,i){var u=(n(window).width()-t.outerWidth())/2,r=(n(window).height()-t.outerHeight())/2,r=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(r>0?r:0);t.css({left:u}).animate({top:r},{duration:i,queue:!1})}function s(){if(n("#Validform_msg").length!==0)return!1;f=n('<div id="Validform_msg"><div class="Validform_title">'+u.tit+'<a class="Validform_close" href="javascript:void(0);">&chi;<\/a><\/div><div class="Validform_info"><\/div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"><\/iframe><\/div><\/div>').appendTo("body");f.find("a.Validform_close").click(function(){return f.hide(),o=!0,e&&e.focus().addClass("Validform_error"),!1}).focus(function(){this.blur()});n(window).bind("scroll resize",function(){o||h(f,400)})}var e=null,f=null,o=!0,u={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！",n:"请填写数字！","n6-16":"请填写6到16位数字！",s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"通过信息验证！",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"},r;n.Tipmsg=u;r=function(t,u,f){var u=n.extend({},r.defaults,u),e;if(u.datatype&&n.extend(r.util.dataType,u.datatype),e=this,e.tipmsg={w:{}},e.forms=t,e.objects=[],f===!0)return!1;t.each(function(){var f,t;if(this.validform_inited=="inited")return!0;this.validform_inited="inited";f=this;f.settings=n.extend({},u);t=n(f);f.validform_status="normal";t.data("tipmsg",e.tipmsg);t.delegate("[datatype]","blur",function(){var n=arguments[1];r.util.check.call(this,t,n)});t.delegate(":text","keypress",function(n){n.keyCode==13&&t.find(":submit").length==0&&t.submit()});r.util.enhance.call(t,f.settings.tiptype,f.settings.usePlugin,f.settings.tipSweep);f.settings.btnSubmit&&t.find(f.settings.btnSubmit).bind("click",function(){return t.trigger("submit"),!1});t.submit(function(){var n=r.util.submitForm.call(t,f.settings);return n===i&&(n=!0),n});t.find("[type='reset']").add(t.find(f.settings.btnReset)).bind("click",function(){r.util.resetForm.call(t)})});(u.tiptype==1||(u.tiptype==2||u.tiptype==3)&&u.ajaxPost)&&s()};r.defaults={tiptype:1,tipSweep:!1,showAllError:!1,postonce:!1,ajaxPost:!1};r.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},toString:Object.prototype.toString,isEmpty:function(t){return t===""||t===n.trim(this.attr("tip"))},getValue:function(t){var u,f=this;return t.is(":radio")?(u=f.find(":radio[name='"+t.attr("name")+"']:checked").val(),u=u===i?"":u):t.is(":checkbox")?(u="",f.find(":checkbox[name='"+t.attr("name")+"']:checked").each(function(){u+=n(this).val()+","}),u=u===i?"":u):u=t.val(),u=n.trim(u),r.util.isEmpty.call(t,u)?"":u},enhance:function(t,i,u,f){var e=this;e.find("[datatype]").each(function(){t==2?n(this).parent().next().find(".Validform_checktip").length==0&&(n(this).parent().next().append("<span class='Validform_checktip' />"),n(this).siblings(".Validform_checktip").remove()):(t==3||t==4)&&n(this).siblings(".Validform_checktip").length==0&&(n(this).parent().append("<span class='Validform_checktip' />"),n(this).parent().next().find(".Validform_checktip").remove())});e.find("input[recheck]").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";var t=n(this),i=e.find("input[name='"+n(this).attr("recheck")+"']");i.bind("keyup",function(){if(i.val()==t.val()&&i.val()!=""){if(i.attr("tip")&&i.attr("tip")==i.val())return!1;t.trigger("blur")}}).bind("blur",function(){if(i.val()!=t.val()&&t.val()!=""){if(t.attr("tip")&&t.attr("tip")==t.val())return!1;t.trigger("blur")}})});e.find("[tip]").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";var i=n(this).attr("tip"),t=n(this).attr("altercss");n(this).focus(function(){n(this).val()==i&&(n(this).val(""),t&&n(this).removeClass(t))}).blur(function(){n.trim(n(this).val())===""&&(n(this).val(i),t&&n(this).addClass(t))})});e.find(":checkbox[datatype],:radio[datatype]").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";var t=n(this),i=t.attr("name");e.find("[name='"+i+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){t.trigger("blur")},0)})});e.find("select[datatype][multiple]").bind("click",function(){var t=n(this);setTimeout(function(){t.trigger("blur")},0)});r.util.usePlugin.call(e,i,t,u,f)},usePlugin:function(t,i,u,f){var e=this,t=t||{},o;if(e.find("input[plugin='swfupload']").length&&typeof swfuploadhandler!="undefined"&&(o={custom_settings:{form:e,showmsg:function(n,t){r.util.showmsg.call(e,n,i,{obj:e.find("input[plugin='swfupload']"),type:t,sweep:u})}}},o=n.extend(!0,{},t.swfupload,o),e.find("input[plugin='swfupload']").each(function(t){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";n(this).val("");swfuploadhandler.init(o,t)})),e.find("input[plugin='datepicker']").length&&n.fn.datePicker&&(t.datepicker=t.datepicker||{},t.datepicker.format&&(Date.format=t.datepicker.format,delete t.datepicker.format),t.datepicker.firstDayOfWeek&&(Date.firstDayOfWeek=t.datepicker.firstDayOfWeek,delete t.datepicker.firstDayOfWeek),e.find("input[plugin='datepicker']").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";t.datepicker.callback&&n(this).bind("dateSelected",function(){var i=new Date(n.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);t.datepicker.callback(i,this)});n(this).datePicker(t.datepicker)})),e.find("input[plugin*='passwordStrength']").length&&n.fn.passwordStrength&&(t.passwordstrength=t.passwordstrength||{},t.passwordstrength.showmsg=function(n,t,f){r.util.showmsg.call(e,t,i,{obj:n,type:f,sweep:u})},e.find("input[plugin='passwordStrength']").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";n(this).passwordStrength(t.passwordstrength)})),f!="addRule"&&t.jqtransform&&n.fn.jqTransSelect){if(e[0].jqTransSelected=="true")return;e[0].jqTransSelected="true";var s=function(t){var i=n(".jqTransformSelectWrapper ul:visible");i.each(function(){var i=n(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);t&&i.oLabel&&i.oLabel.get(0)==t.get(0)||n(this).hide()})},h=function(t){n(t.target).parents(".jqTransformSelectWrapper").length===0&&s(n(t.target))},c=function(){n(document).mousedown(h)};t.jqtransform.selector?(e.find(t.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton(),e.find(t.jqtransform.selector).filter("input:text, input:password").jqTransInputText(),e.find(t.jqtransform.selector).filter("input:checkbox").jqTransCheckBox(),e.find(t.jqtransform.selector).filter("input:radio").jqTransRadio(),e.find(t.jqtransform.selector).filter("textarea").jqTransTextarea(),e.find(t.jqtransform.selector).filter("select").length>0&&(e.find(t.jqtransform.selector).filter("select").jqTransSelect(),c())):e.jqTransform();e.find(".jqTransformSelectWrapper").find("li a").click(function(){n(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(n){var r=this,f=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g,t,i=n[0].settings.label||".Validform_label";if(i=r.siblings(i).eq(0).text()||r.siblings().find(i).eq(0).text()||r.parent().siblings(i).eq(0).text()||r.parent().siblings().find(i).eq(0).text(),i=i.replace(/\s(?![a-zA-Z])/g,"").match(f),i=i?i.join(""):[""],f=/\{(.+)\|(.+)\}/,t=n.data("tipmsg").s||u.s,i!=""){if(t=t.replace(/\{0\|(.+)\}/,i),r.attr("recheck"))return t=t.replace(/\{(.+)\}/,""),r.attr("nullmsg",t),t}else t=r.is(":checkbox,:radio,select")?t.replace(/\{0\|(.+)\}/,""):t.replace(/\{0\|(.+)\}/,"$1");return t=r.is(":checkbox,:radio,select")?t.replace(f,"$2"):t.replace(f,"$1"),r.attr("nullmsg",t),t},getErrormsg:function(t,i,r){var f=i.match(/^(.+?)((\d+)-(\d+))?$/),o,s,e;if(r=="recheck")return t.data("tipmsg").reck||u.reck;if(s=n.extend({},u.w,t.data("tipmsg").w),f[0]in s)return t.data("tipmsg").w[f[0]]||u.w[f[0]];for(e in s)if(e.indexOf(f[1])!=-1&&/^(.+?)(\d+)-(\d+)$/.test(e))return o=(t.data("tipmsg").w[e]||u.w[e]).replace(/(.*?)\d+(.+?)\d+(.*)/,"$1"+f[3]+"$2"+f[4]+"$3"),t.data("tipmsg").w[f[0]]=o,o;return t.data("tipmsg").def||u.def},_regcheck:function(n,t,f,e){var e=e,s=null,o=!1,a=/\/.+\//g,p=/^(.+?)(\d+)-(\d+)$/,v=3,h,c,y,b;if(a.test(n)){var k=n.match(a)[0].slice(1,-1),w=n.replace(a,""),d=RegExp(k,w);o=d.test(t)}else if(r.util.toString.call(r.util.dataType[n])=="[object Function]")o=r.util.dataType[n](t,f,e,r.util.dataType),o===!0||o===i?o=!0:(s=o,o=!1);else{if(!(n in r.util.dataType))if(h=n.match(p),h){for(y in r.util.dataType)if((c=y.match(p),c)&&h[1]===c[1]){var l=r.util.dataType[y].toString(),w=l.match(/\/[mgi]*/g)[1].replace("/",""),g=new RegExp("\\{"+c[2]+","+c[3]+"\\}","g");l=l.replace(/\/[mgi]*/g,"/").replace(g,"{"+h[2]+","+h[3]+"}").replace(/^\//,"").replace(/\/$/,"");r.util.dataType[n]=new RegExp(l,w);break}}else o=!1,s=e.data("tipmsg").undef||u.undef;r.util.toString.call(r.util.dataType[n])=="[object RegExp]"&&(o=r.util.dataType[n].test(t))}return o?(v=2,s=f.attr("sucmsg")||e.data("tipmsg").r||u.r,f.attr("recheck")&&(b=e.find("input[name='"+f.attr("recheck")+"']:first"),t!=b.val()&&(o=!1,v=3,s=f.attr("errormsg")||r.util.getErrormsg.call(f,e,n,"recheck")))):(s=s||f.attr("errormsg")||r.util.getErrormsg.call(f,e,n),r.util.isEmpty.call(f,t)&&(s=f.attr("nullmsg")||r.util.getNullmsg.call(f,e))),{passed:o,type:v,info:s}},regcheck:function(n,t,i){var h=this,s=null,f,e,u,o;if(i.attr("ignore")==="ignore"&&r.util.isEmpty.call(i,t))return i.data("cked")&&(s=""),{passed:!0,type:4,info:s};for(i.data("cked","cked"),f=r.util.parseDatatype(n),u=0;u<f.length;u++){for(o=0;o<f[u].length;o++)if(e=r.util._regcheck(f[u][o],t,i,h),!e.passed)break;if(e.passed)break}return e},parseDatatype:function(n){var u=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,f=n.match(u),e=n.replace(u,"").replace(/\s*/g,"").split(""),t=[],r=0,i;for(t[0]=[],t[0].push(f[0]),i=0;i<e.length;i++)e[i]=="|"&&(r++,t[r]=[]),t[r].push(f[i+1]);return t},showmsg:function(t,u,e,s){if(t!=i&&(s!="bycheck"||!e.sweep||(!e.obj||e.obj.is(".Validform_error"))&&typeof u!="function")){if(n.extend(e,{curform:this}),typeof u=="function"){u(t,e,r.util.cssctl);return}(u==1||s=="byajax"&&u!=4)&&f.find(".Validform_info").html(t);(u==1&&s!="bycheck"&&e.type!=2||s=="byajax"&&u!=4)&&(o=!1,f.find(".iframe").css("height",f.outerHeight()),f.show(),h(f,100));u==2&&e.obj&&(e.obj.parent().next().find(".Validform_checktip").html(t),r.util.cssctl(e.obj.parent().next().find(".Validform_checktip"),e.type));(u==3||u==4)&&e.obj&&(e.obj.siblings(".Validform_checktip").html(t),r.util.cssctl(e.obj.siblings(".Validform_checktip"),e.type))}},cssctl:function(n,t){switch(t){case 1:n.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:n.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");break;case 4:n.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:n.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")}},check:function(t,i,f){var s=t[0].settings,i=i||"",l=r.util.getValue.call(t,n(this)),a,h,v,o,c,y,p,w;if(s.ignoreHidden&&n(this).is(":hidden")||n(this).data("dataIgnore")==="dataIgnore")return!0;if(s.dragonfly&&!n(this).data("cked")&&r.util.isEmpty.call(n(this),l)&&n(this).attr("ignore")!="ignore")return!1;if(a=r.util.regcheck.call(t,n(this).attr("datatype"),l,n(this)),l==this.validform_lastval&&!n(this).attr("recheck")&&i=="")return a.passed?!0:!1;if(this.validform_lastval=l,e=h=n(this),!a.passed)return r.util.abort.call(h[0]),f||(r.util.showmsg.call(t,a.info,s.tiptype,{obj:n(this),type:a.type,sweep:s.tipSweep},"bycheck"),s.tipSweep||h.addClass("Validform_error")),!1;if(v=n(this).attr("ajaxurl"),!v||r.util.isEmpty.call(n(this),l)||f)v&&r.util.isEmpty.call(n(this),l)&&(r.util.abort.call(h[0]),h[0].validform_valid="true");else return(o=n(this),o[0].validform_subpost=i=="postform"?"postform":"",o[0].validform_valid==="posting"&&l==o[0].validform_ckvalue)?"ajax":(o[0].validform_valid="posting",o[0].validform_ckvalue=l,r.util.showmsg.call(t,t.data("tipmsg").c||u.c,s.tiptype,{obj:o,type:1,sweep:s.tipSweep},"bycheck"),r.util.abort.call(h[0]),c=n.extend(!0,{},s.ajaxurl||{}),y={type:"POST",cache:!1,url:v,data:"param="+encodeURIComponent(l)+"&name="+encodeURIComponent(n(this).attr("name")),success:function(i){n.trim(i.status)==="y"?(o[0].validform_valid="true",i.info&&o.attr("sucmsg",i.info),r.util.showmsg.call(t,o.attr("sucmsg")||t.data("tipmsg").r||u.r,s.tiptype,{obj:o,type:2,sweep:s.tipSweep},"bycheck"),h.removeClass("Validform_error"),e=null,o[0].validform_subpost=="postform"&&t.trigger("submit")):(o[0].validform_valid=i.info,r.util.showmsg.call(t,i.info,s.tiptype,{obj:o,type:3,sweep:s.tipSweep}),h.addClass("Validform_error"));h[0].validform_ajax=null},error:function(n){if(n.status=="200")return n.responseText=="y"?c.success({status:"y"}):c.success({status:"n",info:n.responseText}),!1;if(n.statusText!=="abort"){var i="status: "+n.status+"; statusText: "+n.statusText;r.util.showmsg.call(t,i,s.tiptype,{obj:o,type:3,sweep:s.tipSweep});h.addClass("Validform_error")}return o[0].validform_valid=n.statusText,h[0].validform_ajax=null,!0}},c.success&&(p=c.success,c.success=function(n){y.success(n);p(n,o)}),c.error&&(w=c.error,c.error=function(n){y.error(n)&&w(n,o)}),c=n.extend({},y,c,{dataType:"json"}),h[0].validform_ajax=n.ajax(c),"ajax");return f||(r.util.showmsg.call(t,a.info,s.tiptype,{obj:n(this),type:a.type,sweep:s.tipSweep},"bycheck"),h.removeClass("Validform_error")),e=null,!0},submitForm:function(t,i,f,o,s){var h=this,v,l,a,y,c,p,w,b,f;if(h[0].validform_status==="posting"||t.postonce&&h[0].validform_status==="posted")return t.postonceTip(),!1;if(v=t.beforeCheck&&t.beforeCheck(h),v===!1)return!1;if(l=!0,h.find("[datatype]").each(function(){var o,f,s;if(i)return!1;if(t.ignoreHidden&&n(this).is(":hidden")||n(this).data("dataIgnore")==="dataIgnore")return!0;if(o=r.util.getValue.call(h,n(this)),e=f=n(this),a=r.util.regcheck.call(h,n(this).attr("datatype"),o,n(this)),!a.passed)return(r.util.showmsg.call(h,a.info,t.tiptype,{obj:n(this),type:a.type,sweep:t.tipSweep}),f.addClass("Validform_error"),!t.showAllError)?(f.focus(),l=!1,!1):(l&&(l=!1),!0);if(n(this).attr("ajaxurl")&&!r.util.isEmpty.call(n(this),o)){if(this.validform_valid!=="true")return(s=n(this),r.util.showmsg.call(h,h.data("tipmsg").v||u.v,t.tiptype,{obj:s,type:3,sweep:t.tipSweep}),f.addClass("Validform_error"),s.trigger("blur",["postform"]),!t.showAllError)?(l=!1,!1):(l&&(l=!1),!0)}else n(this).attr("ajaxurl")&&r.util.isEmpty.call(n(this),o)&&(r.util.abort.call(this),this.validform_valid="true");r.util.showmsg.call(h,a.info,t.tiptype,{obj:n(this),type:a.type,sweep:t.tipSweep});f.removeClass("Validform_error");e=null}),t.showAllError&&h.find(".Validform_error:first").focus(),l){if(y=t.beforeSubmit&&t.beforeSubmit(h),y===!1)return!1;if(h[0].validform_status="posting",t.ajaxPost||o==="ajaxPost")c=n.extend(!0,{},t.ajaxpost||{}),c.url=f||c.url||t.url||h.attr("action"),r.util.showmsg.call(h,h.data("tipmsg").p||u.p,t.tiptype,{obj:h,type:1,sweep:t.tipSweep},"byajax"),s?c.async=!1:s===!1&&(c.async=!0),c.success&&(p=c.success,c.success=function(i){t.callback&&t.callback(i);h[0].validform_ajax=null;h[0].validform_status=n.trim(i.status)==="y"?"posted":"normal";p(i,h)}),c.error&&(w=c.error,c.error=function(n){t.callback&&t.callback(n);h[0].validform_status="normal";h[0].validform_ajax=null;w(n,h)}),b={type:"POST",async:!0,data:h.serializeArray(),success:function(i){n.trim(i.status)==="y"?(h[0].validform_status="posted",r.util.showmsg.call(h,i.info,t.tiptype,{obj:h,type:2,sweep:t.tipSweep},"byajax")):(h[0].validform_status="normal",r.util.showmsg.call(h,i.info,t.tiptype,{obj:h,type:3,sweep:t.tipSweep},"byajax"));t.callback&&t.callback(i);h[0].validform_ajax=null},error:function(n){var i="status: "+n.status+"; statusText: "+n.statusText;r.util.showmsg.call(h,i,t.tiptype,{obj:h,type:3,sweep:t.tipSweep},"byajax");t.callback&&t.callback(n);h[0].validform_status="normal";h[0].validform_ajax=null}},c=n.extend({},b,c,{dataType:"json"}),h[0].validform_ajax=n.ajax(c);else return t.postonce||(h[0].validform_status="normal"),f=f||t.url,f&&h.attr("action",f),t.callback&&t.callback(h)}return!1},resetForm:function(){var n=this;n.each(function(){this.reset&&this.reset();this.validform_status="normal"});n.find(".Validform_right").text("");n.find(".passwordStrength").children().removeClass("bgStrength");n.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading");n.find(".Validform_error").removeClass("Validform_error");n.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null});n.eq(0).find("input:first").focus()},abort:function(){this.validform_ajax&&this.validform_ajax.abort()}};n.Datatype=r.util.dataType;r.prototype={dataType:r.util.dataType,eq:function(t){var i=this;return t>=i.forms.length?null:(t in i.objects||(i.objects[t]=new r(n(i.forms[t]).get(),{},!0)),i.objects[t])},resetStatus:function(){var t=this;return n(t.forms).each(function(){this.validform_status="normal"}),this},setStatus:function(t){var i=this;return n(i.forms).each(function(){this.validform_status=t||"posting"}),this},getStatus:function(){var t=this;return n(t.forms)[0].validform_status},ignore:function(t){var i=this,t=t||"[datatype]";return n(i.forms).find(t).each(function(){n(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")}),this},unignore:function(t){var i=this,t=t||"[datatype]";return n(i.forms).find(t).each(function(){n(this).removeData("dataIgnore")}),this},addRule:function(t){for(var e,u,f=this,t=t||[],i=0;i<t.length;i++){e=n(f.forms).find(t[i].ele);for(u in t[i])u!=="ele"&&e.attr(u,t[i][u])}return n(f.forms).each(function(){var t=n(this);r.util.enhance.call(t,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep,"addRule")}),this},ajaxPost:function(t,i,u){var f=this;return n(f.forms).each(function(){(this.settings.tiptype==1||this.settings.tiptype==2||this.settings.tiptype==3)&&s();r.util.submitForm.call(n(f.forms[0]),this.settings,t,u,"ajaxPost",i)}),this},submitForm:function(t,u){var f=this;return n(f.forms).each(function(){var f=r.util.submitForm.call(n(this),this.settings,t,u);f===i&&(f=!0);f===!0&&this.submit()}),this},resetForm:function(){var t=this;return r.util.resetForm.call(n(t.forms)),this},abort:function(){var t=this;return n(t.forms).each(function(){r.util.abort.call(this)}),this},check:function(t,i){var i=i||"[datatype]",e=this,u=n(e.forms),f=!0;return u.find(i).each(function(){r.util.check.call(this,u,"",t)||(f=!1)}),f},config:function(t){var i=this;return t=t||{},n(i.forms).each(function(){var i=n(this);this.settings=n.extend(!0,this.settings,t);r.util.enhance.call(i,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep)}),this}};n.fn.Validform=function(n){return new r(this,n)};n.Showmsg=function(n){s();r.util.showmsg.call(t,n,1,{})};n.Hidemsg=function(){f.hide();o=!0}})(jQuery,window);!function(n,t){var f,i={},r=function(n,t){var r,u,i;if("string"==typeof n)return e(n);for(r=[],u=n.length,i=0;u>i;i++)r.push(e(n[i]));return t.apply(null,r)},o=function(n,t,i){2===arguments.length&&(i=t,t=null);r(t||[],function(){s(n,i,arguments)})},s=function(n,t,u){var e,f={exports:t};"function"==typeof t&&(u.length||(u=[r,f.exports,f]),e=t.apply(null,u),void 0!==e&&(f.exports=e));i[n]=f.exports},e=function(t){var r=i[t]||n[t];if(!r)throw new Error("`"+t+"` is undefined");return r},h=function(n){var r,t,f,u,e,o=function(n){return n&&n.charAt(0).toUpperCase()+n.substr(1)};for(r in i)if(t=n,i.hasOwnProperty(r)){for(f=r.split("/"),e=o(f.pop());u=o(f.shift());)t[u]=t[u]||{},t=t[u];t[e]=i[r]}return n},u=function(i){return n.__dollar=i,h(t(n,o,r))};"object"==typeof module&&"object"==typeof module.exports?module.exports=u():"function"==typeof define&&define.amd?define(["jquery"],u):(f=n.WebUploader,n.WebUploader=u(),n.WebUploader.noConflict=function(){n.WebUploader=f})}(window,function(n,t,i){return t("dollar-third",[],function(){var t=n.__dollar||n.jQuery||n.Zepto;if(!t)throw new Error("jQuery or Zepto not found!");return t}),t("dollar",["dollar-third"],function(n){return n}),t("promise-third",["dollar"],function(n){return{Deferred:n.Deferred,when:n.when,isPromise:function(n){return n&&"function"==typeof n.then}}}),t("promise",["promise-third"],function(n){return n}),t("base",["dollar","promise"],function(t,i){function f(n){return function(){return o.apply(n,arguments)}}function r(n,t){return function(){return n.apply(t,arguments)}}function e(n){var t;return Object.create?Object.create(n):(t=function(){},t.prototype=n,new t)}var u=function(){},o=Function.call;return{version:"0.1.5",$:t,Deferred:i.Deferred,isPromise:i.isPromise,when:i.when,browser:function(n){var t={},i=n.match(/WebKit\/([\d.]+)/),r=n.match(/Chrome\/([\d.]+)/)||n.match(/CriOS\/([\d.]+)/),u=n.match(/MSIE\s([\d\.]+)/)||n.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=n.match(/Firefox\/([\d.]+)/),e=n.match(/Safari\/([\d.]+)/),o=n.match(/OPR\/([\d.]+)/);return i&&(t.webkit=parseFloat(i[1])),r&&(t.chrome=parseFloat(r[1])),u&&(t.ie=parseFloat(u[1])),f&&(t.firefox=parseFloat(f[1])),e&&(t.safari=parseFloat(e[1])),o&&(t.opera=parseFloat(o[1])),t}(navigator.userAgent),os:function(n){var t={},i=n.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=n.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return i&&(t.android=parseFloat(i[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(n,i,r){var u;return"function"==typeof i?(u=i,i=null):u=i&&i.hasOwnProperty("constructor")?i.constructor:function(){return n.apply(this,arguments)},t.extend(!0,u,n,r||{}),u.__super__=n.prototype,u.prototype=e(n.prototype),i&&t.extend(!0,u.prototype,i),u},noop:u,bindFn:r,log:function(){return n.console?r(console.log,console):u}(),nextTick:function(){return function(n){setTimeout(n,1)}}(),slice:f([].slice),guid:function(){var n=0;return function(t){for(var i=(+new Date).toString(32),r=0;5>r;r++)i+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+i+(n++).toString(32)}}(),formatSize:function(n,t,i){var r;for(i=i||["B","K","M","G","TB"];(r=i.shift())&&n>1024;)n/=1024;return("B"===r?n:n.toFixed(t||2))+r}}}),t("mediator",["base"],function(n){function i(n,i,r,u){return t.grep(n,function(n){return!(!n||i&&n.e!==i||r&&n.cb!==r&&n.cb._cb!==r||u&&n.ctx!==u)})}function r(n,i,r){t.each((n||"").split(o),function(n,t){r(t,i)})}function f(n,t){for(var i,r=!1,u=-1,f=n.length;++u<f;)if(i=n[u],i.cb.apply(i.ctx2,t)===!1){r=!0;break}return!r}var u,t=n.$,e=[].slice,o=/\s+/;return u={on:function(n,t,i){var u,f=this;return t?(u=this._events||(this._events=[]),r(n,t,function(n,t){var r={e:n};r.cb=t;r.ctx=i;r.ctx2=i||f;r.id=u.length;u.push(r)}),this):this},once:function(n,t,i){var u=this;return t?(r(n,t,function(n,t){var r=function(){return u.off(n,r),t.apply(i||u,arguments)};r._cb=t;u.on(n,r,i)}),u):u},off:function(n,u,f){var e=this._events;return e?n||u||f?(r(n,u,function(n,r){t.each(i(e,n,r,f),function(){delete e[this.id]})}),this):(this._events=[],this):this},trigger:function(n){var t,r,u;return this._events&&n?(t=e.call(arguments,1),r=i(this._events,n),u=i(this._events,"all"),f(r,t)&&f(u,arguments)):this}},t.extend({installTo:function(n){return t.extend(n,u)}},u)}),t("uploader",["base","mediator"],function(n,t){function i(n){this.options=r.extend(!0,{},i.options,n);this._init(this.options)}var r=n.$;return i.options={},t.installTo(i.prototype),r.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(n,t){i.prototype[n]=function(){return this.request(t,arguments)}}),r.extend(i.prototype,{state:"pending",_init:function(n){var t=this;t.request("init",n,function(){t.state="ready";t.trigger("ready")})},option:function(n,t){var i=this.options;return arguments.length>1?void(r.isPlainObject(t)&&r.isPlainObject(i[n])?r.extend(i[n],t):i[n]=t):n?i[n]:i},getStats:function(){var n=this.request("get-stats");return n?{successNum:n.numOfSuccess,progressNum:n.numOfProgress,cancelNum:n.numOfCancel,invalidNum:n.numOfInvalid,uploadFailNum:n.numOfUploadFailed,queueNum:n.numOfQueue,interruptNum:n.numofInterrupt}:{}},trigger:function(n){var u=[].slice.call(arguments,1),f=this.options,i="on"+n.substring(0,1).toUpperCase()+n.substring(1);return t.trigger.apply(this,arguments)===!1||r.isFunction(f[i])&&f[i].apply(this,u)===!1||r.isFunction(this[i])&&this[i].apply(this,u)===!1||t.trigger.apply(t,[this,n].concat(u))===!1?!1:!0},destroy:function(){this.request("destroy",arguments);this.off()},request:n.noop}),n.create=i.create=function(n){return new i(n)},n.Uploader=i,i}),t("runtime/runtime",["base","mediator"],function(n,t){function i(t){this.options=u.extend({container:document.body},t);this.uid=n.guid("rt_")}var u=n.$,r={},f=function(n){for(var t in n)if(n.hasOwnProperty(t))return t;return null};return u.extend(i.prototype,{getContainer:function(){var t,n,i=this.options;return this._container?this._container:(t=u(i.container||document.body),n=u(document.createElement("div")),n.attr("id","rt_"+this.uid),n.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t.append(n),t.addClass("webuploader-container"),this._container=n,this._parent=t,n)},init:n.noop,exec:n.noop,destroy:function(){this._container&&this._container.remove();this._parent&&this._parent.removeClass("webuploader-container");this.off()}}),i.orders="html5,flash",i.addRuntime=function(n,t){r[n]=t},i.hasRuntime=function(n){return!!(n?r[n]:f(r))},i.create=function(n,t){var e;if(t=t||i.orders,u.each(t.split(/\s*,\s*/g),function(){if(r[this])return(e=this,!1)}),e=e||f(r),!e)throw new Error("Runtime Error");return new r[e](n)},t.installTo(i.prototype),i}),t("runtime/client",["base","mediator","runtime/runtime"],function(n,t,i){function u(t,u){var f,e=n.Deferred();this.uid=n.guid("client_");this.runtimeReady=function(n){return e.done(n)};this.connectRuntime=function(t,o){if(f)throw new Error("already connected!");return e.done(o),"string"==typeof t&&r.get(t)&&(f=r.get(t)),f=f||r.get(null,u),f?(n.$.extend(f.options,t),f.__promise.then(e.resolve),f.__client++):(f=i.create(t,t.runtimeOrder),f.__promise=e.promise(),f.once("ready",e.resolve),f.init(),r.add(f),f.__client=1),u&&(f.__standalone=u),f};this.getRuntime=function(){return f};this.disconnectRuntime=function(){f&&(f.__client--,f.__client<=0&&(r.remove(f),delete f.__promise,f.destroy()),f=null)};this.exec=function(){if(f){var i=n.slice(arguments);return t&&i.unshift(t),f.exec.apply(this,i)}};this.getRuid=function(){return f&&f.uid};this.destroy=function(n){return function(){n&&n.apply(this,arguments);this.trigger("destroy");this.off();this.exec("destroy");this.disconnectRuntime()}}(this.destroy)}var r;return r=function(){var n={};return{add:function(t){n[t.uid]=t},get:function(t,i){var r;if(t)return n[t];for(r in n)if(!i||!n[r].__standalone)return n[r];return null},remove:function(t){delete n[t.uid]}}}(),t.installTo(u.prototype),u}),t("lib/dnd",["base","mediator","runtime/client"],function(n,t,i){function r(n){n=this.options=u.extend({},r.options,n);n.container=u(n.container);n.container.length&&i.call(this,"DragAndDrop")}var u=n.$;return r.options={accept:null,disableGlobalDnd:!1},n.inherits(i,{constructor:r,init:function(){var n=this;n.connectRuntime(n.options,function(){n.exec("init");n.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/widget",["base","uploader"],function(n,t){function e(n){if(!n)return!1;var t=n.length,r=i.type(n);return 1===n.nodeType&&t?!0:"array"===r||"function"!==r&&"string"!==r&&(0===t||"number"==typeof t&&t>0&&t-1 in n)}function r(n){this.owner=n;this.options=n.options}var i=n.$,o=t.prototype._init,s=t.prototype.destroy,f={},u=[];return i.extend(r.prototype,{init:n.noop,invoke:function(n,t){var r=this.responseMap;return r&&n in r&&r[n]in this&&i.isFunction(this[r[n]])?this[r[n]].apply(this,t):f},request:function(){return this.owner.request.apply(this.owner,arguments)}}),i.extend(t.prototype,{_init:function(){var n=this,r=n._widgets=[],t=n.options.disableWidgets||"";return i.each(u,function(i,u){t&&~t.indexOf(u._name)||r.push(new u(n))}),o.apply(n,arguments)},request:function(t,i,r){var a,u,o,s,h=0,c=this._widgets,y=c&&c.length,v=[],l=[];for(i=e(i)?i:[i];y>h;h++)a=c[h],u=a.invoke(t,i),u!==f&&(n.isPromise(u)?l.push(u):v.push(u));return r||l.length?(o=n.when.apply(n,l),s=o.pipe?"pipe":"then",o[s](function(){var i=n.Deferred(),t=arguments;return 1===t.length&&(t=t[0]),setTimeout(function(){i.resolve(t)},1),i.promise()})[r?s:"done"](r||n.noop)):v[0]},destroy:function(){s.apply(this,arguments);this._widgets=null}}),t.register=r.register=function(t,f){var o,e={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(f=t,i.each(f,function(n){return"_"===n[0]||"name"===n?void("name"===n&&(e.name=f.name)):void(e[n.replace(/[A-Z]/g,"-$&").toLowerCase()]=n)})):e=i.extend(e,t),f.responseMap=e,o=n.inherits(r,f),o._name=e.name,u.push(o),o},t.unRegister=r.unRegister=function(n){if(n&&"anonymous"!==n)for(var t=u.length;t--;)u[t]._name===n&&u.splice(t,1)},r}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(n,t,i){var r=n.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var u,f=this,e=n.Deferred(),o=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return this.dnd=u=new i(o),u.once("ready",e.resolve),u.on("drop",function(n){f.request("add-file",[n])}),u.on("accept",function(n){return f.owner.trigger("dndAccept",n)}),u.init(),e.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(n,t,i){function r(n){n=this.options=u.extend({},n);n.container=u(n.container||document.body);i.call(this,"FilePaste")}var u=n.$;return n.inherits(i,{constructor:r,init:function(){var n=this;n.connectRuntime(n.options,function(){n.exec("init");n.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(n,t,i){var r=n.$;return t.register({name:"paste",init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var u,e=this,f=n.Deferred(),o=r.extend({},{container:t.paste,accept:t.accept});return this.paste=u=new i(o),u.once("ready",f.resolve),u.on("paste",function(n){e.owner.request("add-file",[n])}),u.init(),f.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(n,t){function i(n,i){var r=this;r.source=i;r.ruid=n;this.size=i.size||0;this.type=!i.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?"image/"+("jpg"===this.ext?"jpeg":this.ext):i.type||"application/octet-stream";t.call(r,"Blob");this.uid=i.uid||this.uid;n&&r.connectRuntime(n)}return n.inherits(t,{constructor:i,slice:function(n,t){return this.exec("slice",n,t)},getSource:function(){return this.source}}),i}),t("lib/file",["base","lib/blob"],function(n,t){function i(n,i){var f;this.name=i.name||"untitled"+r++;f=u.exec(i.name)?RegExp.$1.toLowerCase():"";!f&&i.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(i.type)?RegExp.$1.toLowerCase():"",this.name+="."+f);this.ext=f;this.lastModifiedDate=i.lastModifiedDate||(new Date).toLocaleString();t.apply(this,arguments)}var r=1,u=/\.([^.]+)$/;return n.inherits(t,i)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,i,r){function f(n){if(n=this.options=u.extend({},f.options,n),n.container=u(n.id),!n.container.length)throw new Error("按钮指定错误");n.innerHTML=n.innerHTML||n.label||n.container.html()||"";n.button=u(n.button||document.createElement("div"));n.button.html(n.innerHTML);n.container.html(n.button);i.call(this,"FilePicker",!0)}var u=t.$;return f.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(i,{constructor:f,init:function(){var i=this,f=i.options,e=f.button;e.addClass("webuploader-pick");i.on("all",function(n){var t;switch(n){case"mouseenter":e.addClass("webuploader-pick-hover");break;case"mouseleave":e.removeClass("webuploader-pick-hover");break;case"change":t=i.exec("getFiles");i.trigger("select",u.map(t,function(n){return n=new r(i.getRuid(),n),n._refer=f.container,n}),f.container)}});i.connectRuntime(f,function(){i.refresh();i.exec("init",f);i.trigger("ready")});this._resizeHandler=t.bindFn(this.refresh,this);u(n).on("resize",this._resizeHandler)},refresh:function(){var r=this.getRuntime().getContainer(),n=this.options.button,t=n.outerWidth?n.outerWidth():n.width(),i=n.outerHeight?n.outerHeight():n.height(),u=n.offset();t&&i&&r.css({bottom:"auto",right:"auto",width:t+"px",height:i+"px"}).offset(u)},enable:function(){var n=this.options.button;n.removeClass("webuploader-pick-disable");this.refresh()},disable:function(){var n=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"});n.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;u(n).off("resize",this._resizeHandler);t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),f}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(n,t,i){var r=n.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(n){return this.pickers=[],n.pick&&this.addBtn(n.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var u=this,f=u.options,e=f.accept,o=[];if(t)return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var c,s,h;h=n.Deferred();c=r.extend({},t,{accept:r.isPlainObject(e)?[e]:e,swf:f.swf,runtimeOrder:f.runtimeOrder,id:this});s=new i(c);s.once("ready",h.resolve);s.on("select",function(n){u.owner.request("add-file",[n])});s.init();u.pickers.push(s);o.push(h.promise())}),n.when.apply(n,o)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()});this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(n,t,i){function r(n){this.options=u.extend({},r.options,n);t.call(this,"Image");this.on("load",function(){this._info=this.exec("info");this._meta=this.exec("meta")})}var u=n.$;return r.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},n.inherits(t,{constructor:r,info:function(n){return n?(this._info=n,this):this._info},meta:function(n){return n?(this._meta=n,this):this._meta},loadFromBlob:function(n){var t=this,i=n.getRuid();this.connectRuntime(i,function(){t.exec("init",t.options);t.exec("loadFromBlob",n)})},resize:function(){var t=n.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=n.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(n){return this.exec("getAsDataUrl",n)},getAsBlob:function(n){var t=this.exec("getAsBlob",n);return new i(this.getRuid(),t)}}),r}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(n,t,i){var u,r=n.$;return u=function(n){var t=0,i=[],r=function(){for(var r;i.length&&n>t;)r=i.shift(),t+=r[0],r[1]()};return function(n,u,f){i.push([u,f]);n.once("destroy",function(){t-=u;setTimeout(r,1)});setTimeout(r,1)}}(5242880),r.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(n,t,f,e){var s,o;return n=this.request("get-file",n),n.type.match(/^image/)?(s=r.extend({},this.options.thumb),r.isPlainObject(f)&&(s=r.extend(s,f),f=null),f=f||s.width,e=e||s.height,o=new i(s),o.once("load",function(){n._info=n._info||o.info();n._meta=n._meta||o.meta();1>=f&&f>0&&(f=n._info.width*f);1>=e&&e>0&&(e=n._info.height*e);o.resize(f,e)}),o.once("complete",function(){t(!1,o.getAsDataUrl(s.type));o.destroy()}),o.once("error",function(n){t(n||!0);o.destroy()}),void u(o,n.source.size,function(){n._info&&o.info(n._info);n._meta&&o.meta(n._meta);o.loadFromBlob(n.source)})):void t(!0)},beforeSendFile:function(t){var u,e,f=this.options.compress||this.options.resize,o=f&&f.compressSize||0,s=f&&f.noCompressIfLarger||!1;return t=this.request("get-file",t),!f||!~"image/jpeg,image/jpg".indexOf(t.type)||t.size<o||t._compressed?void 0:(f=r.extend({},f),e=n.Deferred(),u=new i(f),e.always(function(){u.destroy();u=null}),u.once("error",e.reject),u.once("load",function(){var n=f.width,i=f.height;t._info=t._info||u.info();t._meta=t._meta||u.meta();1>=n&&n>0&&(n=t._info.width*n);1>=i&&i>0&&(i=t._info.height*i);u.resize(n,i)}),u.once("complete",function(){var n,i;try{n=u.getAsBlob(f.type);i=t.size;(!s||n.size<i)&&(t.source=n,t.size=n.size,t.trigger("resize",n.size,i));t._compressed=!0;e.resolve()}catch(r){e.resolve()}}),t._info&&u.info(t._info),t._meta&&u.meta(t._meta),u.loadFromBlob(t.source),e.promise())}})}),t("file",["base","mediator"],function(n,t){function u(){return e+o++}function i(n){this.name=n.name||"Untitled";this.size=n.size||0;this.type=n.type||"application/octet-stream";this.lastModifiedDate=n.lastModifiedDate||1*new Date;this.id=u();this.ext=s.exec(this.name)?RegExp.$1:"";this.statusText="";r[this.id]=i.Status.INITED;this.source=n;this.loaded=0;this.on("error",function(n){this.setStatus(i.Status.ERROR,n)})}var f=n.$,e="WU_FILE_",o=0,s=/\.([^.]+)$/,r={};return f.extend(i.prototype,{setStatus:function(n,t){var i=r[this.id];"undefined"!=typeof t&&(this.statusText=t);n!==i&&(r[this.id]=n,this.trigger("statuschange",n,i))},getStatus:function(){return r[this.id]},getSource:function(){return this.source},destroy:function(){this.off();delete r[this.id]}}),t.installTo(i.prototype),i.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},i}),t("queue",["base","mediator","file"],function(n,t,i){function u(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0};this._queue=[];this._map={}}var f=n.$,r=i.Status;return f.extend(u.prototype,{append:function(n){return this._queue.push(n),this._fileAdded(n),this},prepend:function(n){return this._queue.unshift(n),this._fileAdded(n),this},getFile:function(n){return"string"!=typeof n?n:this._map[n]},fetch:function(n){var t,i,u=this._queue.length;for(n=n||r.QUEUED,t=0;u>t;t++)if(i=this._queue[t],n===i.getStatus())return i;return null},sort:function(n){"function"==typeof n&&this._queue.sort(n)},getFiles:function(){for(var n,i=[].slice.call(arguments,0),r=[],t=0,u=this._queue.length;u>t;t++)n=this._queue[t],(!i.length||~f.inArray(n.getStatus(),i))&&r.push(n);return r},removeFile:function(n){var t=this._map[n.id];t&&(delete this._map[n.id],n.destroy(),this.stats.numofDeleted++)},_fileAdded:function(n){var t=this,i=this._map[n.id];i||(this._map[n.id]=n,n.on("statuschange",function(n,i){t._onFileStatusChange(n,i)}))},_onFileStatusChange:function(n,t){var i=this.stats;switch(t){case r.PROGRESS:i.numOfProgress--;break;case r.QUEUED:i.numOfQueue--;break;case r.ERROR:i.numOfUploadFailed--;break;case r.INVALID:i.numOfInvalid--;break;case r.INTERRUPT:i.numofInterrupt--}switch(n){case r.QUEUED:i.numOfQueue++;break;case r.PROGRESS:i.numOfProgress++;break;case r.ERROR:i.numOfUploadFailed++;break;case r.COMPLETE:i.numOfSuccess++;break;case r.CANCELLED:i.numOfCancel++;break;case r.INVALID:i.numOfInvalid++;break;case r.INTERRUPT:i.numofInterrupt++}}}),t.installTo(u.prototype),u}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(n,t,i,r,u,f){var o=n.$,s=/\.\w+$/,e=r.Status;return t.register({name:"queue",init:function(t){var s,l,u,h,e,a,c,r=this;if(o.isPlainObject(t.accept)&&(t.accept=[t.accept]),t.accept){for(e=[],u=0,l=t.accept.length;l>u;u++)h=t.accept[u].extensions,h&&e.push(h);e.length&&(a="\\."+e.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$");r.accept=new RegExp(a,"i")}return r.queue=new i,r.stats=r.queue.stats,"html5"===this.request("predict-runtime-type")?(s=n.Deferred(),this.placeholder=c=new f("Placeholder"),c.connectRuntime({runtimeOrder:"html5"},function(){r._ruid=c.getRuid();s.resolve()}),s.promise()):void 0},_wrapFile:function(n){if(!(n instanceof r)){if(!(n instanceof u)){if(!this._ruid)throw new Error("Can't add external files.");n=new u(this._ruid,n)}n=new r(n)}return n},acceptFile:function(n){var t=!n||!n.size||this.accept&&s.exec(n.name)&&!this.accept.test(n.name);return!t},_addFile:function(n){var t=this;return n=t._wrapFile(n),t.owner.trigger("beforeFileQueued",n)?t.acceptFile(n)?(t.queue.append(n),t.owner.trigger("fileQueued",n),n):void t.owner.trigger("error","Q_TYPE_DENIED",n):void 0},getFile:function(n){return this.queue.getFile(n)},addFile:function(n){var t=this;n.length||(n=[n]);n=o.map(n,function(n){return t._addFile(n)});t.owner.trigger("filesQueued",n);t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(n,t){var i=this;n=n.id?n:i.queue.getFile(n);this.request("cancel-file",n);t&&this.queue.removeFile(n)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(n,t){var u,i,f,r=this;if(n)return n=n.id?n:r.queue.getFile(n),n.setStatus(e.QUEUED),void(t||r.request("start-upload"));for(u=r.queue.getFiles(e.ERROR),i=0,f=u.length;f>i;i++)n=u[i],n.setStatus(e.QUEUED);r.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset");this.queue=new i;this.stats=this.queue.stats},destroy:function(){this.reset();this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(n,t){return n.support=function(){return t.hasRuntime.apply(t,arguments)},n.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error");},predictRuntimeType:function(){var n,u,i=this.options.runtimeOrder||t.orders,r=this.type;if(!r)for(i=i.split(/\s*,\s*/g),n=0,u=i.length;u>n;n++)if(t.hasRuntime(i[n])){this.type=r=i[n];break}return r}})}),t("lib/transport",["base","runtime/client","mediator"],function(n,t,i){function r(n){var i=this;n=i.options=u.extend(!0,{},r.options,n||{});t.call(this,"Transport");this._blob=null;this._formData=n.formData||{};this._headers=n.headers||{};this.on("progress",this._timeout);this.on("load error",function(){i.trigger("progress",1);clearTimeout(i._timer)})}var u=n.$;return r.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},u.extend(r.prototype,{appendBlob:function(n,t,i){var r=this,u=r.options;r.getRuid()&&r.disconnectRuntime();r.connectRuntime(t.ruid,function(){r.exec("init")});r._blob=t;u.fileVal=n||u.fileVal;u.filename=i||u.filename},append:function(n,t){"object"==typeof n?u.extend(this._formData,n):this._formData[n]=t},setRequestHeader:function(n,t){"object"==typeof n?u.extend(this._headers,n):this._headers[n]=t},send:function(n){this.exec("send",n);this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy");this.off();this.exec("destroy");this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var n=this,t=n.options.timeout;t&&(clearTimeout(n._timer),n._timer=setTimeout(function(){n.abort();n.trigger("error","timeout")},t))}}),i.installTo(r.prototype),r}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(n,t,i,r){function o(n,t){for(var f,i=[],h=n.source,r=h.size,o=t?Math.ceil(r/t):1,u=0,s=0,e={file:n,has:function(){return!!i.length},shift:function(){return i.shift()},unshift:function(n){i.unshift(n)}};o>s;)f=Math.min(t,r-u),i.push({file:n,start:u,end:t?u+f:r,total:r,chunks:o,chunk:s++,cuted:e}),u+=f;return n.blocks=i.concat(),n.remaning=i.length,e}var f=n.$,e=n.isPromise,u=i.Status;f.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}});t.register({name:"upload",init:function(){var t=this.owner,i=this;this.runing=!1;this.progress=!1;t.on("startUpload",function(){i.progress=!0}).on("uploadFinished",function(){i.progress=!1});this.pool=[];this.stack=[];this.pending=[];this.remaning=0;this.__tick=n.bindFn(this._tick,this);t.on("uploadComplete",function(n){n.blocks&&f.each(n.blocks,function(n,t){t.transport&&(t.transport.abort(),t.transport.destroy());delete t.transport});delete n.blocks;delete n.remaning})},reset:function(){this.request("stop-upload",!0);this.runing=!1;this.pool=[];this.stack=[];this.pending=[];this.remaning=0;this._trigged=!1;this._promise=null},startUpload:function(t){var i=this,r,t;if(f.each(i.request("get-files",u.INVALID),function(){i.request("remove-file",this)}),t)if(t=t.id?t:i.request("get-file",t),t.getStatus()===u.INTERRUPT)f.each(i.pool,function(n,i){i.file===t&&i.transport&&i.transport.send()}),t.setStatus(u.QUEUED);else{if(t.getStatus()===u.PROGRESS)return;t.setStatus(u.QUEUED)}else f.each(i.request("get-files",[u.INITED]),function(){this.setStatus(u.QUEUED)});if(!i.runing){for(i.runing=!0,r=[],f.each(i.pool,function(n,t){var f=t.file;f.getStatus()===u.INTERRUPT&&(r.push(f),i._trigged=!1,t.transport&&t.transport.send())});t=r.shift();)t.setStatus(u.PROGRESS);t||f.each(i.request("get-files",u.INTERRUPT),function(){this.setStatus(u.PROGRESS)});i._trigged=!1;n.nextTick(i.__tick);i.owner.trigger("startUpload")}},stopUpload:function(t,i){var r=this;if(t===!0&&(i=t,t=null),r.runing!==!1){if(t)return(t=t.id?t:r.request("get-file",t),t.getStatus()!==u.PROGRESS&&t.getStatus()!==u.QUEUED)?void 0:(t.setStatus(u.INTERRUPT),f.each(r.pool,function(n,i){i.file===t&&(i.transport&&i.transport.abort(),r._putback(i),r._popBlock(i))}),n.nextTick(r.__tick));r.runing=!1;this._promise&&this._promise.file&&this._promise.file.setStatus(u.INTERRUPT);i&&f.each(r.pool,function(n,t){t.transport&&t.transport.abort();t.file.setStatus(u.INTERRUPT)});r.owner.trigger("stopUpload")}},cancelFile:function(n){n=n.id?n:this.request("get-file",n);n.blocks&&f.each(n.blocks,function(n,t){var i=t.transport;i&&(i.abort(),i.destroy(),delete t.transport)});n.setStatus(u.CANCELLED);this.owner.trigger("fileDequeued",n)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(n,t){n=n.id?n:this.request("get-file",n);n.setStatus(t||u.COMPLETE);n.skipped=!0;n.blocks&&f.each(n.blocks,function(n,t){var i=t.transport;i&&(i.abort(),i.destroy(),delete t.transport)});this.owner.trigger("uploadSkip",n)},_tick:function(){var r,i,t=this,u=t.options;return t._promise?t._promise.always(t.__tick):void(t.pool.length<u.threads&&(i=t._nextBlock())?(t._trigged=!1,r=function(i){t._promise=null;i&&i.file&&t._startSend(i);n.nextTick(t.__tick)},t._promise=e(i)?i.always(r):r(i)):t.remaning||t._getStats().numOfQueue||t._getStats().numofInterrupt||(t.runing=!1,t._trigged||n.nextTick(function(){t.owner.trigger("uploadFinished")}),t._trigged=!0))},_putback:function(n){var t;n.cuted.unshift(n);t=this.stack.indexOf(n.cuted);~t||this.stack.unshift(n.cuted)},_getStack:function(){for(var n,t=0;n=this.stack[t++];){if(n.has()&&n.file.getStatus()===u.PROGRESS)return n;n.has()&&(n.file.getStatus()===u.PROGRESS||n.file.getStatus()===u.INTERRUPT)||this.stack.splice(--t,1)}return null},_nextBlock:function(){var i,n,r,f,t=this,u=t.options;return(i=this._getStack())?(u.prepareNextFile&&!t.pending.length&&t._prepareNextFile(),i.shift()):t.runing?(!t.pending.length&&t._getStats().numOfQueue&&t._prepareNextFile(),n=t.pending.shift(),r=function(n){return n?(i=o(n,u.chunked?u.chunkSize:0),t.stack.push(i),i.shift()):null},e(n)?(f=n.file,n=n[n.pipe?"pipe":"then"](r),n.file=f,n):r(n)):void 0},_prepareNextFile:function(){var i,t=this,n=t.request("fetch-file"),r=t.pending;n&&(i=t.request("before-send-file",n,function(){return n.getStatus()===u.PROGRESS||n.getStatus()===u.INTERRUPT?n:t._finishFile(n)}),t.owner.trigger("uploadStart",n),n.setStatus(u.PROGRESS),i.file=n,i.done(function(){var t=f.inArray(i,r);~t&&r.splice(t,1,n)}),i.fail(function(i){n.setStatus(u.ERROR,i);t.owner.trigger("uploadError",n,i);t.owner.trigger("uploadComplete",n)}),r.push(i))},_popBlock:function(n){var t=f.inArray(n,this.pool);this.pool.splice(t,1);n.file.remaning--;this.remaning--},_startSend:function(t){var f,i=this,r=t.file;return r.getStatus()!==u.PROGRESS?void(r.getStatus()===u.INTERRUPT&&i._putback(t)):(i.pool.push(t),i.remaning++,t.blob=1===t.chunks?r.source:r.source.slice(t.start,t.end),f=i.request("before-send",t,function(){r.getStatus()===u.PROGRESS?i._doSend(t):(i._popBlock(t),n.nextTick(i.__tick))}),void f.fail(function(){1===r.remaning?i._finishFile(r).always(function(){t.percentage=1;i._popBlock(t);i.owner.trigger("uploadComplete",r);n.nextTick(i.__tick)}):(t.percentage=1,i.updateFileProgress(r),i._popBlock(t),n.nextTick(i.__tick))}))},_doSend:function(t){var a,c,o=this,l=o.owner,s=o.options,e=t.file,i=new r(s),h=f.extend({},s.formData),v=f.extend({},s.headers);t.transport=i;i.on("destroy",function(){delete t.transport;o._popBlock(t);n.nextTick(o.__tick)});i.on("progress",function(n){t.percentage=n;o.updateFileProgress(e)});a=function(n){var r;return c=i.getResponseAsJson()||{},c._raw=i.getResponse(),r=function(t){n=t},l.trigger("uploadAccept",t,c,r)||(n=n||"server"),n};i.on("error",function(n,r){t.retried=t.retried||0;t.chunks>1&&~"http,abort".indexOf(n)&&t.retried<s.chunkRetry?(t.retried++,i.send()):(r||"server"!==n||(n=a(n)),e.setStatus(u.ERROR,n),l.trigger("uploadError",e,n),l.trigger("uploadComplete",e))});i.on("load",function(){var n;return(n=a())?void i.trigger("error",n,!0):void(1===e.remaning?o._finishFile(e,c):i.destroy())});h=f.extend(h,{id:e.id,name:e.name,type:e.type,lastModifiedDate:e.lastModifiedDate,size:e.size});t.chunks>1&&f.extend(h,{chunks:t.chunks,chunk:t.chunk});l.trigger("uploadBeforeSend",t,h,v);i.appendBlob(s.fileVal,t.blob,e.name);i.append(h);i.setRequestHeader(v);i.send()},_finishFile:function(n,t,i){var r=this.owner;return r.request("after-send-file",arguments,function(){n.setStatus(u.COMPLETE);r.trigger("uploadSuccess",n,t,i)}).fail(function(t){n.getStatus()===u.PROGRESS&&n.setStatus(u.ERROR,t);r.trigger("uploadError",n,t)}).always(function(){r.trigger("uploadComplete",n)})},updateFileProgress:function(n){var t=0,i=0;n.blocks&&(f.each(n.blocks,function(n,t){i+=(t.percentage||0)*(t.end-t.start)}),t=i/n.size,this.owner.trigger("uploadProgress",n,t||0))}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(n,t,i){var r,f=n.$,u={};return r={addValidator:function(n,t){u[n]=t},removeValidator:function(n){delete u[n]}},t.register({name:"validator",init:function(){var t=this;n.nextTick(function(){f.each(u,function(){this.call(t.owner)})})}}),r.addValidator("fileNumLimit",function(){var n=this,u=n.options,t=0,i=parseInt(u.fileNumLimit,10),r=!0;i&&(n.on("beforeFileQueued",function(n){return t>=i&&r&&(r=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",i,n),setTimeout(function(){r=!0},1)),t>=i?!1:!0}),n.on("fileQueued",function(){t++}),n.on("fileDequeued",function(){t--}),n.on("reset",function(){t=0}))}),r.addValidator("fileSizeLimit",function(){var n=this,u=n.options,t=0,i=parseInt(u.fileSizeLimit,10),r=!0;i&&(n.on("beforeFileQueued",function(n){var u=t+n.size>i;return u&&r&&(r=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",i,n),setTimeout(function(){r=!0},1)),u?!1:!0}),n.on("fileQueued",function(n){t+=n.size}),n.on("fileDequeued",function(n){t-=n.size}),n.on("reset",function(){t=0}))}),r.addValidator("fileSingleSizeLimit",function(){var t=this,r=t.options,n=r.fileSingleSizeLimit;n&&t.on("beforeFileQueued",function(t){if(t.size>n)return(t.setStatus(i.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",n,t),!1)})}),r.addValidator("duplicate",function(){function i(n){for(var r,t=0,i=0,u=n.length;u>i;i++)r=n.charCodeAt(i),t=r+(t<<6)+(t<<16)-t;return t}var n=this,r=n.options,t={};r.duplicate||(n.on("beforeFileQueued",function(n){var r=n.__hash||(n.__hash=i(n.name+n.size+n.lastModifiedDate));if(t[r])return(this.trigger("error","F_DUPLICATE",n),!1)}),n.on("fileQueued",function(n){var i=n.__hash;i&&(t[i]=!0)}),n.on("fileDequeued",function(n){var i=n.__hash;i&&delete t[i]}),n.on("reset",function(){t={}}))}),r}),t("lib/md5",["runtime/client","mediator"],function(n,t){function i(){n.call(this,"Md5")}return t.installTo(i.prototype),i.prototype.loadFromBlob=function(n){var t=this;t.getRuid()&&t.disconnectRuntime();t.connectRuntime(n.ruid,function(){t.exec("init");t.exec("loadFromBlob",n)})},i.prototype.getResult=function(){return this.exec("getResult")},i}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(n,t,i,r){return t.register({name:"md5",md5File:function(t,u,f){var o=new i,s=n.Deferred(),e=t instanceof r?t:this.request("get-file",t).source;return o.on("progress load",function(n){n=n||{};s.notify(n.total?n.loaded/n.total:1)}),o.on("complete",function(){s.resolve(o.getResult())}),o.on("error",function(n){s.reject(n)}),arguments.length>1&&(u=u||0,f=f||0,0>u&&(u=e.size+u),0>f&&(f=e.size+f),f=Math.min(f,e.size),e=e.slice(u,f)),o.loadFromBlob(e),s.promise()}})}),t("runtime/compbase",[],function(){function n(n,t){this.owner=n;this.options=n.options;this.getRuntime=function(){return t};this.getRuid=function(){return t.uid};this.trigger=function(){return n.trigger.apply(n,arguments)}}return n}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,i,r){function u(){var r={},n=this,u=this.destroy;i.apply(n,arguments);n.type=e;n.exec=function(i,u){var e,o=this,s=o.uid,h=t.slice(arguments,2);if(f[i]&&(e=r[s]=r[s]||new f[i](o,n),e[u]))return e[u].apply(e,h)};n.destroy=function(){return u&&u.apply(this,arguments)}}var e="html5",f={};return t.inherits(i,{constructor:u,init:function(){var n=this;setTimeout(function(){n.trigger("ready")},1)}}),u.register=function(n,i){return f[n]=t.inherits(r,i)},n.Blob&&n.FileReader&&n.DataView&&i.addRuntime(e,u),u}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(n,t){return n.register("Blob",{slice:function(n,i){var r=this.owner.source,u=r.slice||r.webkitSlice||r.mozSlice;return r=u.call(r,n,i),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(n,t,i){var r=n.$,u="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=n.bindFn(this._dragEnterHandler,this);this.dragOverHandler=n.bindFn(this._dragOverHandler,this);this.dragLeaveHandler=n.bindFn(this._dragLeaveHandler,this);this.dropHandler=n.bindFn(this._dropHandler,this);this.dndOver=!1;t.on("dragenter",this.dragEnterHandler);t.on("dragover",this.dragOverHandler);t.on("dragleave",this.dragLeaveHandler);t.on("drop",this.dropHandler);this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(n){var i,t=this,r=t._denied||!1;return n=n.originalEvent||n,t.dndOver||(t.dndOver=!0,i=n.dataTransfer.items,i&&i.length&&(t._denied=r=!t.trigger("accept",i)),t.elem.addClass(u+"over"),t.elem[r?"addClass":"removeClass"](u+"denied")),n.dataTransfer.dropEffect=r?"none":"copy",!1},_dragOverHandler:function(n){var t=this.elem.parent().get(0);return t&&!r.contains(t,n.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,n),!1)},_dragLeaveHandler:function(){var t,n=this;return t=function(){n.dndOver=!1;n.elem.removeClass(u+"over "+u+"denied")},clearTimeout(n._leaveTimer),n._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(n){var f,e,t=this,s=t.getRuid(),o=t.elem.parent().get(0);if(o&&!r.contains(o,n.currentTarget))return!1;n=n.originalEvent||n;f=n.dataTransfer;try{e=f.getData("text/html")}catch(h){}if(!e)return(t._getTansferFiles(f,function(n){t.trigger("drop",r.map(n,function(n){return new i(s,n)}))}),t.dndOver=!1,t.elem.removeClass(u+"over"),!1)},_getTansferFiles:function(t,i){var r,e,s,o,u,h,c,f=[],l=[];for(r=t.items,e=t.files,c=!(!r||!r[0].webkitGetAsEntry),u=0,h=e.length;h>u;u++)s=e[u],o=r&&r[u],c&&o.webkitGetAsEntry().isDirectory?l.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),f)):f.push(s);n.when.apply(n,l).done(function(){f.length&&i(f)})},_traverseDirectoryTree:function(t,i){var r=n.Deferred(),u=this;return t.isFile?t.file(function(n){i.push(n);r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){for(var s=t.length,e=[],o=[],f=0;s>f;f++)e.push(u._traverseDirectoryTree(t[f],o));n.when.apply(n,e).then(function(){i.push.apply(i,o);r.resolve()},r.reject)}),r.promise()},destroy:function(){var n=this.elem;n&&(n.off("dragenter",this.dragEnterHandler),n.off("dragover",this.dragOverHandler),n.off("dragleave",this.dragLeaveHandler),n.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler)))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(n,t,i){return t.register("FilePaste",{init:function(){var i,r,e,f,u=this.options,o=this.elem=u.container,t=".*";if(u.accept){for(i=[],r=0,e=u.accept.length;e>r;r++)f=u.accept[r].mimeTypes,f&&i.push(f);i.length&&(t=i.join(","),t=t.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=t=new RegExp(t,"i");this.hander=n.bindFn(this._pasteHander,this);o.on("paste",this.hander)},_pasteHander:function(n){var r,u,e,t,o,f=[],s=this.getRuid();for(n=n.originalEvent||n,r=n.clipboardData.items,t=0,o=r.length;o>t;t++)u=r[t],"file"===u.kind&&(e=u.getAsFile())&&f.push(new i(s,e));f.length&&(n.preventDefault(),n.stopPropagation(),this.trigger("paste",f))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(n,t){var i=n.$;return t.register("FilePicker",{init:function(){var f,r,s,e,h=this.getRuntime().getContainer(),o=this,c=o.owner,t=o.options,u=this.label=i(document.createElement("label")),n=this.input=i(document.createElement("input"));if(n.attr("type","file"),n.attr("name",t.name),n.addClass("webuploader-element-invisible"),u.on("click",function(){n.trigger("click")}),u.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),t.multiple&&n.attr("multiple","multiple"),t.accept&&t.accept.length>0){for(f=[],r=0,s=t.accept.length;s>r;r++)f.push(t.accept[r].mimeTypes);n.attr("accept",f.join(","))}h.append(n);h.append(u);e=function(n){c.trigger(n.type)};n.on("change",function(t){var r,u=arguments.callee;o.files=t.target.files;r=this.cloneNode(!0);r.value=null;this.parentNode.replaceChild(r,this);n.off();n=i(r).on("change",u).on("mouseenter mouseleave",e);c.trigger("change")});u.on("mouseenter mouseleave",e)},getFiles:function(){return this.files},destroy:function(){this.input.off();this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var i=n.createObjectURL&&n||n.URL&&URL.revokeObjectURL&&URL||n.webkitURL,r=t.noop,u=r;return i&&(r=function(){return i.createObjectURL.apply(i,arguments)},u=function(){return i.revokeObjectURL.apply(i,arguments)}),{createObjectURL:r,revokeObjectURL:u,dataURL2Blob:function(n){var r,f,u,t,e,i;for(i=n.split(","),r=~i[0].indexOf("base64")?atob(i[1]):decodeURIComponent(i[1]),u=new ArrayBuffer(r.length),f=new Uint8Array(u),t=0;t<r.length;t++)f[t]=r.charCodeAt(t);return e=i[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(u,e)},dataURL2ArrayBuffer:function(n){var i,u,t,r;for(r=n.split(","),i=~r[0].indexOf("base64")?atob(r[1]):decodeURIComponent(r[1]),u=new Uint8Array(i.length),t=0;t<i.length;t++)u[t]=i.charCodeAt(t);return u.buffer},arrayBufferToBlob:function(t,i){var r,u=n.BlobBuilder||n.WebKitBlobBuilder;return u?(r=new u,r.append(t),r.getBlob(i)):new Blob([t],i?{type:i}:{})},canvasToDataUrl:function(n,t,i){return n.toDataURL(t,i/100)},parseMeta:function(n,t){t(!1,{})},updateImageHead:function(n){return n}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(n){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(n,t){var r=this,i=new FileReader;i.onload=function(){t(!1,r._parse(this.result));i=i.onload=i.onerror=null};i.onerror=function(n){t(n.message);i=i.onload=i.onerror=null};n=n.slice(0,r.maxMetaDataSize);i.readAsArrayBuffer(n.getSource())},_parse:function(n,i){if(!(n.byteLength<6)){var f,e,o,s,u=new DataView(n),r=2,l=u.byteLength-4,h=r,c={};if(65496===u.getUint16(0)){for(;l>r&&(f=u.getUint16(r),f>=65504&&65519>=f||65534===f)&&(e=u.getUint16(r+2)+2,!(r+e>u.byteLength));){if(o=t.parsers[f],!i&&o)for(s=0;s<o.length;s+=1)o[s].call(t,u,r,e,c);r+=e;h=r}h>6&&(c.imageHead=n.slice?n.slice(2,h):new Uint8Array(n).subarray(2,h))}return c}},updateImageHead:function(n,t){var i,u,r,f=this._parse(n,!0);return r=2,f.imageHead&&(r=2+f.imageHead.byteLength),u=n.slice?n.slice(r):new Uint8Array(n).subarray(r),i=new Uint8Array(t.byteLength+2+u.byteLength),i[0]=255,i[1]=216,i.set(new Uint8Array(t),2),i.set(new Uint8Array(u),t.byteLength+2),i.buffer}},n.parseMeta=function(){return t.parse.apply(t,arguments)},n.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(n,t){var i={};return i.ExifMap=function(){return this},i.ExifMap.prototype.map={Orientation:274},i.ExifMap.prototype.get=function(n){return this[n]||this[this.map[n]]},i.exifTagTypes={1:{getValue:function(n,t){return n.getUint8(t)},size:1},2:{getValue:function(n,t){return String.fromCharCode(n.getUint8(t))},size:1,ascii:!0},3:{getValue:function(n,t,i){return n.getUint16(t,i)},size:2},4:{getValue:function(n,t,i){return n.getUint32(t,i)},size:4},5:{getValue:function(n,t,i){return n.getUint32(t,i)/n.getUint32(t+4,i)},size:8},9:{getValue:function(n,t,i){return n.getInt32(t,i)},size:4},10:{getValue:function(n,t,i){return n.getInt32(t,i)/n.getInt32(t+4,i)},size:8}},i.exifTagTypes[7]=i.exifTagTypes[1],i.getExifValue=function(t,r,u,f,e,o){var a,l,c,s,v,y,h=i.exifTagTypes[f];if(!h)return void n.log("Invalid Exif data: Invalid tag type.");if(a=h.size*e,l=a>4?r+t.getUint32(u+8,o):u+8,l+a>t.byteLength)return void n.log("Invalid Exif data: Invalid data offset.");if(1===e)return h.getValue(t,l,o);for(c=[],s=0;e>s;s+=1)c[s]=h.getValue(t,l+s*h.size,o);if(h.ascii){for(v="",s=0;s<c.length&&(y=c[s],"\x00"!==y);s+=1)v+=y;return v}return c},i.parseExifTag=function(n,t,r,u,f){var e=n.getUint16(r,u);f.exif[e]=i.getExifValue(n,t,r,n.getUint16(r+2,u),n.getUint32(r+4,u),u)},i.parseExifTags=function(t,i,r,u,f){var o,s,e;if(r+6>t.byteLength)return void n.log("Invalid Exif data: Invalid directory offset.");if(o=t.getUint16(r,u),s=r+2+12*o,s+4>t.byteLength)return void n.log("Invalid Exif data: Invalid directory size.");for(e=0;o>e;e+=1)this.parseExifTag(t,i,r+2+12*e,u,f);return t.getUint32(s,u)},i.parseExifData=function(t,r,u,f){var o,s,e=r+10;if(1165519206===t.getUint32(r+4)){if(e+8>t.byteLength)return void n.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void n.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(e)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void n.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(e+2,o))return void n.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(e+4,o);f.exif=new i.ExifMap;s=i.parseExifTags(t,e,e+s,o,f)}},t.parsers[65505].push(i.parseExifData),i}),t("runtime/html5/jpegencoder",[],function(){function n(n){function bt(n){for(var t,l,u,i,e,c=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;64>r;r++)t=it((c[r]*n+50)/100),1>t?t=1:t>255&&(t=255),w[h[r]]=t;for(l=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],u=0;64>u;u++)i=it((l[u]*n+50)/100),1>i?i=1:i>255&&(i=255),b[h[u]]=i;for(var o=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,s=0;8>s;s++)for(e=0;8>e;e++)rt[f]=1/(w[h[f]]*o[s]*o[e]*8),k[f]=1/(b[h[f]]*o[s]*o[e]*8),f++}function c(n,t){for(var e,f=0,i=0,r=[],u=1;16>=u;u++){for(e=1;e<=n[u];e++)r[t[i]]=[],r[t[i]][0]=f,r[t[i]][1]=u,i++,f++;f*=2}return r}function kt(){g=c(ht,ct);y=c(vt,yt);nt=c(lt,at);p=c(pt,wt)}function dt(){for(var n,t,u=1,r=2,i=1;15>=i;i++){for(n=u;r>n;n++)l[32767+n]=i,e[32767+n]=[],e[32767+n][1]=i,e[32767+n][0]=n;for(t=-(r-1);-u>=t;t++)l[32767+t]=i,e[32767+t]=[],e[32767+t][1]=i,e[32767+t][0]=r-1+t;u<<=1;r<<=1}}function gt(){for(var n=0;256>n;n++)i[n]=19595*n,i[n+256>>0]=38470*n,i[n+512>>0]=7471*n+32768,i[n+768>>0]=-11059*n,i[n+1024>>0]=-21709*n,i[n+1280>>0]=32768*n+8421375,i[n+1536>>0]=-27439*n,i[n+1792>>0]=-5329*n}function u(n){for(var r=n[0],i=n[1]-1;i>=0;)r&1<<i&&(s|=1<<f),i--,f--,0>f&&(255==s?(t(255),t(0)):t(s),f=7,s=0)}function t(n){a.push(st[n])}function r(n){t(n>>8&255);t(255&n)}function ni(n,t){for(var u,f,e,o,s,h,c,l,i=0,ft=8,nt,rt,k,r=0;ft>r;++r){u=n[i];f=n[i+1];e=n[i+2];o=n[i+3];s=n[i+4];h=n[i+5];c=n[i+6];l=n[i+7];var et=u+l,d=u-l,ot=f+c,st=f-c,ht=e+h,ct=e-h,lt=o+s,hi=o-s,a=et+lt,g=et-lt,y=ot+ht,p=ot-ht;n[i]=a+y;n[i+4]=a-y;nt=.707106781*(p+g);n[i+2]=g+nt;n[i+6]=g-nt;a=hi+ct;y=ct+st;p=st+d;var at=.382683433*(a-p),vt=.5411961*a+at,yt=1.306562965*p+at,pt=.707106781*y,wt=d+pt,bt=d-pt;n[i+5]=bt+vt;n[i+3]=bt-vt;n[i+1]=wt+yt;n[i+7]=wt-yt;i+=8}for(i=0,r=0;ft>r;++r){u=n[i];f=n[i+8];e=n[i+16];o=n[i+24];s=n[i+32];h=n[i+40];c=n[i+48];l=n[i+56];var kt=u+l,tt=u-l,dt=f+c,gt=f-c,ni=e+h,ti=e-h,ii=o+s,ci=o-s,v=kt+ii,it=kt-ii,w=dt+ni,b=dt-ni;n[i]=v+w;n[i+32]=v-w;rt=.707106781*(b+it);n[i+16]=it+rt;n[i+48]=it-rt;v=ci+ti;w=ti+gt;b=gt+tt;var ri=.382683433*(v-b),ui=.5411961*v+ri,fi=1.306562965*b+ri,ei=.707106781*w,oi=tt+ei,si=tt-ei;n[i+40]=si+ui;n[i+24]=si-ui;n[i+8]=oi+fi;n[i+56]=oi-fi;i++}for(r=0;64>r;++r)k=n[r]*t[r],ut[r]=k>0?k+.5|0:k-.5|0;return ut}function ti(){r(65504);r(16);t(74);t(70);t(73);t(70);t(0);t(1);t(1);t(0);r(1);r(1);t(0);t(0)}function ii(n,i){r(65472);r(17);t(8);r(i);r(n);t(3);t(1);t(17);t(0);t(2);t(17);t(1);t(3);t(17);t(1)}function ri(){var n,i;for(r(65499),r(132),t(0),n=0;64>n;n++)t(w[n]);for(t(1),i=0;64>i;i++)t(b[i])}function ui(){var n,i,u,f,e,o,s,h;for(r(65476),r(418),t(0),n=0;16>n;n++)t(ht[n+1]);for(i=0;11>=i;i++)t(ct[i]);for(t(16),u=0;16>u;u++)t(lt[u+1]);for(f=0;161>=f;f++)t(at[f]);for(t(1),e=0;16>e;e++)t(vt[e+1]);for(o=0;11>=o;o++)t(yt[o]);for(t(17),s=0;16>s;s++)t(pt[s+1]);for(h=0;161>=h;h++)t(wt[h])}function fi(){r(65498);r(12);t(3);t(1);t(0);t(2);t(17);t(3);t(17);t(0);t(63);t(0)}function v(n,t,i,r,f){for(var p,c,k,s,d,v,w,a,b=f[0],g=f[240],nt=ni(n,t),y=0;64>y;++y)o[h[y]]=nt[y];for(p=o[0]-i,i=o[0],0==p?u(r[0]):(a=32767+p,u(r[l[a]]),u(e[a])),c=63;c>0&&0==o[c];c--);if(0==c)return u(b),i;for(s=1;c>=s;){for(d=s;0==o[s]&&c>=s;++s);if(v=s-d,v>=16){for(k=v>>4,w=1;k>=w;++w)u(g);v=15&v}a=32767+o[s];u(f[(v<<4)+l[a]]);u(e[a]);s++}return c!=63&&u(b),i}function ei(){for(var t=String.fromCharCode,n=0;256>n;n++)st[n]=t(n)}function d(n){if(0>=n&&(n=1),n>100&&(n=100),tt!=n){var t=0;t=Math.floor(50>n?5e3/n:200-2*n);bt(t);tt=n}}function oi(){n||(n=50);ei();kt();dt();gt();d(n)}var g,y,nt,p,tt,it=(Math.round,Math.floor),w=new Array(64),b=new Array(64),rt=new Array(64),k=new Array(64),e=new Array(65535),l=new Array(65535),ut=new Array(64),o=new Array(64),a=[],s=0,f=7,ft=new Array(64),et=new Array(64),ot=new Array(64),st=new Array(256),i=new Array(2048),h=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ht=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ct=[0,1,2,3,4,5,6,7,8,9,10,11],lt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],at=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],vt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],yt=[0,1,2,3,4,5,6,7,8,9,10,11],pt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],wt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(n,t){var st,pt;t&&d(t);a=[];s=0;f=7;r(65496);ti();ri();ii(n.width,n.height);ui();fi();var at=0,vt=0,yt=0;s=0;f=7;this.encode.displayName="_encode_";for(var h,tt,it,ut,ht,o,l,w,e,ct=n.data,wt=n.width,lt=n.height,c=4*wt,b=0;lt>b;){for(h=0;c>h;){for(ht=c*b+h,o=ht,l=-1,w=0,e=0;64>e;e++)w=e>>3,l=4*(7&e),o=ht+w*c+l,b+w>=lt&&(o-=c*(b+1+w-lt)),h+l>=c&&(o-=h+l-c+4),tt=ct[o++],it=ct[o++],ut=ct[o++],ft[e]=(i[tt]+i[it+256>>0]+i[ut+512>>0]>>16)-128,et[e]=(i[tt+768>>0]+i[it+1024>>0]+i[ut+1280>>0]>>16)-128,ot[e]=(i[tt+1280>>0]+i[it+1536>>0]+i[ut+1792>>0]>>16)-128;at=v(ft,rt,at,g,nt);vt=v(et,k,vt,y,p);yt=v(ot,k,yt,y,p);h+=32}b+=8}return f>=0&&(st=[],st[1]=f+1,st[0]=(1<<f+1)-1,u(st)),r(65497),pt="data:image/jpeg;base64,"+btoa(a.join("")),a=[],pt};oi()}return n.encode=function(t,i){var r=new n(i);return r.encode(t)},n}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(n,t,i){var r,u=n.canvasToDataUrl;n.canvasToDataUrl=function(n,f,e){var h,c,l,o,s;return i.os.android?("image/jpeg"===f&&"undefined"==typeof r&&(o=u.apply(null,arguments),s=o.split(","),o=~s[0].indexOf("base64")?atob(s[1]):decodeURIComponent(s[1]),o=o.substring(0,2),r=255===o.charCodeAt(0)&&216===o.charCodeAt(1)),"image/jpeg"!==f||r?u.apply(null,arguments):(c=n.width,l=n.height,h=n.getContext("2d"),t.encode(h.getImageData(0,0,c,l),e))):u.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(n,t,i){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var n=this,t=new Image;t.onload=function(){n._info={type:n.type,width:this.width,height:this.height};n._metas||"image/jpeg"!==n.type?n.owner.trigger("load"):i.parseMeta(n._blob,function(t,i){n._metas=i;n.owner.trigger("load")})};t.onerror=function(){n.owner.trigger("error")};n._img=t},loadFromBlob:function(n){var t=this,r=t._img;t._blob=n;t.type=n.type;r.src=i.createObjectURL(n.getSource());t.owner.once("load",function(){i.revokeObjectURL(r.src)})},resize:function(n,t){var i=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,i,n,t);this._blob=null;this.modified=!0;this.owner.trigger("complete","resize")},crop:function(n,t,i,r,u){var f=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,e=this._img,s=e.naturalWidth,h=e.naturalHeight,c=this.getOrientation();u=u||1;f.width=i;f.height=r;o.preserveHeaders||this._rotate2Orientaion(f,c);this._renderImageToCanvas(f,e,-n,-t,s*u,h*u);this._blob=null;this.modified=!0;this.owner.trigger("complete","crop")},getAsBlob:function(n){var r,t=this._blob,u=this.options;if(n=n||this.type,this.modified||this.type!==n){if(r=this._canvas,"image/jpeg"===n){if(t=i.canvasToDataUrl(r,n,u.quality),u.preserveHeaders&&this._metas&&this._metas.imageHead)return t=i.dataURL2ArrayBuffer(t),t=i.updateImageHead(t,this._metas.imageHead),t=i.arrayBufferToBlob(t,n)}else t=i.canvasToDataUrl(r,n);t=i.dataURL2Blob(t)}return t},getAsDataUrl:function(n){var t=this.options;return n=n||this.type,"image/jpeg"===n?i.canvasToDataUrl(this._canvas,n,t.quality):this._canvas.toDataURL(n)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(n){return n?(this._info=n,this):this._info},meta:function(n){return n?(this._meta=n,this):this._meta},destroy:function(){var n=this._canvas;this._img.onload=null;n&&(n.getContext("2d").clearRect(0,0,n.width,n.height),n.width=n.height=0,this._canvas=null);this._img.src=r;this._img=this._blob=null},_resize:function(n,t,i,r){var u,f,e,s,h,o=this.options,c=n.width,l=n.height,a=this.getOrientation();~[5,6,7,8].indexOf(a)&&(i^=r,r^=i,i^=r);u=Math[o.crop?"max":"min"](i/c,r/l);o.allowMagnify||(u=Math.min(1,u));f=c*u;e=l*u;o.crop?(t.width=i,t.height=r):(t.width=f,t.height=e);s=(t.width-f)/2;h=(t.height-e)/2;o.preserveHeaders||this._rotate2Orientaion(t,a);this._renderImageToCanvas(t,n,s,h,f,e)},_rotate2Orientaion:function(n,t){var r=n.width,u=n.height,i=n.getContext("2d");switch(t){case 5:case 6:case 7:case 8:n.width=u;n.height=r}switch(t){case 2:i.translate(r,0);i.scale(-1,1);break;case 3:i.translate(r,u);i.rotate(Math.PI);break;case 4:i.translate(0,u);i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI);i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI);i.translate(0,-u);break;case 7:i.rotate(.5*Math.PI);i.translate(r,-u);i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI);i.translate(-r,0)}},_renderImageToCanvas:function(){function t(n,t,i){var o,s,u,f=document.createElement("canvas"),h=f.getContext("2d"),e=0,c=i,r=i;for(f.width=1,f.height=i,h.drawImage(n,0,0),o=h.getImageData(0,0,1,i).data;r>e;)s=o[4*(r-1)+3],0===s?c=r:e=r,r=c+e>>1;return u=r/i,0===u?1:u}function i(n){var t,i,r=n.naturalWidth,u=n.naturalHeight;return r*u>1048576?(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(n,-r+1,0),0===i.getImageData(0,0,1,1).data[3]):!1}return n.os.ios?n.os.ios>=7?function(n,i,r,u,f,e){var o=i.naturalWidth,s=i.naturalHeight,h=t(i,o,s);return n.getContext("2d").drawImage(i,0,0,o*h,s*h,r,u,f,e)}:function(n,r,u,f,e,o){var h,c,d,y,p,l,w,a=r.naturalWidth,v=r.naturalHeight,b=n.getContext("2d"),nt=i(r),tt="image/jpeg"===this.type,s=1024,k=0,g=0;for(nt&&(a/=2,v/=2),b.save(),h=document.createElement("canvas"),h.width=h.height=s,c=h.getContext("2d"),d=tt?t(r,a,v):1,y=Math.ceil(s*e/a),p=Math.ceil(s*o/v/d);v>k;){for(l=0,w=0;a>l;)c.clearRect(0,0,s,s),c.drawImage(r,-l,-k),b.drawImage(h,0,0,s,s,u+w,f+g,y,p),l+=s,w+=y;k+=s;g+=p}b.restore();h=c=null}:function(t){var r=n.slice(arguments,1),i=t.getContext("2d");i.drawImage.apply(i,r)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(n,t){var i=n.noop,r=n.$;return t.register("Transport",{init:function(){this._status=0;this._response=null},send:function(){var f,e,u,o=this.owner,i=this.options,t=this._initAjax(),h=o._blob,s=i.server;i.sendAsBinary?(s+=(/\?/.test(s)?"&":"?")+r.param(o._formData),e=h.getSource()):(f=new FormData,r.each(o._formData,function(n,t){f.append(n,t)}),f.append(i.fileVal,h.getSource(),i.filename||o._formData.name||""));i.withCredentials&&"withCredentials"in t?(t.open(i.method,s,!0),t.withCredentials=!0):t.open(i.method,s);this._setRequestHeader(t,i.headers);e?(t.overrideMimeType&&t.overrideMimeType("application/octet-stream"),n.os.android?(u=new FileReader,u.onload=function(){t.send(this.result);u=u.onload=null},u.readAsArrayBuffer(e)):t.send(e)):t.send(f)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var n=this._xhr;n&&(n.upload.onprogress=i,n.onreadystatechange=i,n.abort(),this._xhr=n=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new XMLHttpRequest,r=this.options;return!r.withCredentials||"withCredentials"in n||"undefined"==typeof XDomainRequest||(n=new XDomainRequest),n.upload.onprogress=function(n){var i=0;return n.lengthComputable&&(i=n.loaded/n.total),t.trigger("progress",i)},n.onreadystatechange=function(){if(4===n.readyState)return(n.upload.onprogress=i,n.onreadystatechange=i,t._xhr=null,t._status=n.status,n.status>=200&&n.status<300?(t._response=n.responseText,t.trigger("load")):n.status>=500&&n.status<600?(t._response=n.responseText,t.trigger("error","server")):t.trigger("error",t._status?"http":"abort"))},t._xhr=n,n},_setRequestHeader:function(n,t){r.each(t,function(t,i){n.setRequestHeader(t,i)})},_parseJson:function(n){var t;try{t=JSON.parse(n)}catch(i){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(n){var o=function(n,t){return n+t&4294967295},h=function(n,t,i,r,u,f){return t=o(o(t,n),o(r,f)),o(t<<u|t>>>32-u,i)},i=function(n,t,i,r,u,f,e){return h(t&i|~t&r,n,t,u,f,e)},r=function(n,t,i,r,u,f,e){return h(t&r|i&~r,n,t,u,f,e)},u=function(n,t,i,r,u,f,e){return h(t^i^r,n,t,u,f,e)},f=function(n,t,i,r,u,f,e){return h(i^(t|~r),n,t,u,f,e)},e=function(n,t){var e=n[0],s=n[1],h=n[2],c=n[3];e=i(e,s,h,c,t[0],7,-680876936);c=i(c,e,s,h,t[1],12,-389564586);h=i(h,c,e,s,t[2],17,606105819);s=i(s,h,c,e,t[3],22,-1044525330);e=i(e,s,h,c,t[4],7,-176418897);c=i(c,e,s,h,t[5],12,1200080426);h=i(h,c,e,s,t[6],17,-1473231341);s=i(s,h,c,e,t[7],22,-45705983);e=i(e,s,h,c,t[8],7,1770035416);c=i(c,e,s,h,t[9],12,-1958414417);h=i(h,c,e,s,t[10],17,-42063);s=i(s,h,c,e,t[11],22,-1990404162);e=i(e,s,h,c,t[12],7,1804603682);c=i(c,e,s,h,t[13],12,-40341101);h=i(h,c,e,s,t[14],17,-1502002290);s=i(s,h,c,e,t[15],22,1236535329);e=r(e,s,h,c,t[1],5,-165796510);c=r(c,e,s,h,t[6],9,-1069501632);h=r(h,c,e,s,t[11],14,643717713);s=r(s,h,c,e,t[0],20,-373897302);e=r(e,s,h,c,t[5],5,-701558691);c=r(c,e,s,h,t[10],9,38016083);h=r(h,c,e,s,t[15],14,-660478335);s=r(s,h,c,e,t[4],20,-405537848);e=r(e,s,h,c,t[9],5,568446438);c=r(c,e,s,h,t[14],9,-1019803690);h=r(h,c,e,s,t[3],14,-187363961);s=r(s,h,c,e,t[8],20,1163531501);e=r(e,s,h,c,t[13],5,-1444681467);c=r(c,e,s,h,t[2],9,-51403784);h=r(h,c,e,s,t[7],14,1735328473);s=r(s,h,c,e,t[12],20,-1926607734);e=u(e,s,h,c,t[5],4,-378558);c=u(c,e,s,h,t[8],11,-2022574463);h=u(h,c,e,s,t[11],16,1839030562);s=u(s,h,c,e,t[14],23,-35309556);e=u(e,s,h,c,t[1],4,-1530992060);c=u(c,e,s,h,t[4],11,1272893353);h=u(h,c,e,s,t[7],16,-155497632);s=u(s,h,c,e,t[10],23,-1094730640);e=u(e,s,h,c,t[13],4,681279174);c=u(c,e,s,h,t[0],11,-358537222);h=u(h,c,e,s,t[3],16,-722521979);s=u(s,h,c,e,t[6],23,76029189);e=u(e,s,h,c,t[9],4,-640364487);c=u(c,e,s,h,t[12],11,-421815835);h=u(h,c,e,s,t[15],16,530742520);s=u(s,h,c,e,t[2],23,-995338651);e=f(e,s,h,c,t[0],6,-198630844);c=f(c,e,s,h,t[7],10,1126891415);h=f(h,c,e,s,t[14],15,-1416354905);s=f(s,h,c,e,t[5],21,-57434055);e=f(e,s,h,c,t[12],6,1700485571);c=f(c,e,s,h,t[3],10,-1894986606);h=f(h,c,e,s,t[10],15,-1051523);s=f(s,h,c,e,t[1],21,-2054922799);e=f(e,s,h,c,t[8],6,1873313359);c=f(c,e,s,h,t[15],10,-30611744);h=f(h,c,e,s,t[6],15,-1560198380);s=f(s,h,c,e,t[13],21,1309151649);e=f(e,s,h,c,t[4],6,-145523070);c=f(c,e,s,h,t[11],10,-1120210379);h=f(h,c,e,s,t[2],15,718787259);s=f(s,h,c,e,t[9],21,-343485551);n[0]=o(e,n[0]);n[1]=o(s,n[1]);n[2]=o(h,n[2]);n[3]=o(c,n[3])},l=function(n){for(var i=[],t=0;64>t;t+=4)i[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return i},a=function(n){for(var i=[],t=0;64>t;t+=4)i[t>>2]=n[t]+(n[t+1]<<8)+(n[t+2]<<16)+(n[t+3]<<24);return i},c=function(n){for(var f,i,r,o,s,h=n.length,u=[1732584193,-271733879,-1732584194,271733878],t=64;h>=t;t+=64)e(u,l(n.substring(t-64,t)));for(n=n.substring(t-64),f=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;f>t;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(e(u,i),t=0;16>t;t+=1)i[t]=0;return r=8*h,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),s=parseInt(r[1],16)||0,i[14]=o,i[15]=s,e(u,i),u},y=function(n){for(var o,i,r,s,h,f=n.length,u=[1732584193,-271733879,-1732584194,271733878],t=64;f>=t;t+=64)e(u,a(n.subarray(t-64,t)));for(n=f>t-64?n.subarray(t-64):new Uint8Array(0),o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;o>t;t+=1)i[t>>2]|=n[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(e(u,i),t=0;16>t;t+=1)i[t]=0;return r=8*f,r=r.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(r[2],16),h=parseInt(r[1],16)||0,i[14]=s,i[15]=h,e(u,i),u},v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(n){for(var i="",t=0;4>t;t+=1)i+=v[n>>8*t+4&15]+v[n>>8*t&15];return i},s=function(n){for(var t=0;t<n.length;t+=1)n[t]=p(n[t]);return n.join("")},w=function(n){return s(c(n))},t=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==w("hello")&&(o=function(n,t){var i=(65535&n)+(65535&t),r=(n>>16)+(t>>16)+(i>>16);return r<<16|65535&i}),t.prototype.append=function(n){return/[\u0080-\uFFFF]/.test(n)&&(n=unescape(encodeURIComponent(n))),this.appendBinary(n),this},t.prototype.appendBinary=function(n){this._buff+=n;this._length+=n.length;for(var i=this._buff.length,t=64;i>=t;t+=64)e(this._state,l(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},t.prototype.end=function(n){for(var i,r=this._buff,u=r.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;u>t;t+=1)f[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(f,u),i=n?this._state:s(this._state),this.reset(),i},t.prototype._finish=function(n,t){var r,u,f,i=t;if(n[i>>2]|=128<<(i%4<<3),i>55)for(e(this._state,n),i=0;16>i;i+=1)n[i]=0;r=8*this._length;r=r.toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(r[2],16);f=parseInt(r[1],16)||0;n[14]=u;n[15]=f;e(this._state,n)},t.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},t.prototype.destroy=function(){delete this._state;delete this._buff;delete this._length},t.hash=function(n,t){/ [\u0080 - \uFFFF] /.test(n)&&(n=unescape(encodeURIComponent(n)));var i=c(n);return t?i:s(i)},t.hashBinary=function(n,t){var i=c(n);return t?i:s(i)},t.ArrayBuffer=function(){this.reset()},t.ArrayBuffer.prototype.append=function(n){var t,i=this._concatArrayBuffer(this._buff,n),r=i.length;for(this._length+=n.byteLength,t=64;r>=t;t+=64)e(this._state,a(i.subarray(t-64,t)));return this._buff=r>t-64?i.subarray(t-64):new Uint8Array(0),this},t.ArrayBuffer.prototype.end=function(n){for(var i,r=this._buff,u=r.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;u>t;t+=1)f[t>>2]|=r[t]<<(t%4<<3);return this._finish(f,u),i=n?this._state:s(this._state),this.reset(),i},t.ArrayBuffer.prototype._finish=t.prototype._finish,t.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},t.ArrayBuffer.prototype.destroy=t.prototype.destroy,t.ArrayBuffer.prototype._concatArrayBuffer=function(n,t){var r=n.length,i=new Uint8Array(r+t.byteLength);return i.set(n),i.set(new Uint8Array(t),r),i},t.ArrayBuffer.hash=function(n,t){var i=y(new Uint8Array(n));return t?i:s(i)},n.register("Md5",{init:function(){},loadFromBlob:function(n){var u,r,i=n.getSource(),f=2097152,h=Math.ceil(i.size/f),s=0,e=this.owner,o=new t.ArrayBuffer,c=this,l=i.mozSlice||i.webkitSlice||i.slice;r=new FileReader;(u=function(){var t,a;t=s*f;a=Math.min(t+f,i.size);r.onload=function(t){o.append(t.target.result);e.trigger("progress",{total:n.size,loaded:a})};r.onloadend=function(){r.onloadend=r.onload=null;++s<h?setTimeout(u,1):setTimeout(function(){e.trigger("load");c.result=o.end();u=n=i=o=null;e.trigger("complete")},50)};r.readAsArrayBuffer(l.call(i,t,a))})()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,i,r){function s(){var n;try{n=navigator.plugins["Shockwave Flash"];n=n.description}catch(t){try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){n="0.0"}}return n=n.match(/\d+/g),parseFloat(n[0]+"."+n[1],10)}function u(){function c(n,t){var f,i,u=n.type||n;f=u.split("::");i=f[0];u=f[1];"Ready"===u&&i===r.uid?r.trigger("ready"):e[i]&&e[i].trigger(u.toLowerCase(),n,t)}var u={},e={},s=this.destroy,r=this,h=t.guid("webuploader_");i.apply(r,arguments);r.type=o;r.exec=function(n,i){var o,s=this,h=s.uid,c=t.slice(arguments,2);return e[h]=s,f[n]&&(u[h]||(u[h]=new f[n](s,r)),o=u[h],o[i])?o[i].apply(o,c):r.flashExec.apply(s,arguments)};n[h]=function(){var n=arguments;setTimeout(function(){c.apply(null,n)},1)};this.jsreciver=h;this.destroy=function(){return s&&s.apply(this,arguments)};this.flashExec=function(n,i){var u=r.getFlash(),f=t.slice(arguments,2);return u.exec(this.uid,n,i,f)}}var e=t.$,o="flash",f={};return t.inherits(i,{constructor:u,init:function(){var n,i=this.getContainer(),r=this.options;i.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});n='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+r.swf+'" ';t.browser.ie&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');n+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+r.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /><\/object>';i.html(n)},getFlash:function(){return this._flash?this._flash:(this._flash=e("#"+this.uid).get(0),this._flash)}}),u.register=function(n,i){return f[n]=t.inherits(r,e.extend({flashExec:function(){var n=this.owner,t=this.getRuntime();return t.flashExec.apply(n,arguments)}},i))},s()>=11.4&&i.addRuntime(o,u),u}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(n,t){var i=n.$;return t.register("FilePicker",{init:function(n){for(var t=i.extend({},n),u=t.accept&&t.accept.length,r=0;u>r;r++)t.accept[r].title||(t.accept[r].title="Files");delete t.button;delete t.id;delete t.container;this.flashExec("FilePicker","init",t)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(n){return n.register("Image",{loadFromBlob:function(n){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info());t.meta()&&this.flashExec("Image","meta",t.meta());this.flashExec("Image","loadFromBlob",n.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,i,r){var u=t.$;return i.register("Transport",{init:function(){this._status=0;this._response=null;this._responseJson=null},send:function(){var e,i=this.owner,n=this.options,t=this._initAjax(),r=i._blob,f=n.server;t.connectRuntime(r.ruid);n.sendAsBinary?(f+=(/\?/.test(f)?"&":"?")+u.param(i._formData),e=r.uid):(u.each(i._formData,function(n,i){t.exec("append",n,i)}),t.exec("appendBlob",n.fileVal,r.uid,n.filename||i._formData.name||""));this._setRequestHeader(t,n.headers);t.exec("send",{method:n.method,url:f,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var n=this._xhr;n&&(n.exec("abort"),n.destroy(),this._xhr=n=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,i=new r("XMLHttpRequest");return i.on("uploadprogress progress",function(n){var i=n.loaded/n.total;return i=Math.min(1,Math.max(0,i)),t.trigger("progress",i)}),i.on("load",function(){var e,r=i.exec("getStatus"),f=!1,u="";return i.off(),t._xhr=null,r>=200&&300>r?f=!0:r>=500&&600>r?(f=!0,u="server"):u="http",f&&(t._response=i.exec("getResponse"),t._response=decodeURIComponent(t._response),e=n.JSON&&n.JSON.parse||function(n){try{return new Function("return "+n).call()}catch(t){return{}}},t._responseJson=t._response?e(t._response):{}),i.destroy(),i=null,u?t.trigger("error",u):t.trigger("load")}),i.on("error",function(){i.off();t._xhr=null;t.trigger("error","http")}),t._xhr=i,i},_setRequestHeader:function(n,t){u.each(t,function(t,i){n.exec("setRequestHeader",t,i)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(n,t){return n.register("Blob",{slice:function(n,i){var r=this.flashExec("Blob","slice",n,i);return new t(r.uid,r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(n){return n.register("Md5",{init:function(){},loadFromBlob:function(n){return this.flashExec("Md5","loadFromBlob",n.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(n){return n}),t("widgets/log",["base","uploader","widgets/widget"],function(n,t){function i(n){var t=f.extend({},u,n),i=e.replace(/^(.*)\?/,"$1"+f.param(t)),r=new Image;r.src=i}var u,f=n.$,e=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",r=(location.hostname||location.host||"protected").toLowerCase(),o=r&&/baidu/i.exec(r);if(o)return u={dv:3,master:"webuploader",online:/test/.exec(r)?0:1,module:"",product:r,type:0},t.register({name:"log",init:function(){var r=this.owner,n=0,t=0;r.on("error",function(n){i({type:2,c_error_code:n})}).on("uploadError",function(n,t){i({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(i){n++;t+=i.size}).on("uploadFinished",function(){i({c_count:n,c_size:t});n=t=0});i({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(n){return n}),i("webuploader")});!function(n,t,i){var s,h,v,y,c,u,e,a,p,f,l,o,r;n.noop=n.noop||function(){};c=0;u=n(t);e=n(document);a=n("html");p=document.documentElement;f=t.VBArray&&!t.XMLHttpRequest;l="createTouch"in document&&!("onmousemove"in p)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent);o="artDialog"+ +new Date;r=function(t,u,f){var h,v,e,a;t=t||{};("string"==typeof t||1===t.nodeType)&&(t={content:t,fixed:!l});v=r.defaults;e=t.follow=1===this.nodeType&&this||t.follow;for(a in v)t[a]===i&&(t[a]=v[a]);return n.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(n,r){t[n]=t[n]!==i?t[n]:t[r]}),"string"==typeof e&&(e=n(e)[0]),t.id=e&&e[o+"follow"]||t.id||o+c,h=r.list[t.id],e&&h?h.follow(e).zIndex().focus():h?h.zIndex().focus():(l&&(t.fixed=!1),n.isArray(t.button)||(t.button=t.button?[t.button]:[]),u!==i&&(t.ok=u),f!==i&&(t.cancel=f),t.ok&&t.button.push({name:t.okVal,callback:t.ok,focus:!0}),t.cancel&&t.button.push({name:t.cancelVal,callback:t.cancel}),r.defaults.zIndex=t.zIndex,c++,r.list[t.id]=s?s._init(t):new r.fn._init(t))};r.fn=r.prototype={version:"4.1.7",closed:!0,_init:function(n){var r,i=this,u=n.icon,e=u&&(f?{png:"icons/"+u+".png"}:{backgroundImage:"url('"+n.path+"/skins/icons/"+u+".png')"});return i.closed=!1,i.config=n,i.DOM=r=i.DOM||i._getDOM(),r.wrap.addClass(n.skin),r.close[n.cancel===!1?"hide":"show"](),r.icon[0].style.display=u?"":"none",r.iconBg.css(e||{background:"none"}),r.se.css("cursor",n.resize?"se-resize":"auto"),r.title.css("cursor",n.drag?"move":"auto"),r.content.css("padding",n.padding),i[n.show?"show":"hide"](!0),i.button(n.button).title(n.title).content(n.content,!0).size(n.width,n.height).time(n.time),n.follow?i.follow(n.follow):i.position(n.left,n.top),i.zIndex().focus(),n.lock&&i.lock(),i._addEvent(),i._ie6PngFix(),s=null,n.init&&n.init.call(i,t),i},content:function(n){var u,f,e,l,t=this,a=t.DOM,r=a.wrap[0],o=r.offsetWidth,s=r.offsetHeight,v=parseInt(r.style.left),y=parseInt(r.style.top),p=r.style.width,h=a.content,c=h[0];return t._elemBack&&t._elemBack(),r.style.width="auto",n===i?c:("string"==typeof n?h.html(n):n&&1===n.nodeType&&(l=n.style.display,u=n.previousSibling,f=n.nextSibling,e=n.parentNode,t._elemBack=function(){u&&u.parentNode?u.parentNode.insertBefore(n,u.nextSibling):f&&f.parentNode?f.parentNode.insertBefore(n,f):e&&e.appendChild(n);n.style.display=l;t._elemBack=null},h.html(""),c.appendChild(n),n.style.display="block"),arguments[1]||(t.config.follow?t.follow(t.config.follow):(o=r.offsetWidth-o,s=r.offsetHeight-s,v-=o/2,y-=s/2,r.style.left=Math.max(v,0)+"px",r.style.top=Math.max(y,0)+"px"),p&&"auto"!==p&&(r.style.width=r.offsetWidth+"px"),t._autoPositionType()),t._ie6SelectFix(),t._runScript(c),t)},title:function(n){var r=this.DOM,u=r.wrap,t=r.title,f="aui_state_noTitle";return n===i?t[0]:(n===!1?(t.hide().html(""),u.addClass(f)):(t.show().html(n||""),u.removeClass(f)),this)},position:function(n,t){var r=this,p=r.config,s=r.DOM.wrap[0],h=f?!1:p.fixed,c=f&&r.config.fixed,l=e.scrollLeft(),a=e.scrollTop(),v=h?0:l,y=h?0:a,w=u.width(),b=u.height(),k=s.offsetWidth,d=s.offsetHeight,o=s.style;return(n||0===n)&&(r._left=-1!==n.toString().indexOf("%")?n:null,n=r._toNumber(n,w-k),"number"==typeof n?(n=c?n+=l:n+v,o.left=Math.max(n,v)+"px"):"string"==typeof n&&(o.left=n)),(t||0===t)&&(r._top=-1!==t.toString().indexOf("%")?t:null,t=r._toNumber(t,b-d),"number"==typeof t?(t=c?t+=a:t+y,o.top=Math.max(t,y)+"px"):"string"==typeof t&&(o.top=t)),n!==i&&t!==i&&(r._follow=null,r._autoPositionType()),r},size:function(n,t){var o,s,h,c,i=this,l=(i.config,i.DOM),r=l.wrap,e=l.main,a=r[0].style,f=e[0].style;return n&&(i._width=-1!==n.toString().indexOf("%")?n:null,o=u.width()-r[0].offsetWidth+e[0].offsetWidth,h=i._toNumber(n,o),n=h,"number"==typeof n?(a.width="auto",f.width=Math.max(i.config.minWidth,n)+"px",a.width=r[0].offsetWidth+"px"):"string"==typeof n&&(f.width=n,"auto"===n&&r.css("width","auto"))),t&&(i._height=-1!==t.toString().indexOf("%")?t:null,s=u.height()-r[0].offsetHeight+e[0].offsetHeight,c=i._toNumber(t,s),t=c,"number"==typeof t?f.height=Math.max(i.config.minHeight,t)+"px":"string"==typeof t&&(f.height=t)),i._ie6SelectFix(),i},follow:function(t){var w,b,rt,ut,k,d,s,g,ft,h,c,v,y,nt,l,p,r,a,tt,it,i=this,et=i.config;return("string"==typeof t||t&&1===t.nodeType)&&(w=n(t),t=w[0]),t&&(t.offsetWidth||t.offsetHeight)?(b=o+"follow",rt=u.width(),ut=u.height(),k=e.scrollLeft(),d=e.scrollTop(),s=w.offset(),g=t.offsetWidth,ft=t.offsetHeight,h=f?!1:et.fixed,c=h?s.left-k:s.left,v=h?s.top-d:s.top,y=i.DOM.wrap[0],nt=y.style,l=y.offsetWidth,p=y.offsetHeight,r=c-(l-g)/2,a=v+ft,tt=h?0:k,it=h?0:d,r=tt>r?c:r+l>rt&&c-l>tt?c-l+g:r,a=a+p>ut+it&&v-p>it?v-p:a,nt.left=r+"px",nt.top=a+"px",i._follow&&i._follow.removeAttribute(b),i._follow=t,t[b]=et.id,i._autoPositionType(),i):i.position(i._left,i._top)},button:function(){var t=this,u=arguments,c=t.DOM,f=c.buttons,e=f[0],s="aui_state_highlight",r=t._listeners=t._listeners||{},h=n.isArray(u[0])?u[0]:[].slice.call(u);return u[0]===i?e:(n.each(h,function(i,u){var f=u.name,c=!r[f],h=c?document.createElement("button"):r[f].elem;r[f]||(r[f]={});u.callback&&(r[f].callback=u.callback);u.className&&(h.className=u.className);u.focus&&(t._focus&&t._focus.removeClass(s),t._focus=n(h).addClass(s),t.focus());h.setAttribute("type","button");h[o+"callback"]=f;h.disabled=!!u.disabled;c&&(h.innerHTML=f,r[f].elem=h,e.appendChild(h))}),f[0].style.display=h.length?"":"none",t._ie6SelectFix(),t)},show:function(){return this.DOM.wrap.show(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(){return this.DOM.wrap.hide(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(){var n,i,u,c,e,h,f;if(this.closed)return this;if(n=this,i=n.DOM,u=i.wrap,c=r.list,e=n.config.close,h=n.config.follow,n.time(),"function"==typeof e&&e.call(n,t)===!1)return n;n.unlock();n._elemBack&&n._elemBack();u[0].className=u[0].style.cssText="";i.title.html("");i.content.html("");i.buttons.html("");r.focus===n&&(r.focus=null);h&&h.removeAttribute(o+"follow");delete c[n.config.id];n._removeEvent();n.hide(!0)._setAbsolute();for(f in n)n.hasOwnProperty(f)&&"DOM"!==f&&delete n[f];return s?u.remove():s=n,n},time:function(n){var t=this,r=t.config.cancelVal,i=t._timer;return i&&clearTimeout(i),n&&(t._timer=setTimeout(function(){t._click(r)},1e3*n)),t},focus:function(){try{if(this.config.focus){var n=this._focus&&this._focus[0]||this.DOM.close[0];n&&n.focus()}}catch(t){}return this},zIndex:function(){var n=this,f=n.DOM,t=f.wrap,i=r.focus,u=r.defaults.zIndex++;return t.css("zIndex",u),n._lockMask&&n._lockMask.css("zIndex",u-1),i&&i.DOM.wrap.removeClass("aui_state_focus"),r.focus=n,t.addClass("aui_state_focus"),n},lock:function(){if(this._lock)return this;var t=this,h=r.defaults.zIndex-1,c=t.DOM.wrap,u=t.config,a=e.width(),v=e.height(),s=t._lockMaskWrap||n(document.body.appendChild(document.createElement("div"))),i=t._lockMask||n(s[0].appendChild(document.createElement("div"))),o="(document).documentElement",y=l?"width:"+a+"px;height:"+v+"px":"width:100%;height:100%",p=f?"position:absolute;left:expression("+o+".scrollLeft);top:expression("+o+".scrollTop);width:expression("+o+".clientWidth);height:expression("+o+".clientHeight)":"";return t.zIndex(),c.addClass("aui_state_lock"),s[0].style.cssText=y+";position:fixed;z-index:"+h+";top:0;left:0;overflow:hidden;"+p,i[0].style.cssText="height:100%;background:"+u.background+";filter:alpha(opacity=0);opacity:0",f&&i.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"><\/iframe>'),i.stop(),i.bind("click",function(){t._reset()}).bind("dblclick",function(){t._click(t.config.cancelVal)}),0===u.duration?i.css({opacity:u.opacity}):i.animate({opacity:u.opacity},u.duration),t._lockMaskWrap=s,t._lockMask=i,t._lock=!0,t},unlock:function(){var t,i,n=this,r=n._lockMaskWrap,u=n._lockMask;return n._lock?(t=r[0].style,i=function(){f&&(t.removeExpression("width"),t.removeExpression("height"),t.removeExpression("left"),t.removeExpression("top"));t.cssText="display:none";s&&r.remove()},u.stop().unbind(),n.DOM.wrap.removeClass("aui_state_lock"),n.config.duration?u.animate({opacity:0},n.config.duration,i):i(),n._lock=!1,n):n},_getDOM:function(){var f,t,e,u,o,i=document.createElement("div"),s=document.body;for(i.style.cssText="position:absolute;left:0;top:0",i.innerHTML=r._templates,s.insertBefore(i,s.firstChild),t=0,e={wrap:n(i)},u=i.getElementsByTagName("*"),o=u.length;o>t;t++)f=u[t].className.split("aui_")[1],f&&(e[f]=n(u[t]));return e},_toNumber:function(n,t){if(!n&&0!==n||"number"==typeof n)return n;var i=n.length-1;return n.lastIndexOf("px")===i?n=parseInt(n):n.lastIndexOf("%")===i&&(n=parseInt(t*n.split("%")[0]/100)),n},_ie6PngFix:f?function(){for(var n,t,f,i,u=0,o=r.defaults.path+"/skins/",e=this.DOM.wrap[0].getElementsByTagName("*");u<e.length;u++)n=e[u],t=n.currentStyle.png,t&&(f=o+t,i=n.runtimeStyle,i.backgroundImage="none",i.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+f+"',sizingMethod='crop')")}:n.noop,_ie6SelectFix:f?function(){var t=this.DOM.wrap,i=t[0],f=o+"iframeMask",n=t[f],r=i.offsetWidth,u=i.offsetHeight;r+="px";u+="px";n?(n.style.width=r,n.style.height=u):(n=i.appendChild(document.createElement("iframe")),t[f]=n,n.src="about:blank",n.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+r+";height:"+u)}:n.noop,_runScript:function(n){for(var u,i=0,f=0,r=n.getElementsByTagName("script"),e=r.length,t=[];e>i;i++)"text/dialog"===r[i].type&&(t[f]=r[i].innerHTML,f++);t.length&&(t=t.join(""),u=new Function(t),u.call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){return f&&n(function(){var t="backgroundAttachment";"fixed"!==a.css(t)&&"fixed"!==n("body").css(t)&&a.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}),function(){var r,u,o,s,n,t=this.DOM.wrap,i=t[0].style;f?(r=parseInt(t.css("left")),u=parseInt(t.css("top")),o=e.scrollLeft(),s=e.scrollTop(),n="(document.documentElement)",this._setAbsolute(),i.setExpression("left","eval("+n+".scrollLeft+"+(r-o)+') + "px"'),i.setExpression("top","eval("+n+".scrollTop+"+(u-s)+') + "px"')):i.position="fixed"}}(),_setAbsolute:function(){var n=this.DOM.wrap[0].style;f&&(n.removeExpression("left"),n.removeExpression("top"));n.position="absolute"},_click:function(n){var i=this,r=i._listeners[n]&&i._listeners[n].callback;return"function"!=typeof r||r.call(i,t)!==!1?i.close():i},_reset:function(n){var i,t=this,h=t._winSize||u.width()*u.height(),r=t._follow,f=t._width,e=t._height,o=t._left,s=t._top;n&&(i=t._winSize=u.width()*u.height(),h===i)||((f||e)&&t.size(f,e),r?t.follow(r):(o||s)&&t.position(o,s))},_addEvent:function(){var i,n=this,f=n.config,e="CollectGarbage"in t,r=n.DOM;n._winResize=function(){i&&clearTimeout(i);i=setTimeout(function(){n._reset(e)},40)};u.bind("resize",n._winResize);r.wrap.bind("click",function(t){var i,u=t.target;return u.disabled?!1:u===r.close[0]?(n._click(f.cancelVal),!1):(i=u[o+"callback"],i&&n._click(i),n._ie6SelectFix(),void 0)}).bind("mousedown",function(){n.zIndex()})},_removeEvent:function(){var n=this,t=n.DOM;t.wrap.unbind();u.unbind("resize",n._winResize)}};r.fn._init.prototype=r.fn;n.fn.dialog=n.fn.artDialog=function(){var n=arguments;return this[this.live?"live":"bind"]("click",function(){return r.apply(this,n),!1}),this};r.focus=null;r.get=function(n){return n===i?r.list:r.list[n]};r.list={};e.bind("keydown",function(n){var i=n.target,u=i.nodeName,t=r.focus,f=n.keyCode;t&&t.config.esc&&!/^INPUT|TEXTAREA$/.test(u)&&27===f&&t._click(t.config.cancelVal)});y=t._artDialog_path||function(n,i,r){for(i in n)n[i].src&&-1!==n[i].src.indexOf("artDialog")&&(r=n[i]);return h=r||n[n.length-1],r=h.src.replace(/\\/g,"/"),t._artDialog_path=r.lastIndexOf("/")<0?".":r.substring(0,r.lastIndexOf("/"))}(document.getElementsByTagName("script"));u.bind("load",function(){setTimeout(function(){if(!c){if(v=r.defaults.skin){var n=document.createElement("link");n.rel="stylesheet";n.href="/js/artDialog4.1.7/skins/"+v+".css?"+r.fn.version;h.parentNode.insertBefore(n,h)}r({left:"-9999em",time:9,fixed:!1,lock:!1,focus:!1})}},150)});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(w){}r._templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"><\/td><td class="aui_n"><\/td><td class="aui_ne"><\/td><\/tr><tr><td class="aui_w"><\/td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"><\/div><a class="aui_close" href="javascript:;">×<\/a><\/div><\/td><\/tr><tr><td class="aui_icon"><div class="aui_iconBg"><\/div><\/td><td class="aui_main"><div class="aui_content"><\/div><\/td><\/tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"><\/div><\/td><\/tr><\/tbody><\/table><\/div><\/td><td class="aui_e"><\/td><\/tr><tr><td class="aui_sw"><\/td><td class="aui_s"><\/td><td class="aui_se"><\/td><\/tr><\/tbody><\/table><\/div>';r.defaults={content:'<div class="aui_loading"><span>loading..<\/span><\/div>',title:"消息",button:null,ok:null,cancel:null,init:null,close:null,okVal:"确定",cancelVal:"取消",width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"20px 25px",skin:"",icon:null,time:null,esc:!0,focus:!0,show:!0,follow:null,path:y,lock:!1,background:"#000",opacity:.7,duration:300,fixed:!1,left:"50%",top:"38.2%",zIndex:1987,resize:!0,drag:!0};t.artDialog=n.dialog=n.artDialog=r}(this.art||this.jQuery&&(this.art=jQuery),this),function(n){var t,e,r=n(window),i=n(document),u=document.documentElement,f=!("minWidth"in u.style),o="onlosecapture"in u,s="setCapture"in u;artDialog.dragEvent=function(){var n=this,t=function(t){var i=n[t];n[t]=function(){return i.apply(n,arguments)}};t("start");t("move");t("end")};artDialog.dragEvent.prototype={onstart:n.noop,start:function(n){return i.bind("mousemove",this.move).bind("mouseup",this.end),this._sClientX=n.clientX,this._sClientY=n.clientY,this.onstart(n.clientX,n.clientY),!1},onmove:n.noop,move:function(n){return this._mClientX=n.clientX,this._mClientY=n.clientY,this.onmove(n.clientX-this._sClientX,n.clientY-this._sClientY),!1},onend:n.noop,end:function(n){return i.unbind("mousemove",this.move).unbind("mouseup",this.end),this.onend(n.clientX,n.clientY),!1}};e=function(n){var h,y,p,w,b,a,e=artDialog.focus,c=e.DOM,u=c.wrap,l=c.title,v=c.main,k="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(n){}};t.onstart=function(){a?(y=v[0].offsetWidth,p=v[0].offsetHeight):(w=u[0].offsetLeft,b=u[0].offsetTop);i.bind("dblclick",t.end);!f&&o?l.bind("losecapture",t.end):r.bind("blur",t.end);s&&l[0].setCapture();u.addClass("aui_state_drag");e.focus()};t.onmove=function(n,t){var r,i,f,o,s,c;a?(r=u[0].style,i=v[0].style,f=n+y,o=t+p,r.width="auto",i.width=Math.max(0,f)+"px",r.width=u[0].offsetWidth+"px",i.height=Math.max(0,o)+"px"):(i=u[0].style,s=Math.max(h.minX,Math.min(h.maxX,n+w)),c=Math.max(h.minY,Math.min(h.maxY,t+b)),i.left=s+"px",i.top=c+"px");k();e._ie6SelectFix()};t.onend=function(){i.unbind("dblclick",t.end);!f&&o?l.unbind("losecapture",t.end):r.unbind("blur",t.end);s&&l[0].releaseCapture();f&&!e.closed&&e._autoPositionType();u.removeClass("aui_state_drag")};a=n.target===c.se[0]?!0:!1;h=function(){var t,n=e.DOM.wrap[0],u="fixed"===n.style.position,s=n.offsetWidth,h=n.offsetHeight,c=r.width(),l=r.height(),f=u?0:i.scrollLeft(),o=u?0:i.scrollTop(),a=c-s+f;return t=l-h+o,{minX:f,minY:o,maxX:a,maxY:t}}();t.start(n)};i.bind("mousedown",function(n){var i,r,u,f=artDialog.focus;if(f)return(i=n.target,r=f.config,u=f.DOM,r.drag!==!1&&i===u.title[0]||r.resize!==!1&&i===u.se[0]?(t=t||new artDialog.dragEvent,e(n),!1):void 0)})}(this.art||this.jQuery&&(this.art=jQuery));
/*!
 * artDialog iframeTools
 * Date: 2011-12-08 1:32
 * http://code.google.com/p/artdialog/
 * (c) 2009-2011 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */
eval(function(n,t,i,r,u,f){function e(n){return n<62?String.fromCharCode(n+=n<26?65:n<52?71:-4):n<63?"_":n<64?"$":e(n>>6)+e(n&63)}while(i>0)u[e(r--)]=t[--i];return n.replace(/[\w\$]+/g,function(n){return u[n]==f[n]?n:u[n]})}('(6(E,C,D,A){c B,X,W,J="@_.DATA",K="@_.OPEN",H="@_.OPENER",I=C.k=C.k||"@_.WINNAME"+(Bd Bo).Be(),F=C.VBArray&&!C.XMLHttpRequest;E(6(){!C.Bu&&7.BY==="B0"&&Br("9 Error: 7.BY === \\"B0\\"")});c G=D.d=6(){c W=C,X=6(A){f{c W=C[A].7;W.BE}u(X){v!V}v C[A].9&&W.BE("frameset").length===U};v X("d")?W=C.d:X("BB")&&(W=C.BB),W}();D.BB=G,B=G.9,W=6(){v B.BW.w},D.m=6(C,B){c W=D.d,X=W[J]||{};W[J]=X;b(B!==A)X[C]=B;else v X[C];v X},D.BQ=6(W){c X=D.d[J];X&&X[W]&&1 X[W]},D.through=X=6(){c X=B.BR(i,BJ);v G!==C&&(D.B4[X.0.Z]=X),X},G!==C&&E(C).BN("unload",6(){c A=D.B4,W;BO(c X BS A)A[X]&&(W=A[X].0,W&&(W.duration=U),A[X].s(),1 A[X])}),D.p=6(B,O,BZ){O=O||{};c N,L,M,Bc,T,S,R,Q,BF,P=D.d,Ba="8:BD;n:-Bb;d:-Bb;Bp:o U;Bf:transparent",BI="r:g%;x:g%;Bp:o U";b(BZ===!V){c BH=(Bd Bo).Be(),BG=B.replace(/([?&])W=[^&]*/,"$1_="+BH);B=BG+(BG===B?(/\\?/.test(B)?"&":"?")+"W="+BH:"")}c G=6(){c B,C,W=L.2.B2(".aui_loading"),A=N.0;M.addClass("Bi"),W&&W.hide();f{Q=T.$,R=E(Q.7),BF=Q.7.Bg}u(X){T.q.5=BI,A.z?N.z(A.z):N.8(A.n,A.d),O.j&&O.j.l(N,Q,P),O.j=By;v}B=A.r==="Bt"?R.r()+(F?U:parseInt(E(BF).Bv("marginLeft"))):A.r,C=A.x==="Bt"?R.x():A.x,setTimeout(6(){T.q.5=BI},U),N.Bk(B,C),A.z?N.z(A.z):N.8(A.n,A.d),O.j&&O.j.l(N,Q,P),O.j=By},I={w:W(),j:6(){N=i,L=N.h,Bc=L.BM,M=L.2,T=N.BK=P.7.Bn("BK"),T.Bx=B,T.k="Open"+N.0.Z,T.q.5=Ba,T.BX("frameborder",U,U),T.BX("allowTransparency",!U),S=E(T),N.2().B3(T),Q=T.$;f{Q.k=T.k,D.m(T.k+K,N),D.m(T.k+H,C)}u(X){}S.BN("BC",G)},s:6(){S.Bv("4","o").unbind("BC",G);b(O.s&&O.s.l(i,T.$,P)===!V)v!V;M.removeClass("Bi"),S[U].Bx="about:blank",S.remove();f{D.BQ(T.k+K),D.BQ(T.k+H)}u(X){}}};Bq O.Y=="6"&&(I.Y=6(){v O.Y.l(N,T.$,P)}),Bq O.y=="6"&&(I.y=6(){v O.y.l(N,T.$,P)}),1 O.2;BO(c J BS O)I[J]===A&&(I[J]=O[J]);v X(I)},D.p.Bw=D.m(I+K),D.BT=D.m(I+H)||C,D.p.origin=D.BT,D.s=6(){c X=D.m(I+K);v X&&X.s(),!V},G!=C&&E(7).BN("mousedown",6(){c X=D.p.Bw;X&&X.w()}),D.BC=6(C,D,B){B=B||!V;c G=D||{},H={w:W(),j:6(A){c W=i,X=W.0;E.ajax({url:C,success:6(X){W.2(X),G.j&&G.j.l(W,A)},cache:B})}};1 D.2;BO(c F BS G)H[F]===A&&(H[F]=G[F]);v X(H)},D.Br=6(B,A){v X({Z:"Alert",w:W(),BL:"warning",t:!U,BA:!U,2:B,Y:!U,s:A})},D.confirm=6(C,A,B){v X({Z:"Confirm",w:W(),BL:"Bm",t:!U,BA:!U,3:U.V,2:C,Y:6(X){v A.l(i,X)},y:6(X){v B&&B.l(i,X)}})},D.prompt=6(D,B,C){C=C||"";c A;v X({Z:"Prompt",w:W(),BL:"Bm",t:!U,BA:!U,3:U.V,2:["<e q=\\"margin-bottom:5px;font-Bk:12px\\">",D,"<\/e>","<e>","<Bl B1=\\"",C,"\\" q=\\"r:18em;Bh:6px 4px\\" />","<\/e>"].join(""),j:6(){A=i.h.2.B2("Bl")[U],A.select(),A.BP()},Y:6(X){v B&&B.l(i,A.B1,X)},y:!U})},D.tips=6(B,A){v X({Z:"Tips",w:W(),title:!V,y:!V,t:!U,BA:!V}).2("<e q=\\"Bh: U 1em;\\">"+B+"<\/e>").time(A||V.B6)},E(6(){c A=D.dragEvent;b(!A)v;c B=E(C),X=E(7),W=F?"BD":"t",H=A.prototype,I=7.Bn("e"),G=I.q;G.5="4:o;8:"+W+";n:U;d:U;r:g%;x:g%;"+"cursor:move;filter:alpha(3=U);3:U;Bf:#FFF",7.Bg.B3(I),H.Bj=H.Bs,H.BV=H.Bz,H.Bs=6(){c E=D.BP.h,C=E.BM[U],A=E.2[U].BE("BK")[U];H.Bj.BR(i,BJ),G.4="block",G.w=D.BW.w+B5,W==="BD"&&(G.r=B.r()+"a",G.x=B.x()+"a",G.n=X.scrollLeft()+"a",G.d=X.scrollTop()+"a"),A&&C.offsetWidth*C.offsetHeight>307200&&(C.q.BU="hidden")},H.Bz=6(){c X=D.BP;H.BV.BR(i,BJ),G.4="o",X&&(X.h.BM[U].q.BU="visible")}})})(i.art||i.Bu,i,i.9)',"P|R|T|U|V|W|0|1|_|$|ok|id|px|if|var|top|div|try|100|DOM|this|init|name|call|data|left|none|open|style|width|close|fixed|catch|return|zIndex|height|cancel|follow|config|delete|content|opacity|display|cssText|function|document|position|artDialog|ARTDIALOG|contentWindow|lock|parent|load|absolute|getElementsByTagName|S|Y|Z|a|arguments|iframe|icon|main|bind|for|focus|removeData|apply|in|opener|visibility|_end|defaults|setAttribute|compatMode|O|Q|9999em|X|new|getTime|background|body|padding|aui_state_full|_start|size|input|question|createElement|Date|border|typeof|alert|start|auto|jQuery|css|api|src|null|end|BackCompat|value|find|appendChild|list|3|5".split("|"),109,122,{},{}));